1
00:00:10,639 --> 00:00:16,279
good morning welcome back uh today is

2
00:00:13,960 --> 00:00:18,160
lecture 12 We are continuing our graph

3
00:00:16,279 --> 00:00:21,039
Theory unit this time talking about

4
00:00:18,160 --> 00:00:23,240
matchings and stable matchings uh

5
00:00:21,039 --> 00:00:25,680
matchings in general are a really useful

6
00:00:23,240 --> 00:00:28,760
Concept in graph Theory they come up

7
00:00:25,680 --> 00:00:31,920
frequently when you're trying to match

8
00:00:28,760 --> 00:00:33,879
um pairs of OB objects you want everyone

9
00:00:31,920 --> 00:00:35,640
to have one partner or possibly zero

10
00:00:33,879 --> 00:00:38,559
Partners if they don't get a match then

11
00:00:35,640 --> 00:00:40,360
they're sad that's fine um but matchings

12
00:00:38,559 --> 00:00:42,079
are really useful concept so let's talk

13
00:00:40,360 --> 00:00:43,520
about what they mean what they're good

14
00:00:42,079 --> 00:00:46,960
at

15
00:00:43,520 --> 00:00:50,079
um and a few ideas surrounding these so

16
00:00:46,960 --> 00:00:50,079
first of all

17
00:00:50,120 --> 00:00:53,320
definition a

18
00:00:55,120 --> 00:00:59,520
matching in a graph

19
00:01:01,160 --> 00:01:05,439
which remember has a set of vertices and

20
00:01:02,840 --> 00:01:09,439
a set of edges which are pairs of

21
00:01:05,439 --> 00:01:09,439
vertices um is a

22
00:01:09,600 --> 00:01:12,600
subgraph

23
00:01:13,960 --> 00:01:19,280
oops M and what subgraph means is we're

24
00:01:17,400 --> 00:01:23,000
just taking a subset of the vertices and

25
00:01:19,280 --> 00:01:24,920
a subset of the edges uh so long as

26
00:01:23,000 --> 00:01:26,799
excuse me uh so long as all the edges

27
00:01:24,920 --> 00:01:31,920
have their vertices in the

28
00:01:26,799 --> 00:01:31,920
subset um let's see in which

29
00:01:32,840 --> 00:01:39,759
uh every vertex

30
00:01:35,040 --> 00:01:42,320
in sorry yeah every vertex in

31
00:01:39,759 --> 00:01:46,119
V uh

32
00:01:42,320 --> 00:01:47,119
has degree 1 in M degree less equal to 1

33
00:01:46,119 --> 00:01:51,799
in

34
00:01:47,119 --> 00:01:55,640
M uh and sorry this is vertex set of our

35
00:01:51,799 --> 00:01:57,840
subset um said differently a different

36
00:01:55,640 --> 00:02:00,840
definition which is just as good um a

37
00:01:57,840 --> 00:02:00,840
matching

38
00:02:02,360 --> 00:02:04,759
is a

39
00:02:05,680 --> 00:02:09,719
subset of the edges of our

40
00:02:10,520 --> 00:02:15,599
graph where no two selected

41
00:02:16,879 --> 00:02:23,200
edges

42
00:02:19,480 --> 00:02:23,200
edges share an end

43
00:02:24,160 --> 00:02:28,319
point so we're just choosing some of the

44
00:02:26,599 --> 00:02:30,400
edges of our graph making sure that we

45
00:02:28,319 --> 00:02:34,160
never touch edges that have an endpoint

46
00:02:30,400 --> 00:02:34,160
in common that uh for

47
00:02:34,959 --> 00:02:42,120
example I can draw this bow tie looking

48
00:02:38,560 --> 00:02:43,599
graph this this this this this here here

49
00:02:42,120 --> 00:02:47,360
here and

50
00:02:43,599 --> 00:02:49,959
here and then vertex A B

51
00:02:47,360 --> 00:02:54,360
C D

52
00:02:49,959 --> 00:02:57,400
E F G H so if this is our graph let me

53
00:02:54,360 --> 00:03:00,080
give you an example of a matching so an

54
00:02:57,400 --> 00:03:06,200
example of a matching is M the this is

55
00:03:00,080 --> 00:03:06,200
going to be just the edges be and

56
00:03:07,200 --> 00:03:12,239
DG uh this is an alternative uh notation

57
00:03:10,440 --> 00:03:15,480
for edges by the way instead of writing

58
00:03:12,239 --> 00:03:17,159
the set B comma e Clos curly brace uh I

59
00:03:15,480 --> 00:03:18,599
can just write be next to each other and

60
00:03:17,159 --> 00:03:21,200
it's clear we're talking about those two

61
00:03:18,599 --> 00:03:25,879
vertices so we're dealing with the edge

62
00:03:21,200 --> 00:03:27,720
be so that's this Edge and the edge DG

63
00:03:25,879 --> 00:03:31,760
which is this

64
00:03:27,720 --> 00:03:31,760
Edge is this a matching

65
00:03:35,640 --> 00:03:40,000
I see I see some headshakes sorry some

66
00:03:37,799 --> 00:03:41,959
head nods yeah this is a matching

67
00:03:40,000 --> 00:03:44,360
because none of our selected edges have

68
00:03:41,959 --> 00:03:48,080
end points in common if I had also

69
00:03:44,360 --> 00:03:50,040
chosen Edge FD if I tried to put FD into

70
00:03:48,080 --> 00:03:51,439
there as well then these two edges would

71
00:03:50,040 --> 00:03:52,239
be in conflict and we would no longer

72
00:03:51,439 --> 00:03:56,280
have a

73
00:03:52,239 --> 00:03:57,799
matching does that make sense so said um

74
00:03:56,280 --> 00:03:59,760
more similar to our first definition if

75
00:03:57,799 --> 00:04:01,040
we look at just the subgraph that

76
00:03:59,760 --> 00:04:03,120
includes our chosen

77
00:04:01,040 --> 00:04:06,040
edges all of the vertices in that

78
00:04:03,120 --> 00:04:07,720
subgraph need to have degree at most one

79
00:04:06,040 --> 00:04:10,239
so this has degree one and one and one

80
00:04:07,720 --> 00:04:11,959
and one and zeros for the others um if

81
00:04:10,239 --> 00:04:13,560
we have edges sharing end points we'd

82
00:04:11,959 --> 00:04:15,840
have higher degree which is not allowed

83
00:04:13,560 --> 00:04:15,840
in a

84
00:04:16,479 --> 00:04:21,560
matching um um like I said this has lots

85
00:04:19,600 --> 00:04:23,759
of applications anytime we're trying to

86
00:04:21,560 --> 00:04:27,280
pair things up uh for example online

87
00:04:23,759 --> 00:04:30,360
dating services um you're trying to

88
00:04:27,280 --> 00:04:31,919
recommend um say this user to that user

89
00:04:30,360 --> 00:04:34,360
and you recommend them to each other and

90
00:04:31,919 --> 00:04:36,120
they go on a date or something like that

91
00:04:34,360 --> 00:04:37,960
um and maybe you want to try to match up

92
00:04:36,120 --> 00:04:40,280
a bunch of them at once so you can have

93
00:04:37,960 --> 00:04:42,039
lots of dates happening in parallel so

94
00:04:40,280 --> 00:04:44,479
you want a matching that includes lots

95
00:04:42,039 --> 00:04:46,240
of edges knowing that no one can go on

96
00:04:44,479 --> 00:04:49,039
multiple dates at

97
00:04:46,240 --> 00:04:53,240
once um sometimes you might have a bunch

98
00:04:49,039 --> 00:04:55,960
of tasks in a in a an expensive um

99
00:04:53,240 --> 00:04:58,120
computational project you have lots of

100
00:04:55,960 --> 00:04:59,919
tasks you need to do and lots of servers

101
00:04:58,120 --> 00:05:01,560
that can help you out in parallel but

102
00:04:59,919 --> 00:05:04,720
each server can only do one job at a

103
00:05:01,560 --> 00:05:06,400
time so you want to find a matching that

104
00:05:04,720 --> 00:05:08,960
gets lots of servers working on

105
00:05:06,400 --> 00:05:10,960
different tasks at the same time so you

106
00:05:08,960 --> 00:05:12,639
want to find a matching that includes

107
00:05:10,960 --> 00:05:15,680
lots of your servers and lots of your

108
00:05:12,639 --> 00:05:18,280
tasks um and find a matching with lots

109
00:05:15,680 --> 00:05:20,360
of edges so you get lots done in

110
00:05:18,280 --> 00:05:23,199
parallel

111
00:05:20,360 --> 00:05:25,639
um so in a lot of these examples we're

112
00:05:23,199 --> 00:05:27,720
trying to maximize the number of edges

113
00:05:25,639 --> 00:05:30,199
in our matching try to get lots and lots

114
00:05:27,720 --> 00:05:33,840
of pairings all at once and there are a

115
00:05:30,199 --> 00:05:36,360
couple different Notions of big a big

116
00:05:33,840 --> 00:05:38,000
matching a matching with lots of edges

117
00:05:36,360 --> 00:05:40,440
that we want to Define we want to define

118
00:05:38,000 --> 00:05:42,080
a maximal matching and a maximum

119
00:05:40,440 --> 00:05:44,039
matching and I'm sorry that those sound

120
00:05:42,080 --> 00:05:47,319
very similar but let's talk about what

121
00:05:44,039 --> 00:05:49,440
they mean uh so we'll say that m is a

122
00:05:47,319 --> 00:05:52,440
maxim

123
00:05:49,440 --> 00:05:52,440
mole

124
00:05:57,039 --> 00:06:01,479
matching when it's not

125
00:06:03,520 --> 00:06:06,240
possible to

126
00:06:06,720 --> 00:06:13,280
find another

127
00:06:09,319 --> 00:06:15,319
Edge e that's in our set but not yet in

128
00:06:13,280 --> 00:06:20,319
our

129
00:06:15,319 --> 00:06:23,560
matching such that M with that new

130
00:06:20,319 --> 00:06:23,560
Edge is

131
00:06:24,199 --> 00:06:28,840
matching so Maxim Mo means you can't add

132
00:06:27,120 --> 00:06:30,599
new edges to the set of edges you

133
00:06:28,840 --> 00:06:32,680
already have

134
00:06:30,599 --> 00:06:35,360
so in this case with these two

135
00:06:32,680 --> 00:06:38,560
edges um all of the other edges I might

136
00:06:35,360 --> 00:06:40,960
try to add to these two have an end

137
00:06:38,560 --> 00:06:43,599
point in common with one or the other so

138
00:06:40,960 --> 00:06:46,240
I can't pick new edges to put into M

139
00:06:43,599 --> 00:06:50,319
while keeping the ones I already have so

140
00:06:46,240 --> 00:06:50,319
that makes M this matching is

141
00:06:53,199 --> 00:06:57,599
maximal does that make sense this is

142
00:06:55,280 --> 00:06:59,120
sort of a local notion where all you

143
00:06:57,599 --> 00:07:01,479
have to do is look at the matching you

144
00:06:59,120 --> 00:07:04,000
have and ask is there any single other

145
00:07:01,479 --> 00:07:06,000
Edge that I can put in here as well and

146
00:07:04,000 --> 00:07:08,560
if there isn't then it's

147
00:07:06,000 --> 00:07:09,840
maximal and if it's not if there is

148
00:07:08,560 --> 00:07:11,720
another Edge you can put in well go

149
00:07:09,840 --> 00:07:13,440
ahead and put it in then search again if

150
00:07:11,720 --> 00:07:15,680
there's yet another Edge you can put in

151
00:07:13,440 --> 00:07:17,879
put it in keep going until there isn't

152
00:07:15,680 --> 00:07:19,680
and then you have a maximal matching so

153
00:07:17,879 --> 00:07:21,160
it's very easy to find a maximal

154
00:07:19,680 --> 00:07:22,479
matching you just keep adding edges

155
00:07:21,160 --> 00:07:24,520
until you

156
00:07:22,479 --> 00:07:27,319
can't the difference is that that

157
00:07:24,520 --> 00:07:30,120
maximal matching you find might not be

158
00:07:27,319 --> 00:07:32,440
the biggest matching possible ever

159
00:07:30,120 --> 00:07:35,039
and that's the other notion we

160
00:07:32,440 --> 00:07:39,080
want a maximum

161
00:07:35,039 --> 00:07:43,160
matching we'll say that m

162
00:07:39,080 --> 00:07:43,160
is a maximum

163
00:07:46,159 --> 00:07:52,280
matching when there does not

164
00:07:49,360 --> 00:07:56,680
exist a bigger

165
00:07:52,280 --> 00:08:01,039
matching a matching M

166
00:07:56,680 --> 00:08:01,039
Prime with more edges

167
00:08:02,039 --> 00:08:08,039
so this is a global measure of Maximum

168
00:08:05,919 --> 00:08:10,599
we'll say of matching is maximum when

169
00:08:08,039 --> 00:08:13,240
it's the biggest you can ever do I don't

170
00:08:10,599 --> 00:08:15,560
care if you keep these particular edges

171
00:08:13,240 --> 00:08:18,639
just is there any matching at all

172
00:08:15,560 --> 00:08:20,639
anywhere that has more edges than

173
00:08:18,639 --> 00:08:23,599
this so that's the difference between

174
00:08:20,639 --> 00:08:26,000
maximal and maximum maximal is about

175
00:08:23,599 --> 00:08:27,680
local search can you make a single

176
00:08:26,000 --> 00:08:30,919
Improvement by adding a single thing

177
00:08:27,680 --> 00:08:33,919
here maximum is a global property is it

178
00:08:30,919 --> 00:08:37,039
the biggest possible ever and as you can

179
00:08:33,919 --> 00:08:38,839
imagine um finding a maximum matching or

180
00:08:37,039 --> 00:08:42,640
proving that a matching you have is

181
00:08:38,839 --> 00:08:42,640
maximum is a lot harder than

182
00:08:42,919 --> 00:08:49,120
maximal um this matching up here with DG

183
00:08:46,160 --> 00:08:51,600
and be is that

184
00:08:49,120 --> 00:08:53,360
maximum why not someone someone shaking

185
00:08:51,600 --> 00:08:56,360
their head can you tell

186
00:08:53,360 --> 00:08:56,360
me

187
00:08:57,200 --> 00:09:01,760
yes all right ad d

188
00:09:00,160 --> 00:09:03,839
um BG you

189
00:09:01,760 --> 00:09:05,760
said and

190
00:09:03,839 --> 00:09:09,079
C all

191
00:09:05,760 --> 00:09:11,519
right is a

192
00:09:09,079 --> 00:09:13,360
matching and is this a matching let's

193
00:09:11,519 --> 00:09:18,680
take a

194
00:09:13,360 --> 00:09:23,079
look we've got a D here b g here c e

195
00:09:18,680 --> 00:09:25,000
here none of those circled edges um that

196
00:09:23,079 --> 00:09:27,000
kind of look like coffee beans to me

197
00:09:25,000 --> 00:09:29,560
none of those coffee beans share of an

198
00:09:27,000 --> 00:09:31,800
end point so that is a matching and

199
00:09:29,560 --> 00:09:34,399
since this has more edges than M up

200
00:09:31,800 --> 00:09:37,680
there m is not

201
00:09:34,399 --> 00:09:40,120
maximum right cool so matchings can be

202
00:09:37,680 --> 00:09:42,200
maximal locally biggest even if they're

203
00:09:40,120 --> 00:09:46,079
not maximum globally

204
00:09:42,200 --> 00:09:48,720
biggest um is this matching maximum or

205
00:09:46,079 --> 00:09:48,720
can we do even

206
00:09:51,920 --> 00:09:55,600
better oh there was someone raising

207
00:09:54,440 --> 00:09:58,600
their hands in the back but it's

208
00:09:55,600 --> 00:09:58,600
brinmore

209
00:10:03,240 --> 00:10:05,440
there was someone else raising their

210
00:10:04,399 --> 00:10:06,600
hand but I think they were just

211
00:10:05,440 --> 00:10:10,360
adjusting their

212
00:10:06,600 --> 00:10:15,160
glasses all these fake outs plain jokes

213
00:10:10,360 --> 00:10:18,440
on me okay so is this is this a maximum

214
00:10:15,160 --> 00:10:21,680
matching or can we do better or what it

215
00:10:18,440 --> 00:10:21,680
oh yes

216
00:10:35,760 --> 00:10:40,720
all right so um let me uh let me say

217
00:10:38,760 --> 00:10:42,639
that so everyone else can hear so if we

218
00:10:40,720 --> 00:10:46,360
had a bigger matching we'd have to

219
00:10:42,639 --> 00:10:50,160
include F or H is that what you said all

220
00:10:46,360 --> 00:10:52,040
right um and if we try to include F then

221
00:10:50,160 --> 00:10:56,120
it's going to share an end point with a

222
00:10:52,040 --> 00:10:58,800
d uh which is not great um so yes that's

223
00:10:56,120 --> 00:11:01,160
almost exactly the logic I'm looking for

224
00:10:58,800 --> 00:11:03,639
um just a slight tweak to that uh when

225
00:11:01,160 --> 00:11:06,279
we're asking if a matching is maximum

226
00:11:03,639 --> 00:11:08,200
we're not really talking about adding to

227
00:11:06,279 --> 00:11:10,959
this specific matching that's the

228
00:11:08,200 --> 00:11:12,839
maximal side of things so instead of

229
00:11:10,959 --> 00:11:14,320
comparing what we have or instead of

230
00:11:12,839 --> 00:11:16,920
comparing to what we have to this

231
00:11:14,320 --> 00:11:18,639
particular matching um I just want to be

232
00:11:16,920 --> 00:11:22,519
able to prove that there is no bigger

233
00:11:18,639 --> 00:11:25,200
matching at all uh so what would it mean

234
00:11:22,519 --> 00:11:29,680
for there to be a bigger

235
00:11:25,200 --> 00:11:29,680
matching a bigger matching

236
00:11:30,760 --> 00:11:35,760
would

237
00:11:32,320 --> 00:11:40,160
include well at least four

238
00:11:35,760 --> 00:11:40,160
edges and therefore at least eight

239
00:11:40,639 --> 00:11:46,399
vertices but we only have eight vertices

240
00:11:43,600 --> 00:11:49,000
right 1 2 3 four five yep um so it would

241
00:11:46,399 --> 00:11:49,000
include all the

242
00:11:49,360 --> 00:11:53,880
vertices all right and any matching that

243
00:11:51,440 --> 00:11:57,040
includes all the vertices in particular

244
00:11:53,880 --> 00:11:57,040
includes a and

245
00:11:57,959 --> 00:12:03,560
F and we we can't use a and F cuz they

246
00:12:01,320 --> 00:12:05,279
would both have edges to D there's only

247
00:12:03,560 --> 00:12:08,079
one way to use a there's only one way to

248
00:12:05,279 --> 00:12:11,120
use F and they both use vertex D in the

249
00:12:08,079 --> 00:12:14,440
middle and we can't do that can't use a

250
00:12:11,120 --> 00:12:18,279
and F at the same

251
00:12:14,440 --> 00:12:18,279
time and this is our

252
00:12:18,839 --> 00:12:22,839
contradiction so if there's a bigger

253
00:12:20,880 --> 00:12:24,720
matching bad stuff happens so there

254
00:12:22,839 --> 00:12:26,880
doesn't exist a bigger matching that

255
00:12:24,720 --> 00:12:29,320
doesn't mean this U these three coffee

256
00:12:26,880 --> 00:12:31,560
beans are the only maximum match

257
00:12:29,320 --> 00:12:34,440
matching um there are a couple more for

258
00:12:31,560 --> 00:12:35,720
example we could replace ad with FD that

259
00:12:34,440 --> 00:12:38,440
would be fine that would be a different

260
00:12:35,720 --> 00:12:40,199
maximum matching uh so there can be

261
00:12:38,440 --> 00:12:43,160
multiple maximum

262
00:12:40,199 --> 00:12:44,680
matchings um that all necessarily have

263
00:12:43,160 --> 00:12:48,120
to have the same

264
00:12:44,680 --> 00:12:50,680
size um different maximal matchings

265
00:12:48,120 --> 00:12:54,480
don't all have to have the same size as

266
00:12:50,680 --> 00:12:56,199
we saw this two-edge matching is Maximo

267
00:12:54,480 --> 00:12:59,199
and also this three-edge matching is

268
00:12:56,199 --> 00:12:59,199
Maximo

269
00:12:59,639 --> 00:13:05,240
does that distinction make sense

270
00:13:02,079 --> 00:13:05,240
wonderful all

271
00:13:06,160 --> 00:13:10,079
right let's see so next

272
00:13:13,399 --> 00:13:17,279
definition a matching is

273
00:13:19,440 --> 00:13:23,040
perfect if and only

274
00:13:23,120 --> 00:13:29,240
if it

275
00:13:25,000 --> 00:13:29,240
includes all vertices

276
00:13:29,279 --> 00:13:34,920
so perfect matching gives everyone a

277
00:13:31,519 --> 00:13:39,079
partner and therefore exactly one

278
00:13:34,920 --> 00:13:41,360
partner does this graph have a perfect

279
00:13:39,079 --> 00:13:43,639
matching no a perfect matching would

280
00:13:41,360 --> 00:13:45,199
need to would need all eight vertices

281
00:13:43,639 --> 00:13:46,680
and therefore four edges but we already

282
00:13:45,199 --> 00:13:49,000
saw there are no matchings with four

283
00:13:46,680 --> 00:13:51,240
edges in this graph so not all graphs

284
00:13:49,000 --> 00:13:54,120
are going to have perfect matchings um

285
00:13:51,240 --> 00:13:56,759
but often in your task allocation Pro uh

286
00:13:54,120 --> 00:13:59,959
problems where you're trying to match

287
00:13:56,759 --> 00:14:01,440
everyone to another resource um ideally

288
00:13:59,959 --> 00:14:03,440
you'll end up with a perfect matching

289
00:14:01,440 --> 00:14:05,079
where everyone gets a partner or every

290
00:14:03,440 --> 00:14:08,480
task gets a

291
00:14:05,079 --> 00:14:12,639
server uh and so perfect matchings are

292
00:14:08,480 --> 00:14:12,639
um are very commonly the

293
00:14:13,079 --> 00:14:17,880
goal now so far we've been talking about

294
00:14:15,320 --> 00:14:20,639
matchings in general graphs um but

295
00:14:17,880 --> 00:14:26,240
matchings are very common especially in

296
00:14:20,639 --> 00:14:26,240
bipartite graphs so bipartite matchings

297
00:14:31,560 --> 00:14:37,680
um so when we're trying to match tasks

298
00:14:34,360 --> 00:14:39,800
to servers we have a bipartite graph all

299
00:14:37,680 --> 00:14:41,519
the edges connect a task to a server

300
00:14:39,800 --> 00:14:43,320
when it's possible for that task to be

301
00:14:41,519 --> 00:14:45,079
done on that server and then we're

302
00:14:43,320 --> 00:14:47,600
looking for a matching which tells you

303
00:14:45,079 --> 00:14:49,040
which servers are doing which tasks um

304
00:14:47,600 --> 00:14:51,440
so a lot of problems that involve

305
00:14:49,040 --> 00:14:55,639
matchings are naturally

306
00:14:51,440 --> 00:15:01,040
bipartite uh let's see and uh to

307
00:14:55,639 --> 00:15:03,680
emphasize um remember from last time by

308
00:15:01,040 --> 00:15:06,399
partite

309
00:15:03,680 --> 00:15:10,600
graphs don't

310
00:15:06,399 --> 00:15:10,600
need the same size on both

311
00:15:15,199 --> 00:15:21,320
sides as we saw with the Harvard vers

312
00:15:17,399 --> 00:15:23,320
MIT bipartite graph we had 7,000 on one

313
00:15:21,320 --> 00:15:25,360
side and 4,000 on the other side still a

314
00:15:23,320 --> 00:15:29,360
perfectly valid bipartite

315
00:15:25,360 --> 00:15:29,360
graph however

316
00:15:29,560 --> 00:15:33,560
um let's see let's

317
00:15:35,600 --> 00:15:43,600
see perfect matching can't possibly

318
00:15:39,680 --> 00:15:43,600
exist in a bipartite

319
00:15:45,360 --> 00:15:49,959
graph when the two sides have different

320
00:15:51,199 --> 00:15:55,600
sizes right there can never be a

321
00:15:53,519 --> 00:15:57,880
bipartite uh sorry there can never be a

322
00:15:55,600 --> 00:16:00,199
perfect matching between Harvard

323
00:15:57,880 --> 00:16:01,399
undergrads and MIT undergrads because

324
00:16:00,199 --> 00:16:03,759
there are more Harvard undergrads than

325
00:16:01,399 --> 00:16:06,199
MIT undergrads every Edge includes one

326
00:16:03,759 --> 00:16:07,839
of each so even if we max out all of the

327
00:16:06,199 --> 00:16:09,759
MIT students and give them a Harvard

328
00:16:07,839 --> 00:16:12,360
buddy there's still going to be 3,000

329
00:16:09,759 --> 00:16:13,560
Harvard students that lose out so if

330
00:16:12,360 --> 00:16:15,560
there's a perfect matching in your

331
00:16:13,560 --> 00:16:18,480
bipartite graph you have to have the

332
00:16:15,560 --> 00:16:20,160
same size doesn't mean there will always

333
00:16:18,480 --> 00:16:22,560
be a perfect matching when the two sides

334
00:16:20,160 --> 00:16:25,759
have the same size but it's at least

335
00:16:22,560 --> 00:16:25,759
necessary all

336
00:16:26,920 --> 00:16:31,880
right sometimes uh when you're trying to

337
00:16:30,000 --> 00:16:33,800
make these matchings not only are you

338
00:16:31,880 --> 00:16:36,480
trying to maximize the number of pairs

339
00:16:33,800 --> 00:16:41,440
you get or possibly uh get a perfect

340
00:16:36,480 --> 00:16:41,440
matching and get everyone a pair um but

341
00:16:43,240 --> 00:16:47,079
often edges are

342
00:16:48,600 --> 00:16:55,720
weighted uh so each Edge comes with a

343
00:16:53,000 --> 00:16:56,839
number so we have a function W from the

344
00:16:55,720 --> 00:17:00,360
set of

345
00:16:56,839 --> 00:17:01,920
edges to real numbers

346
00:17:00,360 --> 00:17:04,360
and each Edge comes with a number you

347
00:17:01,920 --> 00:17:07,120
can imagine in the tasks versus servers

348
00:17:04,360 --> 00:17:09,640
graph each Edge represents how long that

349
00:17:07,120 --> 00:17:12,600
task would take on that

350
00:17:09,640 --> 00:17:15,280
server and maybe certain tasks are going

351
00:17:12,600 --> 00:17:17,280
to be faster in different servers maybe

352
00:17:15,280 --> 00:17:19,480
because that server is more powerful or

353
00:17:17,280 --> 00:17:21,079
maybe because it's closer to other

354
00:17:19,480 --> 00:17:24,280
resources it might need and it can

355
00:17:21,079 --> 00:17:26,959
access them more quickly um but often

356
00:17:24,280 --> 00:17:30,240
when we have a weighted Edge like this

357
00:17:26,959 --> 00:17:30,240
uh we want

358
00:17:30,480 --> 00:17:33,039
a perfect

359
00:17:38,600 --> 00:17:42,640
matching with minimum total

360
00:17:48,720 --> 00:17:55,679
weight as an example of

361
00:17:51,360 --> 00:17:55,679
that here's a nice bipartite

362
00:17:55,960 --> 00:18:01,039
graph uh and maybe this Edge has weight

363
00:17:58,520 --> 00:18:03,640
three this has weight one this has

364
00:18:01,039 --> 00:18:06,600
weight five and this has weight

365
00:18:03,640 --> 00:18:09,559
two and I can see two different perfect

366
00:18:06,600 --> 00:18:11,960
matchings in this graph there's the one

367
00:18:09,559 --> 00:18:14,159
that does

368
00:18:11,960 --> 00:18:17,640
this and there's the

369
00:18:14,159 --> 00:18:17,640
one that does

370
00:18:18,120 --> 00:18:22,840
this I think that's all of

371
00:18:20,600 --> 00:18:24,960
them and if we look at the weights well

372
00:18:22,840 --> 00:18:26,280
this has weight three and two so this

373
00:18:24,960 --> 00:18:29,840
has total weight

374
00:18:26,280 --> 00:18:32,720
five uh and this has weight one and five

375
00:18:29,840 --> 00:18:35,440
so this has total weight

376
00:18:32,720 --> 00:18:37,080
six so you'd prefer this one to that one

377
00:18:35,440 --> 00:18:38,880
cuz five is smaller than six the total

378
00:18:37,080 --> 00:18:40,080
weight in this perfect matching is

379
00:18:38,880 --> 00:18:41,480
better than the total weight in this

380
00:18:40,080 --> 00:18:43,919
perfect

381
00:18:41,480 --> 00:18:47,120
matching right so these are just very

382
00:18:43,919 --> 00:18:48,679
common kinds of questions that you find

383
00:18:47,120 --> 00:18:50,640
yourself asking when you're modeling

384
00:18:48,679 --> 00:18:53,200
something in terms of matchings or

385
00:18:50,640 --> 00:18:55,159
perfect matchings often there's more to

386
00:18:53,200 --> 00:18:57,840
optimize than just finding a perfect

387
00:18:55,159 --> 00:18:59,760
matching and I mention all of these

388
00:18:57,840 --> 00:19:02,320
variations on these

389
00:18:59,760 --> 00:19:04,799
problems um because unlike last time

390
00:19:02,320 --> 00:19:06,919
where we saw that graph coloring is a

391
00:19:04,799 --> 00:19:09,159
useful abstraction but hard to compute

392
00:19:06,919 --> 00:19:11,480
exactly or hard to compute

393
00:19:09,159 --> 00:19:13,000
optimally um all of the matching

394
00:19:11,480 --> 00:19:14,440
problems I've mentioned we do have

395
00:19:13,000 --> 00:19:16,960
efficient algorithms

396
00:19:14,440 --> 00:19:21,320
for so we

397
00:19:16,960 --> 00:19:25,120
have we can

398
00:19:21,320 --> 00:19:25,120
find maximum

399
00:19:26,159 --> 00:19:33,039
matchings in graphs

400
00:19:30,039 --> 00:19:36,039
bipartite or otherwise uh yes

401
00:19:33,039 --> 00:19:36,039
question

402
00:19:36,880 --> 00:19:42,120
are oh um yeah where did these weights

403
00:19:39,880 --> 00:19:44,640
come from um these are just arbitrary in

404
00:19:42,120 --> 00:19:46,520
this example um I just picked them for

405
00:19:44,640 --> 00:19:48,320
demonstration um in a real world

406
00:19:46,520 --> 00:19:51,159
scenario the weights would represent

407
00:19:48,320 --> 00:19:53,400
like how much work it takes um to do the

408
00:19:51,159 --> 00:19:55,919
task corresponding to this pairing or

409
00:19:53,400 --> 00:19:58,159
how expensive this is or how

410
00:19:55,919 --> 00:20:00,640
desirable um so usually these weights

411
00:19:58,159 --> 00:20:02,679
are going to come from whatever context

412
00:20:00,640 --> 00:20:05,039
you're modeling and trying to optimize

413
00:20:02,679 --> 00:20:06,159
for but yeah in this example I just

414
00:20:05,039 --> 00:20:08,679
picked

415
00:20:06,159 --> 00:20:10,720
them um but there is an algorithm to

416
00:20:08,679 --> 00:20:14,679
find maximum matchings in graphs

417
00:20:10,720 --> 00:20:18,400
bipartite or not doesn't matter um

418
00:20:14,679 --> 00:20:18,400
excuse me uh we can

419
00:20:19,000 --> 00:20:23,120
find uh and because we can find maximum

420
00:20:21,480 --> 00:20:25,120
matchings we can find perfect matchings

421
00:20:23,120 --> 00:20:26,600
if they exist if a perfect matching

422
00:20:25,120 --> 00:20:28,320
exists it's certainly maximum because

423
00:20:26,600 --> 00:20:29,799
you can't use more than that number of

424
00:20:28,320 --> 00:20:32,600
edges

425
00:20:29,799 --> 00:20:35,919
um we can find Min

426
00:20:32,600 --> 00:20:35,919
weight perfect

427
00:20:37,640 --> 00:20:41,679
matchings uh in bipartite

428
00:20:43,400 --> 00:20:48,320
graphs we have algorithms to solve these

429
00:20:46,200 --> 00:20:50,280
kinds of problems so if you ever find

430
00:20:48,320 --> 00:20:52,080
yourself modeling a question with

431
00:20:50,280 --> 00:20:54,840
matching trying to find a matching with

432
00:20:52,080 --> 00:20:57,280
certain properties uh very often there

433
00:20:54,840 --> 00:20:58,159
will be algorithms to solve it quickly

434
00:20:57,280 --> 00:21:00,600
we're not going to cover those

435
00:20:58,159 --> 00:21:02,080
algorithms in this class um you'll see

436
00:21:00,600 --> 00:21:04,360
more of them in the follow-up classes

437
00:21:02,080 --> 00:21:06,720
six um 121 and

438
00:21:04,360 --> 00:21:08,280
122 um but just know that they're out

439
00:21:06,720 --> 00:21:11,440
there and know that this is a useful

440
00:21:08,280 --> 00:21:13,600
tool um both for modeling and for

441
00:21:11,440 --> 00:21:16,159
computing are there questions about

442
00:21:13,600 --> 00:21:16,159
these kinds of

443
00:21:20,400 --> 00:21:26,480
things all right no

444
00:21:23,279 --> 00:21:28,240
questions uh then let's move on to the

445
00:21:26,480 --> 00:21:30,320
main topic for today which is stable

446
00:21:28,240 --> 00:21:33,120
match

447
00:21:30,320 --> 00:21:35,520
so this is a uh yeah so the topic is

448
00:21:33,120 --> 00:21:35,520
stable

449
00:21:38,400 --> 00:21:42,799
matchings we are going to be uh in this

450
00:21:41,720 --> 00:21:44,919
problem we're going to be looking for

451
00:21:42,799 --> 00:21:48,080
certain kinds of perfect matchings in

452
00:21:44,919 --> 00:21:51,279
bipartite graphs so in this in the

453
00:21:48,080 --> 00:21:53,799
specific scenario let's imagine we have

454
00:21:51,279 --> 00:21:53,799
n

455
00:21:54,400 --> 00:21:59,080
applicants and n evaluators

456
00:21:59,919 --> 00:22:04,400
you can think of these like n interns

457
00:22:02,320 --> 00:22:06,559
that are looking for managers and M and

458
00:22:04,400 --> 00:22:08,400
N managers where we're going to match

459
00:22:06,559 --> 00:22:10,840
them up one to one each intern gets one

460
00:22:08,400 --> 00:22:13,400
manager and vice versa uh and we're

461
00:22:10,840 --> 00:22:16,200
trying to find a way to match them

462
00:22:13,400 --> 00:22:19,000
nicely uh you can think of these as the

463
00:22:16,200 --> 00:22:23,679
applicants are um recently graduated

464
00:22:19,000 --> 00:22:26,080
medical school students looking for

465
00:22:23,679 --> 00:22:27,799
residencies um and I mentioned this

466
00:22:26,080 --> 00:22:30,039
example specifically because the

467
00:22:27,799 --> 00:22:33,200
algorithm were about about to talk about

468
00:22:30,039 --> 00:22:35,279
is used in precisely that way um in

469
00:22:33,200 --> 00:22:38,640
practice in the real world in the United

470
00:22:35,279 --> 00:22:41,000
States at least um all residency

471
00:22:38,640 --> 00:22:42,760
applicants submit their list of

472
00:22:41,000 --> 00:22:45,559
preferences about which hospitals they

473
00:22:42,760 --> 00:22:47,840
want to do their residencies at um and

474
00:22:45,559 --> 00:22:49,600
they do interviews and hospitals submit

475
00:22:47,840 --> 00:22:50,480
their preferences for which candidates

476
00:22:49,600 --> 00:22:53,840
they

477
00:22:50,480 --> 00:22:55,799
prefer uh and they send this all to a

478
00:22:53,840 --> 00:22:58,520
national nonprofit

479
00:22:55,799 --> 00:23:01,080
organization who does a big global

480
00:22:58,520 --> 00:23:04,559
computation to find in some sense the

481
00:23:01,080 --> 00:23:07,600
best perfect matching it can and then it

482
00:23:04,559 --> 00:23:09,880
notifies everyone on the same day um all

483
00:23:07,600 --> 00:23:11,320
residency applicants are told on Match

484
00:23:09,880 --> 00:23:13,799
Day which was actually just a few weeks

485
00:23:11,320 --> 00:23:15,640
ago it happens once a year uh they're

486
00:23:13,799 --> 00:23:18,880
told where they're doing their residency

487
00:23:15,640 --> 00:23:20,520
and it's a a big party and um many of

488
00:23:18,880 --> 00:23:22,159
them are excited about going at their

489
00:23:20,520 --> 00:23:24,039
top school many of them don't get their

490
00:23:22,159 --> 00:23:26,000
top school and they're still happy

491
00:23:24,039 --> 00:23:28,600
because they still get to be a

492
00:23:26,000 --> 00:23:31,000
doctor um but they're going to use EX

493
00:23:28,600 --> 00:23:33,240
actly the algorithm I'm about to

494
00:23:31,000 --> 00:23:34,919
describe with some tweaks because the

495
00:23:33,240 --> 00:23:37,960
real world is more complicated than the

496
00:23:34,919 --> 00:23:42,120
simple math we're about to describe

497
00:23:37,960 --> 00:23:46,120
um but um this is a real algorithm with

498
00:23:42,120 --> 00:23:47,279
real consequences it was uh invented in

499
00:23:46,120 --> 00:23:49,440
what

500
00:23:47,279 --> 00:23:53,240
the Yeah in

501
00:23:49,440 --> 00:23:53,240
1962 by Gail and

502
00:23:56,200 --> 00:24:01,120
shapley uh that's that's two people um

503
00:23:59,080 --> 00:24:03,960
I'm going to call it the Gail shapley

504
00:24:01,120 --> 00:24:06,799
algorithm uh it was also improved um

505
00:24:03,960 --> 00:24:08,440
many years later by El Roth uh together

506
00:24:06,799 --> 00:24:10,080
they have found many real world

507
00:24:08,440 --> 00:24:14,760
applications and

508
00:24:10,080 --> 00:24:19,279
improvements um and it won them the 2012

509
00:24:14,760 --> 00:24:21,159
Nobel prize in economics for uh for alth

510
00:24:19,279 --> 00:24:23,240
and for shapley I don't know where Gail

511
00:24:21,159 --> 00:24:27,039
was in all of this uh I don't think he

512
00:24:23,240 --> 00:24:30,240
got the the prize as well anyway um

513
00:24:27,039 --> 00:24:33,440
really important useful practical

514
00:24:30,240 --> 00:24:35,399
algorithm that actually has some fairly

515
00:24:33,440 --> 00:24:37,360
simple mathematical underpinnings enough

516
00:24:35,399 --> 00:24:39,559
that we can describe it and analyze it

517
00:24:37,360 --> 00:24:42,200
and prove things about it uh in the next

518
00:24:39,559 --> 00:24:45,200
hour we have together

519
00:24:42,200 --> 00:24:47,919
so um what is this algorithm what is it

520
00:24:45,200 --> 00:24:49,679
for so as I said before we have n

521
00:24:47,919 --> 00:24:52,120
applicants and N

522
00:24:49,679 --> 00:24:56,840
evaluators um and each of them is going

523
00:24:52,120 --> 00:25:00,080
to give a preference ordering for um for

524
00:24:56,840 --> 00:25:05,919
all n of the opposite parties um in

525
00:25:00,080 --> 00:25:05,919
order of their preference so all

526
00:25:06,440 --> 00:25:09,720
applicants and

527
00:25:11,919 --> 00:25:16,360
evaluators give a full

528
00:25:16,960 --> 00:25:19,960
ranked

529
00:25:20,760 --> 00:25:24,159
list of their

530
00:25:25,080 --> 00:25:30,039
preferences so as a quick example

531
00:25:30,840 --> 00:25:34,720
trying not to run too fast for the

532
00:25:32,240 --> 00:25:37,440
cameraman back

533
00:25:34,720 --> 00:25:40,840
there so here's an example where we're

534
00:25:37,440 --> 00:25:42,960
we have five applicants and five

535
00:25:40,840 --> 00:25:43,919
evaluators I haven't said which is which

536
00:25:42,960 --> 00:25:45,360
because the relationship is pretty

537
00:25:43,919 --> 00:25:49,559
symmetric at this

538
00:25:45,360 --> 00:25:52,080
point um and so each person on the left

539
00:25:49,559 --> 00:25:54,440
gives a full ranked preference order for

540
00:25:52,080 --> 00:25:57,679
all of the people on the right so this

541
00:25:54,440 --> 00:25:58,760
person a prefers H then J then F then G

542
00:25:57,679 --> 00:26:00,480
then I

543
00:25:58,760 --> 00:26:03,240
in this strict

544
00:26:00,480 --> 00:26:06,120
ordering so each of these gives some

545
00:26:03,240 --> 00:26:07,600
permutation of f through of f through J

546
00:26:06,120 --> 00:26:09,559
each person over here gives some

547
00:26:07,600 --> 00:26:13,279
permutation of a through

548
00:26:09,559 --> 00:26:15,440
e uh with no restrictions on the kinds

549
00:26:13,279 --> 00:26:17,360
of rankings that are allowed as long as

550
00:26:15,440 --> 00:26:19,480
they give a full strict ranking of all

551
00:26:17,360 --> 00:26:19,480
the

552
00:26:21,120 --> 00:26:24,600
people not other

553
00:26:25,200 --> 00:26:29,559
restrictions if all the applicants want

554
00:26:27,520 --> 00:26:31,399
to choose the same evaluator as their

555
00:26:29,559 --> 00:26:33,399
first choice they can they're not all

556
00:26:31,399 --> 00:26:35,399
going to get it but they can all list it

557
00:26:33,399 --> 00:26:39,640
for example if everyone really wants to

558
00:26:35,399 --> 00:26:42,120
come to MGH uh for their uh for their

559
00:26:39,640 --> 00:26:44,159
residency let's live in the fiction

560
00:26:42,120 --> 00:26:46,960
where each Hospital only gets one

561
00:26:44,159 --> 00:26:49,799
resident uh so we're trying to match One

562
00:26:46,960 --> 00:26:51,799
hospital to one resident and vice versa

563
00:26:49,799 --> 00:26:54,080
if everyone lists MGH as their first

564
00:26:51,799 --> 00:26:55,559
choice that's fine they can only one's

565
00:26:54,080 --> 00:26:58,000
going to get

566
00:26:55,559 --> 00:27:02,120
it um so no other restrictions on which

567
00:26:58,000 --> 00:27:05,679
per mutations they give uh and we

568
00:27:02,120 --> 00:27:05,679
want a perfect

569
00:27:13,320 --> 00:27:17,360
matching that leaves everyone

570
00:27:17,880 --> 00:27:21,240
[Music]

571
00:27:19,159 --> 00:27:23,360
happy happy

572
00:27:21,240 --> 00:27:25,880
enough like I said we can't give

573
00:27:23,360 --> 00:27:28,600
everyone their Top Choice especially if

574
00:27:25,880 --> 00:27:30,559
all their top choices Collide um but we

575
00:27:28,600 --> 00:27:32,919
want to make sure everyone's happy

576
00:27:30,559 --> 00:27:34,600
enough and so let's look at an example

577
00:27:32,919 --> 00:27:37,279
before we describe exactly what we mean

578
00:27:34,600 --> 00:27:37,279
by happy

579
00:27:42,200 --> 00:27:48,200
enough so let's

580
00:27:45,600 --> 00:27:53,039
imagine back to our favorite

581
00:27:48,200 --> 00:27:56,799
graph ab and CD so we have applicants AB

582
00:27:53,039 --> 00:27:56,799
evaluators CD

583
00:27:59,159 --> 00:28:04,399
and

584
00:28:00,039 --> 00:28:07,039
a um prefers C over D so I'll list that

585
00:28:04,399 --> 00:28:08,519
as a one and a two a prefers C and then

586
00:28:07,039 --> 00:28:13,360
after C they prefer

587
00:28:08,519 --> 00:28:17,120
D um B likewise prefers C over d c

588
00:28:13,360 --> 00:28:20,039
prefers A over B and D also prefers A

589
00:28:17,120 --> 00:28:22,440
over B if we write it out more similar

590
00:28:20,039 --> 00:28:27,360
to the example over there this is saying

591
00:28:22,440 --> 00:28:29,240
that a uh prefers C over D and B prefers

592
00:28:27,360 --> 00:28:33,320
C over d

593
00:28:29,240 --> 00:28:36,279
and also C uh let's see prefers A over B

594
00:28:33,320 --> 00:28:39,240
and D prefers A over

595
00:28:36,279 --> 00:28:41,440
B so we're already in a scenario where

596
00:28:39,240 --> 00:28:42,760
not everyone can get their Top Choice

597
00:28:41,440 --> 00:28:43,720
someone is going to have to take their

598
00:28:42,760 --> 00:28:46,440
second

599
00:28:43,720 --> 00:28:49,360
choice um and let's look at an example

600
00:28:46,440 --> 00:28:49,360
what if we try to

601
00:28:49,840 --> 00:28:55,360
match a

602
00:28:52,360 --> 00:28:59,519
d and

603
00:28:55,360 --> 00:29:01,720
BC so what's going to happen here so a

604
00:28:59,519 --> 00:29:05,279
with D and B with

605
00:29:01,720 --> 00:29:06,240
C so b gets C so B is Happy B got their

606
00:29:05,279 --> 00:29:09,279
first

607
00:29:06,240 --> 00:29:12,279
choice a with d d is Happy D got their

608
00:29:09,279 --> 00:29:14,760
first choice right B and D have no

609
00:29:12,279 --> 00:29:19,559
reason to want to switch but what about

610
00:29:14,760 --> 00:29:23,080
a and C A and C are not paired

611
00:29:19,559 --> 00:29:24,760
together but they each prefer each other

612
00:29:23,080 --> 00:29:26,960
over their assigned

613
00:29:24,760 --> 00:29:28,799
Partners so if you think of this as like

614
00:29:26,960 --> 00:29:32,000
a a dating scenario

615
00:29:28,799 --> 00:29:33,720
o um if we try to say that A and D are

616
00:29:32,000 --> 00:29:35,799
paired and B and C are

617
00:29:33,720 --> 00:29:37,200
paired uh then what's going to happen is

618
00:29:35,799 --> 00:29:39,240
that a and C are going to run away with

619
00:29:37,200 --> 00:29:41,640
each other because they each prefer to

620
00:29:39,240 --> 00:29:45,039
be with each other than they're assigned

621
00:29:41,640 --> 00:29:47,600
partner uh we can we call that a rogue

622
00:29:45,039 --> 00:29:50,799
pair uh so we're going to

623
00:29:47,600 --> 00:29:53,440
say um a

624
00:29:50,799 --> 00:29:56,600
pair so an

625
00:29:53,440 --> 00:29:59,679
applicant and an

626
00:29:56,600 --> 00:30:01,640
evaluator form a

627
00:29:59,679 --> 00:30:05,360
rogue

628
00:30:01,640 --> 00:30:05,360
pair in a matching

629
00:30:07,399 --> 00:30:15,840
M uh when E and A each

630
00:30:12,679 --> 00:30:15,840
prefer each

631
00:30:19,760 --> 00:30:23,480
other more than

632
00:30:23,919 --> 00:30:28,399
their assigned partner

633
00:30:29,760 --> 00:30:32,320
and by the way for the rest of lecture

634
00:30:31,080 --> 00:30:34,799
when I mention matching I'm going to

635
00:30:32,320 --> 00:30:36,640
mean a perfect

636
00:30:34,799 --> 00:30:39,279
matching because we're trying to match

637
00:30:36,640 --> 00:30:41,200
all the applicants to all the evaluators

638
00:30:39,279 --> 00:30:44,000
and if I forget to say perfect I

639
00:30:41,200 --> 00:30:46,840
apologize I mean

640
00:30:44,000 --> 00:30:50,240
Perfect all right so a pair forms a

641
00:30:46,840 --> 00:30:52,440
rogue pair in some matching if they

642
00:30:50,240 --> 00:30:54,080
would each prefer each other than the

643
00:30:52,440 --> 00:30:56,440
partners they're assigned in that

644
00:30:54,080 --> 00:31:01,080
matching and what we're going to look

645
00:30:56,440 --> 00:31:01,080
for so the of the scale shapley

646
00:31:03,399 --> 00:31:07,320
algorithm we want a perfect

647
00:31:14,440 --> 00:31:19,600
matching with no

648
00:31:16,600 --> 00:31:19,600
Rogue

649
00:31:21,200 --> 00:31:25,360
pairs so happy enough we want a matching

650
00:31:23,880 --> 00:31:27,039
that makes everyone happy enough that

651
00:31:25,360 --> 00:31:28,600
you're never going to get two people

652
00:31:27,039 --> 00:31:30,200
running away with each other other

653
00:31:28,600 --> 00:31:32,720
rather than staying with their own

654
00:31:30,200 --> 00:31:35,559
partners for every pair that you match

655
00:31:32,720 --> 00:31:38,720
up at least one of them prefers to be

656
00:31:35,559 --> 00:31:40,240
with the partner they've been assigned

657
00:31:38,720 --> 00:31:41,679
than anyone else who would prefer to be

658
00:31:40,240 --> 00:31:46,200
with

659
00:31:41,679 --> 00:31:46,200
them such a matching we call

660
00:31:51,880 --> 00:31:57,519
stable so perfect matching with no Rogue

661
00:31:54,720 --> 00:31:58,840
pairs is what we mean by a stable

662
00:31:57,519 --> 00:32:00,279
matching

663
00:31:58,840 --> 00:32:03,399
and that's going to be our goal does

664
00:32:00,279 --> 00:32:05,120
there always exist a stable matching how

665
00:32:03,399 --> 00:32:07,000
can we find out when there does exist

666
00:32:05,120 --> 00:32:09,720
one can we come up with an algorithm

667
00:32:07,000 --> 00:32:13,000
that will always find one if it

668
00:32:09,720 --> 00:32:14,480
can in this example does there exist a

669
00:32:13,000 --> 00:32:16,200
stable

670
00:32:14,480 --> 00:32:17,760
matching well there are only two

671
00:32:16,200 --> 00:32:20,440
matchings in this graph so let's check

672
00:32:17,760 --> 00:32:27,559
the other one so we saw that AD and BC

673
00:32:20,440 --> 00:32:27,559
is not stable what about AC with BD

674
00:32:30,919 --> 00:32:35,159
okay so a with

675
00:32:32,360 --> 00:32:37,960
C well A and C each got their Top Choice

676
00:32:35,159 --> 00:32:39,600
there's no way they would ever go

677
00:32:37,960 --> 00:32:42,080
Rogue

678
00:32:39,600 --> 00:32:43,440
right and then if a and C can never go

679
00:32:42,080 --> 00:32:45,840
Rogue

680
00:32:43,440 --> 00:32:48,399
then excuse me then no one can go Rogue

681
00:32:45,840 --> 00:32:50,200
with them so B and D isn't going to

682
00:32:48,399 --> 00:32:52,799
break up so because B and C aren't going

683
00:32:50,200 --> 00:32:54,360
to run away together C is already happy

684
00:32:52,799 --> 00:32:56,159
A and D aren't going to run away

685
00:32:54,360 --> 00:33:01,360
together a is already

686
00:32:56,159 --> 00:33:01,360
happy so this matching is

687
00:33:01,440 --> 00:33:07,000
stable because none of the pairings are

688
00:33:04,880 --> 00:33:09,279
rogue sorry because none none of the

689
00:33:07,000 --> 00:33:12,279
possible pairs are a rogue

690
00:33:09,279 --> 00:33:15,960
pair does this example make

691
00:33:12,279 --> 00:33:17,919
sense cool so this particular example um

692
00:33:15,960 --> 00:33:19,440
two people with two people each with

693
00:33:17,919 --> 00:33:22,440
this preference

694
00:33:19,440 --> 00:33:26,279
order has a stable matching will there

695
00:33:22,440 --> 00:33:26,279
always be a stable matching

696
00:33:29,039 --> 00:33:33,000
well if we if we relax our conditions a

697
00:33:31,240 --> 00:33:36,309
little

698
00:33:33,000 --> 00:33:36,309
[Applause]

699
00:33:37,000 --> 00:33:44,039
bit and we decide

700
00:33:40,360 --> 00:33:46,799
let's let's no longer require bipartite

701
00:33:44,039 --> 00:33:49,360
let's just let everyone rank everyone

702
00:33:46,799 --> 00:33:53,600
and then hope to find a stable

703
00:33:49,360 --> 00:33:56,720
matching uh in that non-bipartite

704
00:33:53,600 --> 00:34:00,519
graph and here's an example of that

705
00:33:56,720 --> 00:34:00,519
so non-bipartite

706
00:34:06,440 --> 00:34:10,879
example let me make sure I'm erasing

707
00:34:08,639 --> 00:34:10,879
well

708
00:34:13,560 --> 00:34:18,480
enough all right so let's imagine we

709
00:34:15,960 --> 00:34:23,040
have four

710
00:34:18,480 --> 00:34:26,760
people they're going to be a b c and

711
00:34:23,040 --> 00:34:29,639
d and everyone's ranking everyone so

712
00:34:26,760 --> 00:34:33,760
everyone has three other people to rank

713
00:34:29,639 --> 00:34:36,639
uh and in this example a prefers

714
00:34:33,760 --> 00:34:38,879
B then prefers

715
00:34:36,639 --> 00:34:43,919
C then prefers

716
00:34:38,879 --> 00:34:44,919
D B prefers C then prefers a then

717
00:34:43,919 --> 00:34:48,720
prefers

718
00:34:44,919 --> 00:34:52,679
d c let's see so a prefers b b prefers c

719
00:34:48,720 --> 00:34:55,280
c prefers a then B then

720
00:34:52,679 --> 00:34:56,320
D and I don't even care what these

721
00:34:55,280 --> 00:34:59,079
preferences

722
00:34:56,320 --> 00:35:02,599
are uh so let me write this out in the

723
00:34:59,079 --> 00:35:08,760
other way so a prefers B then C then

724
00:35:02,599 --> 00:35:12,079
D B prefers C then a then d c prefers

725
00:35:08,760 --> 00:35:16,480
oops a then B then

726
00:35:12,079 --> 00:35:18,960
D and D I don't care D can have any

727
00:35:16,480 --> 00:35:21,520
preference order this example is already

728
00:35:18,960 --> 00:35:24,520
not going to have a stable

729
00:35:21,520 --> 00:35:24,520
matching

730
00:35:24,839 --> 00:35:29,440
because this graph is in some sense

731
00:35:27,119 --> 00:35:31,960
symmetric so of a B and C are all doing

732
00:35:29,440 --> 00:35:34,920
the same thing they each prefer the next

733
00:35:31,960 --> 00:35:37,560
in order among a b and c then the one

734
00:35:34,920 --> 00:35:39,599
after that and then D is last B prefers

735
00:35:37,560 --> 00:35:43,520
the next in order then the one after

736
00:35:39,599 --> 00:35:45,599
that among a b and c then D is last C

737
00:35:43,520 --> 00:35:47,160
prefers the next in cyclic order then

738
00:35:45,599 --> 00:35:50,319
the next then D is

739
00:35:47,160 --> 00:35:52,839
last so there are only uh three

740
00:35:50,319 --> 00:35:54,960
different matchings that we can make D

741
00:35:52,839 --> 00:35:56,440
has yeah D has to be matched with one of

742
00:35:54,960 --> 00:35:58,440
these three people and then the other

743
00:35:56,440 --> 00:35:59,680
two are paired together

744
00:35:58,440 --> 00:36:01,960
but since these three people are

745
00:35:59,680 --> 00:36:05,000
symmetric in this way all three of those

746
00:36:01,960 --> 00:36:07,880
matchings basically behave the same way

747
00:36:05,000 --> 00:36:10,000
so without loss of

748
00:36:07,880 --> 00:36:11,640
generality um we can assume that the

749
00:36:10,000 --> 00:36:15,319
matching looks

750
00:36:11,640 --> 00:36:16,560
like let's say a goes with D and B goes

751
00:36:15,319 --> 00:36:19,400
with

752
00:36:16,560 --> 00:36:22,000
C the other two matchings are going to

753
00:36:19,400 --> 00:36:25,839
are going to do something similar is

754
00:36:22,000 --> 00:36:25,839
this matching stable

755
00:36:31,960 --> 00:36:35,800
and the

756
00:36:33,520 --> 00:36:38,640
answer uh if you look at it carefully if

757
00:36:35,800 --> 00:36:42,119
you check all the pairs the

758
00:36:38,640 --> 00:36:46,000
answer is that AC is

759
00:36:42,119 --> 00:36:49,359
Rogue according to that matching AC is

760
00:36:46,000 --> 00:36:51,599
Rogue um and let let's let's check that

761
00:36:49,359 --> 00:36:54,440
what does it mean for AC to be Rogue

762
00:36:51,599 --> 00:36:56,280
well it means a prefers C more than

763
00:36:54,440 --> 00:36:59,079
their assigned partner so a is supposed

764
00:36:56,280 --> 00:37:02,680
to prefer C more than their assigned

765
00:36:59,079 --> 00:37:05,720
partner and C is supposed to prefer a

766
00:37:02,680 --> 00:37:08,119
over their assigned partner which is B

767
00:37:05,720 --> 00:37:11,920
so are these two things

768
00:37:08,119 --> 00:37:13,760
true well does a prefer C over D well

769
00:37:11,920 --> 00:37:17,359
yeah a prefers everyone to D so that's

770
00:37:13,760 --> 00:37:19,000
true does c prefer A over B well yeah

771
00:37:17,359 --> 00:37:22,640
that's the first thing we

772
00:37:19,000 --> 00:37:24,000
said so A and C prefer each other more

773
00:37:22,640 --> 00:37:26,319
than their assigned partners and are

774
00:37:24,000 --> 00:37:26,319
therefore

775
00:37:26,520 --> 00:37:34,200
Rogue so m is not

776
00:37:31,880 --> 00:37:37,079
stable so this is an example where if

777
00:37:34,200 --> 00:37:38,680
you have a bipartite graph uh and

778
00:37:37,079 --> 00:37:41,280
preferences among

779
00:37:38,680 --> 00:37:42,640
everyone then there won't always exist a

780
00:37:41,280 --> 00:37:45,160
stable

781
00:37:42,640 --> 00:37:47,599
matching which is why it's so amazing

782
00:37:45,160 --> 00:37:50,079
that the Gil shapley algorithm which is

783
00:37:47,599 --> 00:37:51,920
looking only at bipartite graphs it

784
00:37:50,079 --> 00:37:54,800
turns out and we're going to prove it

785
00:37:51,920 --> 00:37:56,760
always returns a stable matching in

786
00:37:54,800 --> 00:37:59,440
particular there always exists a stable

787
00:37:56,760 --> 00:37:59,440
matching

788
00:38:11,640 --> 00:38:16,400
so let's talk about the Gail

789
00:38:16,440 --> 00:38:20,560
shapley

790
00:38:18,599 --> 00:38:23,280
algorithm uh this is again just for

791
00:38:20,560 --> 00:38:28,680
bipartite graphs as as we set up over

792
00:38:23,280 --> 00:38:28,680
there um we're going to prove it always

793
00:38:29,839 --> 00:38:32,560
returns a stable

794
00:38:45,960 --> 00:38:50,760
matching and therefore stable matchings

795
00:38:48,160 --> 00:38:53,040
always exist in bipartite

796
00:38:50,760 --> 00:38:55,760
graphs um frequently there will be many

797
00:38:53,040 --> 00:38:58,319
many stable matchings for a given graph

798
00:38:55,760 --> 00:39:00,359
and for a given set of preferences

799
00:38:58,319 --> 00:39:02,359
um Gail shapley is only going to show us

800
00:39:00,359 --> 00:39:04,839
one of them it's certainly going to find

801
00:39:02,359 --> 00:39:07,800
a stable matching but not find all of

802
00:39:04,839 --> 00:39:11,240
them all right so let me describe this

803
00:39:07,800 --> 00:39:11,240
algorithm so the

804
00:39:12,599 --> 00:39:19,359
algorithm on each

805
00:39:15,400 --> 00:39:19,359
day we do the following two

806
00:39:19,720 --> 00:39:27,280
steps first so step

807
00:39:22,960 --> 00:39:27,280
one all applicants

808
00:39:31,240 --> 00:39:37,720
approach their

809
00:39:34,720 --> 00:39:37,720
favorite

810
00:39:40,800 --> 00:39:45,040
evaluator who hasn't yet rejected

811
00:39:48,200 --> 00:39:53,480
them so all the applicants walk up and

812
00:39:50,800 --> 00:39:56,079
say hey I want to I want to go to your

813
00:39:53,480 --> 00:39:59,240
uh your hospital for my residency and

814
00:39:56,079 --> 00:40:02,480
maybe um Mass General gets seven

815
00:39:59,240 --> 00:40:05,720
applicants um that morning at step two

816
00:40:02,480 --> 00:40:09,000
oops not step one again step

817
00:40:05,720 --> 00:40:09,000
two all

818
00:40:11,200 --> 00:40:17,800
evaluators

819
00:40:14,000 --> 00:40:17,800
reject all but their

820
00:40:20,440 --> 00:40:26,880
favorite that approached them that day

821
00:40:23,520 --> 00:40:28,319
so seven people all approach MGH MGH is

822
00:40:26,880 --> 00:40:32,200
going to look at all seven and say out

823
00:40:28,319 --> 00:40:35,640
of the seven of you I prefer Dr

824
00:40:32,200 --> 00:40:37,160
Evil um and the other six you can you

825
00:40:35,640 --> 00:40:40,040
can leave forever I never want to see

826
00:40:37,160 --> 00:40:42,640
your face again kind of harsh but that's

827
00:40:40,040 --> 00:40:45,800
how the algorithm Works um so you're

828
00:40:42,640 --> 00:40:49,079
going to do step one and step two every

829
00:40:45,800 --> 00:40:51,960
day and

830
00:40:49,079 --> 00:40:54,960
stop when there are no

831
00:40:51,960 --> 00:40:54,960
more

832
00:40:55,560 --> 00:41:01,400
rejections if a day ends and no one was

833
00:40:58,839 --> 00:41:04,160
rejected then that's the end of the

834
00:41:01,400 --> 00:41:05,560
algorithm now what I haven't said is so

835
00:41:04,160 --> 00:41:08,319
all applicants approach their favorite

836
00:41:05,560 --> 00:41:11,079
evaluator who hasn't yet rejected them

837
00:41:08,319 --> 00:41:12,680
if everyone has rejected them then

838
00:41:11,079 --> 00:41:13,920
there's nothing for them to do they they

839
00:41:12,680 --> 00:41:18,480
go home and

840
00:41:13,920 --> 00:41:18,480
cry um if

841
00:41:18,640 --> 00:41:22,560
possible so if they get through their

842
00:41:20,560 --> 00:41:24,280
whole list and everyone has said no and

843
00:41:22,560 --> 00:41:25,880
they have no one else they can approach

844
00:41:24,280 --> 00:41:28,440
there's nothing else for them to do they

845
00:41:25,880 --> 00:41:32,079
just drop out

846
00:41:28,440 --> 00:41:32,079
all right let's

847
00:41:38,920 --> 00:41:44,280
yes good question so if an evaluator has

848
00:41:41,880 --> 00:41:46,160
two different favorites that are equally

849
00:41:44,280 --> 00:41:49,359
preferable are they allowed to save both

850
00:41:46,160 --> 00:41:52,440
of them uh so no because of the way we

851
00:41:49,359 --> 00:41:54,400
set up the problem there are no ties

852
00:41:52,440 --> 00:41:57,000
they give a full strict

853
00:41:54,400 --> 00:41:59,200
ordering so among any two people they

854
00:41:57,000 --> 00:42:00,960
know which one they prefer they have a

855
00:41:59,200 --> 00:42:03,720
they have just a full list so you'll

856
00:42:00,960 --> 00:42:05,319
never have ties for preferences out of

857
00:42:03,720 --> 00:42:07,920
however many applicants you get that day

858
00:42:05,319 --> 00:42:09,800
there will be one clear favorite and you

859
00:42:07,920 --> 00:42:13,400
you temporarily hold on to them and

860
00:42:09,800 --> 00:42:13,400
everyone else gets the boot

861
00:42:13,560 --> 00:42:16,720
yes I'm

862
00:42:16,920 --> 00:42:22,160
sorry a good question does this only

863
00:42:19,000 --> 00:42:23,920
work for one to one ratios so yes still

864
00:42:22,160 --> 00:42:27,240
um in this algorithm we're only talking

865
00:42:23,920 --> 00:42:29,720
about n applicants and n evaluators and

866
00:42:27,240 --> 00:42:31,599
each evaluator is going to end up with

867
00:42:29,720 --> 00:42:34,720
one applicant and each applicant is

868
00:42:31,599 --> 00:42:36,280
going to end up with one evaluator uh so

869
00:42:34,720 --> 00:42:37,839
we have the same number on each side and

870
00:42:36,280 --> 00:42:40,359
we're trying to find a perfect matching

871
00:42:37,839 --> 00:42:44,160
that's those are the rules of the game

872
00:42:40,359 --> 00:42:47,760
does that answer your question cool um

873
00:42:44,160 --> 00:42:51,440
it can be useful to see this algorithm

874
00:42:47,760 --> 00:42:55,119
running it can be yes awesome so here's

875
00:42:51,440 --> 00:42:56,680
a a 4x4 example uh these preferences are

876
00:42:55,119 --> 00:42:59,079
just you know whatever preferences they

877
00:42:56,680 --> 00:43:00,720
have we have the evaluators on the top

878
00:42:59,079 --> 00:43:02,880
so imagine those are the med schools on

879
00:43:00,720 --> 00:43:04,280
the top and the doctors on the bottom

880
00:43:02,880 --> 00:43:07,000
that are doing the

881
00:43:04,280 --> 00:43:10,319
applications um so on day

882
00:43:07,000 --> 00:43:12,960
one um each of the applicants is going

883
00:43:10,319 --> 00:43:14,760
to approach the evaluator that they most

884
00:43:12,960 --> 00:43:16,319
prefer because there have been no

885
00:43:14,760 --> 00:43:20,000
rejections yet so they all just go to

886
00:43:16,319 --> 00:43:21,839
their Top Choice um evaluator one says

887
00:43:20,000 --> 00:43:23,520
okay well a you're my only applicant

888
00:43:21,839 --> 00:43:28,119
today so I I guess I'll hold on to you

889
00:43:23,520 --> 00:43:31,599
for now um uh Hospital 3 says oh no I

890
00:43:28,119 --> 00:43:35,880
have three applicants among those I

891
00:43:31,599 --> 00:43:37,920
prefer D so I'm going to reject B and C

892
00:43:35,880 --> 00:43:40,760
so B and C are now Gone Forever Three

893
00:43:37,920 --> 00:43:41,960
will never talk to to to B and C again

894
00:43:40,760 --> 00:43:45,680
and they get sent back down to the

895
00:43:41,960 --> 00:43:49,839
bottom and that's day one did that make

896
00:43:45,680 --> 00:43:51,640
sense awesome now in day two um well A

897
00:43:49,839 --> 00:43:52,680
and D still haven't been rejected by

898
00:43:51,640 --> 00:43:55,359
their Top Choice so they're just going

899
00:43:52,680 --> 00:43:57,319
to stay there for the next day um but B

900
00:43:55,359 --> 00:43:59,520
and C who got rejected have to to go

901
00:43:57,319 --> 00:44:02,880
find someone new so they're going to go

902
00:43:59,520 --> 00:44:04,440
to the next one down their list and it

903
00:44:02,880 --> 00:44:06,800
so happens that they're applying to the

904
00:44:04,440 --> 00:44:09,480
same place again this time uh and now

905
00:44:06,800 --> 00:44:13,079
they're in Conflict so Hospital 2 says I

906
00:44:09,480 --> 00:44:15,559
prefer B so C get away from me and

907
00:44:13,079 --> 00:44:17,839
that's the end of day two did that make

908
00:44:15,559 --> 00:44:19,480
sense nice who can tell me what's going

909
00:44:17,839 --> 00:44:21,000
to happen on day three at least the

910
00:44:19,480 --> 00:44:23,839
first step of day

911
00:44:21,000 --> 00:44:26,400
three yep up

912
00:44:23,839 --> 00:44:29,000
there yeah C looks through their list

913
00:44:26,400 --> 00:44:30,720
and says okay evaluator one is my next

914
00:44:29,000 --> 00:44:32,400
favorite that hasn't rejected me so I'm

915
00:44:30,720 --> 00:44:36,000
going to go over here to

916
00:44:32,400 --> 00:44:38,359
one all right and now evaluator one says

917
00:44:36,000 --> 00:44:41,400
oh there's a there's a contest between a

918
00:44:38,359 --> 00:44:43,920
and C looks like I prefer C this time so

919
00:44:41,400 --> 00:44:46,040
now a goes away so even though a had

920
00:44:43,920 --> 00:44:48,839
been held on for a couple days someone

921
00:44:46,040 --> 00:44:51,520
better came along so a gets gets kicked

922
00:44:48,839 --> 00:44:54,760
out it's a it's a Cutthroat

923
00:44:51,520 --> 00:44:58,000
game uh and let's keep going next day a

924
00:44:54,760 --> 00:45:00,440
says okay well my next favorite is three

925
00:44:58,000 --> 00:45:02,760
next down my list and I want to

926
00:45:00,440 --> 00:45:04,880
emphasize it's now day four but we're

927
00:45:02,760 --> 00:45:07,200
not looking at A's fourth

928
00:45:04,880 --> 00:45:08,800
choice we're only looking at A's second

929
00:45:07,200 --> 00:45:11,040
choice because a has only been rejected

930
00:45:08,800 --> 00:45:13,480
once so far so we're always going to the

931
00:45:11,040 --> 00:45:15,400
next choice for that person which might

932
00:45:13,480 --> 00:45:19,640
be at a different place for each person

933
00:45:15,400 --> 00:45:23,520
on that day so a goes to a hospital 3

934
00:45:19,640 --> 00:45:26,960
Hospital 3 says nuh-uh and sends a away

935
00:45:23,520 --> 00:45:28,960
again now a goes to hospital 2 hospit

936
00:45:26,960 --> 00:45:31,640
hital 2 says oh yeah okay I like that

937
00:45:28,960 --> 00:45:34,040
one so B can go away and now B has to go

938
00:45:31,640 --> 00:45:37,040
fend for themselves somewhere else so B

939
00:45:34,040 --> 00:45:40,960
goes to hospital one and says and gets

940
00:45:37,040 --> 00:45:43,520
rejected B goes to hospital 4 and

941
00:45:40,960 --> 00:45:47,000
finally there's nothing else to do no

942
00:45:43,520 --> 00:45:48,319
one is rejected so the algorithm is done

943
00:45:47,000 --> 00:45:50,200
did that make

944
00:45:48,319 --> 00:45:52,559
sense

945
00:45:50,200 --> 00:45:54,880
wonderful um let's make it make even

946
00:45:52,559 --> 00:45:57,880
more sense by doing an algorithm

947
00:45:54,880 --> 00:46:01,640
ourselves by hand so we've seen it run

948
00:45:57,880 --> 00:46:01,640
once now let's run it ourselves

949
00:46:06,720 --> 00:46:14,000
once excuse me so let's do this

950
00:46:10,520 --> 00:46:19,160
algorithm so on day one uh so so let's

951
00:46:14,000 --> 00:46:19,160
see uh let me make sure I'm matching my

952
00:46:21,119 --> 00:46:27,680
notes yeah so I want these on the left

953
00:46:24,640 --> 00:46:30,400
to be the evaluators

954
00:46:27,680 --> 00:46:33,160
and these on the right to be the

955
00:46:30,400 --> 00:46:34,680
applicants so every day F through J are

956
00:46:33,160 --> 00:46:36,520
going to apply to their best remaining

957
00:46:34,680 --> 00:46:38,040
choice and a through e you're going to

958
00:46:36,520 --> 00:46:45,079
make

959
00:46:38,040 --> 00:46:47,319
decisions so a b c d e what happens on

960
00:46:45,079 --> 00:46:47,319
day

961
00:46:47,640 --> 00:46:54,240
one F through J are each going to apply

962
00:46:50,119 --> 00:46:59,119
to their Top Choice okay so F applies to

963
00:46:54,240 --> 00:47:02,440
c g to a h to d i to a J to

964
00:46:59,119 --> 00:47:09,319
a okay so F goes to

965
00:47:02,440 --> 00:47:13,079
c g goes to a h goes to d i goes to a

966
00:47:09,319 --> 00:47:16,520
and j goes to a so these are the the

967
00:47:13,079 --> 00:47:19,440
applications on day one and then

968
00:47:16,520 --> 00:47:23,400
evaluator a says between g i and

969
00:47:19,440 --> 00:47:25,440
J between g i and

970
00:47:23,400 --> 00:47:29,520
J I prefer

971
00:47:25,440 --> 00:47:34,000
J so G G and I are

972
00:47:29,520 --> 00:47:34,960
rejected G and I are rejected G and I

973
00:47:34,000 --> 00:47:37,200
are

974
00:47:34,960 --> 00:47:39,680
rejected sound

975
00:47:37,200 --> 00:47:42,559
good I see some headshake was that a

976
00:47:39,680 --> 00:47:45,160
question or is it just funny that we're

977
00:47:42,559 --> 00:47:47,400
that we're being so

978
00:47:45,160 --> 00:47:50,559
aggressive wonderful all right so that's

979
00:47:47,400 --> 00:47:54,680
what happens on day one what about day

980
00:47:50,559 --> 00:47:57,400
two um well JF and H weren't rejected so

981
00:47:54,680 --> 00:48:00,720
they stay where they are so J a stays

982
00:47:57,400 --> 00:48:03,599
here F stays here H stays here but G and

983
00:48:00,720 --> 00:48:06,240
I have to go somewhere new so G is now

984
00:48:03,599 --> 00:48:06,240
going over to

985
00:48:06,319 --> 00:48:10,839
B uh and I is going over to

986
00:48:11,640 --> 00:48:18,800
C all right and now C has a choice C can

987
00:48:15,400 --> 00:48:22,400
choose between F and I C can choose

988
00:48:18,800 --> 00:48:27,440
between F and I oh c is definitely

989
00:48:22,400 --> 00:48:28,520
choosing i f is way down at the bottom

990
00:48:27,440 --> 00:48:30,680
so

991
00:48:28,520 --> 00:48:32,920
f is

992
00:48:30,680 --> 00:48:35,160
sad and I believe that's the end of day

993
00:48:32,920 --> 00:48:38,440
two stop me if I make mistake I very

994
00:48:35,160 --> 00:48:40,280
well might make a mistake here um day

995
00:48:38,440 --> 00:48:42,079
three well the only one that got

996
00:48:40,280 --> 00:48:44,040
rejected was F so they're the only one

997
00:48:42,079 --> 00:48:49,359
that needs to go somewhere new so we can

998
00:48:44,040 --> 00:48:51,880
just copy over j g i h and f where is f

999
00:48:49,359 --> 00:48:54,200
going F was rejected from C so they're

1000
00:48:51,880 --> 00:48:54,200
going to

1001
00:48:54,400 --> 00:49:00,240
B let's let's hope F has a better day

1002
00:48:57,040 --> 00:49:03,799
today than yesterday um so B is now

1003
00:49:00,240 --> 00:49:07,599
choosing between G and F and looks like

1004
00:49:03,799 --> 00:49:11,480
f wins this time so G is

1005
00:49:07,599 --> 00:49:14,240
rejected okay so G was rejected from B

1006
00:49:11,480 --> 00:49:18,520
and Tomorrow Needs to Go to

1007
00:49:14,240 --> 00:49:21,680
e so day four G is going down here to e

1008
00:49:18,520 --> 00:49:25,079
h i f and J We're Not rejected so they

1009
00:49:21,680 --> 00:49:27,280
stay put for the next day and

1010
00:49:25,079 --> 00:49:28,280
finally there's no cont test so there's

1011
00:49:27,280 --> 00:49:30,680
no

1012
00:49:28,280 --> 00:49:34,240
rejection and finally we have a matching

1013
00:49:30,680 --> 00:49:35,280
a with j b with f c with i d with h and

1014
00:49:34,240 --> 00:49:37,599
E with

1015
00:49:35,280 --> 00:49:40,599
G did that make

1016
00:49:37,599 --> 00:49:40,599
sense

1017
00:49:43,480 --> 00:49:47,960
question excellent question if we flip

1018
00:49:45,799 --> 00:49:52,440
the evaluators and the applicants do we

1019
00:49:47,960 --> 00:49:53,839
get the same matching um so as we said

1020
00:49:52,440 --> 00:49:55,440
earlier the relationship is kind of

1021
00:49:53,839 --> 00:49:57,640
symmetric right they're all giving

1022
00:49:55,440 --> 00:49:59,880
equivalent data we could have run this

1023
00:49:57,640 --> 00:50:02,200
in the opposite direction where F

1024
00:49:59,880 --> 00:50:05,720
through J are the evaluators and a

1025
00:50:02,200 --> 00:50:07,280
through e are the applicants and I have

1026
00:50:05,720 --> 00:50:10,440
claimed so far that we're going to end

1027
00:50:07,280 --> 00:50:11,680
up with a perfect matching um turns out

1028
00:50:10,440 --> 00:50:12,799
usually what you're going to get is a

1029
00:50:11,680 --> 00:50:15,520
different perfect

1030
00:50:12,799 --> 00:50:17,920
matching um and we're going to say very

1031
00:50:15,520 --> 00:50:20,680
precisely why that is uh a little later

1032
00:50:17,920 --> 00:50:21,920
on uh so really good question but yeah

1033
00:50:20,680 --> 00:50:22,880
just always keep that in the back of

1034
00:50:21,920 --> 00:50:24,680
your mind you could have run the

1035
00:50:22,880 --> 00:50:25,760
algorithm in the opposite direction and

1036
00:50:24,680 --> 00:50:28,640
you'll probably end up getting a

1037
00:50:25,760 --> 00:50:28,640
different stable matching

1038
00:50:34,040 --> 00:50:39,640
yes uh does the order of what matter

1039
00:50:37,000 --> 00:50:41,400
applicants the order of the applicants

1040
00:50:39,640 --> 00:50:42,680
um so the order of the applicants

1041
00:50:41,400 --> 00:50:44,280
doesn't matter the only thing that

1042
00:50:42,680 --> 00:50:46,720
matters for the algorithm is the

1043
00:50:44,280 --> 00:50:49,960
individual rankings for each person but

1044
00:50:46,720 --> 00:50:53,200
the fact that like g i and J approached

1045
00:50:49,960 --> 00:50:54,720
a in that order on day one didn't matter

1046
00:50:53,200 --> 00:50:56,359
all that matters that these three

1047
00:50:54,720 --> 00:50:57,440
approached and Jay is the best out of

1048
00:50:56,359 --> 00:51:00,240
these

1049
00:50:57,440 --> 00:51:04,160
three cool good

1050
00:51:00,240 --> 00:51:06,720
question all right um so we we got a

1051
00:51:04,160 --> 00:51:07,680
matching out of this example is it a

1052
00:51:06,720 --> 00:51:10,640
stable

1053
00:51:07,680 --> 00:51:12,319
matching if my theorem is to be believed

1054
00:51:10,640 --> 00:51:14,440
then or if Gail and shapley's Theorem is

1055
00:51:12,319 --> 00:51:16,040
to be believed then yes this should be a

1056
00:51:14,440 --> 00:51:18,920
stable matching and in this case if you

1057
00:51:16,040 --> 00:51:21,799
check all the possible Rogue pairs turns

1058
00:51:18,920 --> 00:51:24,240
out yes this is stable for this example

1059
00:51:21,799 --> 00:51:26,280
so that's at least one point in favor of

1060
00:51:24,240 --> 00:51:28,559
this algorithm producing correct results

1061
00:51:26,280 --> 00:51:28,559
question

1062
00:51:37,200 --> 00:51:41,599
interesting question if we wait if we

1063
00:51:39,480 --> 00:51:45,280
give a wait for um who gets which

1064
00:51:41,599 --> 00:51:47,520
preference So like um First Choice gets

1065
00:51:45,280 --> 00:51:49,720
one point second choice gets two points

1066
00:51:47,520 --> 00:51:51,640
and all the way down does this give an

1067
00:51:49,720 --> 00:51:54,680
Al does this algorithm give a matching

1068
00:51:51,640 --> 00:51:57,720
with lowest total weight uh that's a

1069
00:51:54,680 --> 00:52:00,040
really great question um

1070
00:51:57,720 --> 00:52:01,440
um at least if you're if you're counting

1071
00:52:00,040 --> 00:52:03,240
it on one side I'm pretty sure the

1072
00:52:01,440 --> 00:52:05,799
answer is yes if you're counting it on

1073
00:52:03,240 --> 00:52:08,280
the other side I'm pretty sure um it

1074
00:52:05,799 --> 00:52:10,839
gives a matching with the maximum total

1075
00:52:08,280 --> 00:52:13,839
weight uh which is probably not the side

1076
00:52:10,839 --> 00:52:15,520
that you want you want lower ranks um

1077
00:52:13,839 --> 00:52:17,599
but yeah really great question so there

1078
00:52:15,520 --> 00:52:19,559
are lots of ways you can see this as in

1079
00:52:17,599 --> 00:52:22,559
some sense some optimization problem we

1080
00:52:19,559 --> 00:52:25,799
want to maximize happiness which means

1081
00:52:22,559 --> 00:52:28,079
minimizing um how far along your ranking

1082
00:52:25,799 --> 00:52:32,200
list you have to to go before you find a

1083
00:52:28,079 --> 00:52:35,200
match uh cool so let's let's try to

1084
00:52:32,200 --> 00:52:37,400
prove why this algorithm does in fact

1085
00:52:35,200 --> 00:52:38,799
give us stable matchings and there are a

1086
00:52:37,400 --> 00:52:41,400
couple things to prove here let's see

1087
00:52:38,799 --> 00:52:41,400
where did I leave

1088
00:52:44,960 --> 00:52:47,960
off

1089
00:52:49,040 --> 00:52:54,000
okay so first question we so we've given

1090
00:52:51,839 --> 00:52:54,000
an

1091
00:52:54,920 --> 00:52:59,359
algorithm um in this class usually when

1092
00:52:57,920 --> 00:53:01,599
we're talking about algorithms we're

1093
00:52:59,359 --> 00:53:04,079
talking about State

1094
00:53:01,599 --> 00:53:07,400
machines and so we can think of this

1095
00:53:04,079 --> 00:53:07,400
algorithm as a state

1096
00:53:14,400 --> 00:53:22,119
machine machine where each

1097
00:53:19,040 --> 00:53:25,720
state is the set of rejections that have

1098
00:53:22,119 --> 00:53:25,720
happened so far

1099
00:53:39,000 --> 00:53:41,880
so to know where you are in the

1100
00:53:40,240 --> 00:53:43,839
algorithm and where you have to resume

1101
00:53:41,880 --> 00:53:45,839
to start the next day all you need to

1102
00:53:43,839 --> 00:53:48,599
know is which things have been crossed

1103
00:53:45,839 --> 00:53:50,000
off from which people's lists and then

1104
00:53:48,599 --> 00:53:51,400
you know what happens the next day

1105
00:53:50,000 --> 00:53:53,240
because each of the applicants just goes

1106
00:53:51,400 --> 00:53:58,319
to the next one in their

1107
00:53:53,240 --> 00:53:58,319
list right uh and transitions

1108
00:53:59,559 --> 00:54:03,160
correspond

1109
00:54:00,839 --> 00:54:06,520
to run one

1110
00:54:03,160 --> 00:54:08,240
day of the algorithm this is a way to

1111
00:54:06,520 --> 00:54:10,240
transl to transform one set of

1112
00:54:08,240 --> 00:54:12,200
rejections into probably a slightly

1113
00:54:10,240 --> 00:54:14,079
bigger set of rejections whatever

1114
00:54:12,200 --> 00:54:17,040
rejections happen on that day are now

1115
00:54:14,079 --> 00:54:19,280
also part of the new

1116
00:54:17,040 --> 00:54:21,119
state and now we can ask State machine

1117
00:54:19,280 --> 00:54:24,720
questions

1118
00:54:21,119 --> 00:54:27,720
like does the Gail shapley State machine

1119
00:54:24,720 --> 00:54:27,720
terminate

1120
00:54:29,319 --> 00:54:35,200
or might it run

1121
00:54:31,760 --> 00:54:35,200
forever who can tell

1122
00:54:39,079 --> 00:54:46,200
me yes it terminates

1123
00:54:43,319 --> 00:54:48,720
why it says so in the lecture notes o

1124
00:54:46,200 --> 00:54:48,720
appeal to

1125
00:54:48,920 --> 00:54:54,480
Authority I say it terminates and

1126
00:54:51,079 --> 00:54:55,880
therefore it terminates o um

1127
00:54:54,480 --> 00:54:58,599
unfortunately I can't use that

1128
00:54:55,880 --> 00:54:59,960
justification for myself CU if I wrote

1129
00:54:58,599 --> 00:55:01,839
the lecture notes then I am that

1130
00:54:59,960 --> 00:55:04,240
Authority so that that's not a valid

1131
00:55:01,839 --> 00:55:08,520
proof for me to use so I would ask that

1132
00:55:04,240 --> 00:55:08,520
you not use it either uh yes down

1133
00:55:11,040 --> 00:55:15,200
here awesome there are only a limited

1134
00:55:13,240 --> 00:55:17,960
number of rejections that can happen

1135
00:55:15,200 --> 00:55:21,359
exactly so every day that the algorithm

1136
00:55:17,960 --> 00:55:24,520
continues at least one rejection happens

1137
00:55:21,359 --> 00:55:28,000
but there are only N squared rejections

1138
00:55:24,520 --> 00:55:31,520
that can happen in total

1139
00:55:28,000 --> 00:55:35,079
right so there are at

1140
00:55:31,520 --> 00:55:37,720
most n s

1141
00:55:35,079 --> 00:55:40,559
rejections

1142
00:55:37,720 --> 00:55:44,079
possible we use at least

1143
00:55:40,559 --> 00:55:44,079
one for every

1144
00:55:46,119 --> 00:55:53,480
transition so we can follow at most n

1145
00:55:51,119 --> 00:55:53,480
squ

1146
00:55:54,680 --> 00:55:58,240
transitions uh before ter

1147
00:56:01,079 --> 00:56:06,839
minating yeah we terminate just because

1148
00:56:03,920 --> 00:56:09,359
we constantly use up a limited resource

1149
00:56:06,839 --> 00:56:11,640
and we have to finish at some point

1150
00:56:09,359 --> 00:56:13,960
before we eat up that resource or in the

1151
00:56:11,640 --> 00:56:15,960
worst case when we finish uh going

1152
00:56:13,960 --> 00:56:17,520
through all of that resource so worst

1153
00:56:15,960 --> 00:56:19,680
case everyone gets rejected from

1154
00:56:17,520 --> 00:56:23,480
everywhere and then we

1155
00:56:19,680 --> 00:56:25,200
stop Yes is n the number of applicants

1156
00:56:23,480 --> 00:56:27,640
yes n is the number of applicants and

1157
00:56:25,200 --> 00:56:29,520
the number of evaluators

1158
00:56:27,640 --> 00:56:32,720
they're the same

1159
00:56:29,520 --> 00:56:35,559
yes all right so it terminates yes

1160
00:56:32,720 --> 00:56:37,599
awesome next important

1161
00:56:35,559 --> 00:56:40,359
question when it

1162
00:56:37,599 --> 00:56:42,480
terminates does everyone have a

1163
00:56:40,359 --> 00:56:44,160
partner we were saying earlier that if

1164
00:56:42,480 --> 00:56:46,400
someone gets rejected from everyone they

1165
00:56:44,160 --> 00:56:48,960
go home crying so does anyone go home

1166
00:56:46,400 --> 00:56:51,960
crying we'd like that answer to be no

1167
00:56:48,960 --> 00:56:55,079
we'd like everyone to have a partner at

1168
00:56:51,960 --> 00:56:55,079
the end

1169
00:56:59,319 --> 00:57:01,559
all

1170
00:57:10,440 --> 00:57:14,920
right and the examples we've seen on the

1171
00:57:13,039 --> 00:57:17,640
board or sorry on the projector and on

1172
00:57:14,920 --> 00:57:20,599
the board over there um we did end with

1173
00:57:17,640 --> 00:57:22,880
an actual perfect matching um no one got

1174
00:57:20,599 --> 00:57:24,000
rejected from everywhere so is that true

1175
00:57:22,880 --> 00:57:26,799
in

1176
00:57:24,000 --> 00:57:28,079
general and to talk about this and also

1177
00:57:26,799 --> 00:57:32,440
to understand the algorithm a little

1178
00:57:28,079 --> 00:57:35,319
better in general um Let me give us some

1179
00:57:32,440 --> 00:57:36,920
uh invariance of this algorithm this

1180
00:57:35,319 --> 00:57:39,240
algorithm is a state machine so let's

1181
00:57:36,920 --> 00:57:40,799
use invariance and preserve properties

1182
00:57:39,240 --> 00:57:44,319
to talk about it

1183
00:57:40,799 --> 00:57:44,319
so um let's see

1184
00:57:46,920 --> 00:57:50,200
invariant each

1185
00:57:51,599 --> 00:57:56,720
applicant has been rejected

1186
00:57:59,240 --> 00:58:01,680
from a

1187
00:58:02,799 --> 00:58:07,160
prefix of their preference

1188
00:58:09,520 --> 00:58:15,880
list so on any particular day if you

1189
00:58:12,880 --> 00:58:17,559
look at one of these blue guys and ask

1190
00:58:15,880 --> 00:58:19,359
um who they've been rejected from It's

1191
00:58:17,559 --> 00:58:21,799
Always from the top of their list down

1192
00:58:19,359 --> 00:58:24,280
to some point and that's just because of

1193
00:58:21,799 --> 00:58:25,920
how the algorithm runs every day an

1194
00:58:24,280 --> 00:58:28,880
applicant goes to the Top Choice that

1195
00:58:25,920 --> 00:58:32,079
has hasn't rejected them yet and either

1196
00:58:28,880 --> 00:58:33,640
they stay with them for another day or

1197
00:58:32,079 --> 00:58:36,160
that evaluator rejects them and the

1198
00:58:33,640 --> 00:58:38,799
prefix gets one longer but either way

1199
00:58:36,160 --> 00:58:42,160
it's they're always rejected from a

1200
00:58:38,799 --> 00:58:42,160
prefix uh in

1201
00:58:44,960 --> 00:58:48,440
particular um let's

1202
00:58:48,720 --> 00:58:53,079
see each applicant

1203
00:58:56,920 --> 00:59:00,359
approaches worse

1204
00:59:01,760 --> 00:59:05,039
evaluators over

1205
00:59:05,799 --> 00:59:10,960
time since applicants always go down

1206
00:59:08,960 --> 00:59:14,000
their list from the

1207
00:59:10,960 --> 00:59:17,960
top um they're always approaching their

1208
00:59:14,000 --> 00:59:19,440
favorite evaluators every time they can

1209
00:59:17,960 --> 00:59:20,920
and if they're ever rejected they have

1210
00:59:19,440 --> 00:59:22,039
to go to someone worse and if they're

1211
00:59:20,920 --> 00:59:25,200
rejected they have to go to someone

1212
00:59:22,039 --> 00:59:26,920
worse again um so the the evaluators

1213
00:59:25,200 --> 00:59:29,440
that they're approaching only ever get

1214
00:59:26,920 --> 00:59:30,799
worse over time or stay constant if

1215
00:59:29,440 --> 00:59:34,880
they're not rejected that day but they

1216
00:59:30,799 --> 00:59:36,400
never get better so applicants prospects

1217
00:59:34,880 --> 00:59:39,880
only ever get

1218
00:59:36,400 --> 00:59:43,520
worse and the opposite happens for the

1219
00:59:39,880 --> 00:59:45,920
evaluators um I

1220
00:59:43,520 --> 00:59:47,480
claim uh that

1221
00:59:45,920 --> 00:59:50,119
evaluators

1222
00:59:47,480 --> 00:59:52,480
evaluators uh let's

1223
00:59:50,119 --> 00:59:58,039
see each

1224
00:59:52,480 --> 00:59:58,039
evaluator eval I can't spell evaluator

1225
00:59:58,400 --> 01:00:04,720
um let's see

1226
01:00:01,160 --> 01:00:04,720
picks from day to

1227
01:00:06,520 --> 01:00:09,960
day only get

1228
01:00:12,720 --> 01:00:16,359
better and if you think about this from

1229
01:00:14,799 --> 01:00:19,440
the perspective of an

1230
01:00:16,359 --> 01:00:20,640
evaluator um well if no one has ever

1231
01:00:19,440 --> 01:00:22,240
approached them then there's nothing for

1232
01:00:20,640 --> 01:00:24,240
them to do that day but if someone has

1233
01:00:22,240 --> 01:00:25,760
approached them and they have um they

1234
01:00:24,240 --> 01:00:27,160
have some number of people in front of

1235
01:00:25,760 --> 01:00:29,880
them they're always going to pick the

1236
01:00:27,160 --> 01:00:30,680
best from whoever's there when the next

1237
01:00:29,880 --> 01:00:32,839
day

1238
01:00:30,680 --> 01:00:35,640
happens they at least have that same

1239
01:00:32,839 --> 01:00:37,520
person again and possibly others and if

1240
01:00:35,640 --> 01:00:39,520
there's someone better then they'll

1241
01:00:37,520 --> 01:00:42,200
trade up and take someone better but

1242
01:00:39,520 --> 01:00:44,680
they never trade down the evaluators

1243
01:00:42,200 --> 01:00:46,799
always ever always only keep who they

1244
01:00:44,680 --> 01:00:50,440
had yesterday or trade up to someone

1245
01:00:46,799 --> 01:00:52,520
better for the next day so if valuator

1246
01:00:50,440 --> 01:00:55,039
prospects only get better and better

1247
01:00:52,520 --> 01:00:57,160
from day to day we can be a little more

1248
01:00:55,039 --> 01:01:00,119
precise about this

1249
01:00:57,160 --> 01:01:00,119
uh let's see so

1250
01:01:01,359 --> 01:01:08,039
invariant so for all

1251
01:01:04,400 --> 01:01:08,039
applicants and for all

1252
01:01:09,359 --> 01:01:14,240
evaluators um let's see if the evaluator

1253
01:01:12,680 --> 01:01:16,200
has

1254
01:01:14,240 --> 01:01:19,440
ever

1255
01:01:16,200 --> 01:01:19,440
rejected that

1256
01:01:20,319 --> 01:01:26,400
applicant then the evaluator has a

1257
01:01:24,240 --> 01:01:27,680
favorite

1258
01:01:26,400 --> 01:01:30,400
has has I'm going to call them a

1259
01:01:27,680 --> 01:01:30,400
candidate has a

1260
01:01:32,319 --> 01:01:35,760
candidate better than

1261
01:01:37,160 --> 01:01:45,280
a um so if Dr Jackal uh approaches briam

1262
01:01:41,599 --> 01:01:47,920
and women's uh and is rejected on day 12

1263
01:01:45,280 --> 01:01:50,240
then for all future days briam and

1264
01:01:47,920 --> 01:01:52,000
women's is going to have some candidate

1265
01:01:50,240 --> 01:01:53,559
that they finish the day with that's

1266
01:01:52,000 --> 01:01:56,079
better than Dr

1267
01:01:53,559 --> 01:01:58,880
Jackal uh and that's that's just a

1268
01:01:56,079 --> 01:02:01,279
precise way of saying this every day uh

1269
01:01:58,880 --> 01:02:03,200
they either keep who they had yesterday

1270
01:02:01,279 --> 01:02:06,359
or trade up to someone strictly

1271
01:02:03,200 --> 01:02:08,079
better so when they rejected Dr Jackal

1272
01:02:06,359 --> 01:02:09,400
that day they started or they they

1273
01:02:08,079 --> 01:02:12,000
finished that day with someone better

1274
01:02:09,400 --> 01:02:14,200
than Dr Jackal because that's why that's

1275
01:02:12,000 --> 01:02:17,079
the only reason you would reject Dr

1276
01:02:14,200 --> 01:02:19,440
Jackal um and then from then on they

1277
01:02:17,079 --> 01:02:23,279
either keep or trade up they only ever

1278
01:02:19,440 --> 01:02:26,839
get better does this invariant make

1279
01:02:23,279 --> 01:02:28,920
sense awesome so if evaluator has

1280
01:02:26,839 --> 01:02:30,760
rejected applicant then evaluator is

1281
01:02:28,920 --> 01:02:34,160
always going to have a candidate better

1282
01:02:30,760 --> 01:02:36,039
than that applicant from then on so now

1283
01:02:34,160 --> 01:02:37,440
let's answer this question does everyone

1284
01:02:36,039 --> 01:02:40,680
have a partner at the

1285
01:02:37,440 --> 01:02:42,839
end uh and let's see what happens if

1286
01:02:40,680 --> 01:02:42,839
they

1287
01:02:54,839 --> 01:03:01,480
don't so by way of contradiction let's

1288
01:02:58,279 --> 01:03:05,110
pick one particular applicant say Dr

1289
01:03:01,480 --> 01:03:06,880
Jackal uh so by way of

1290
01:03:05,110 --> 01:03:12,200
[Music]

1291
01:03:06,880 --> 01:03:12,200
contradiction assume Dr Jackal was

1292
01:03:13,760 --> 01:03:16,960
rejected by

1293
01:03:18,359 --> 01:03:23,760
everyone was rejected by all of the

1294
01:03:21,920 --> 01:03:28,400
evaluators all right and let's see what

1295
01:03:23,760 --> 01:03:28,400
goes wrong here well the end of the

1296
01:03:29,400 --> 01:03:34,319
algorithm at the end of the algorithm

1297
01:03:31,599 --> 01:03:35,319
since all of the evaluators red rejected

1298
01:03:34,319 --> 01:03:37,920
Dr

1299
01:03:35,319 --> 01:03:40,920
Jackal well what we wrote up here this

1300
01:03:37,920 --> 01:03:42,839
invariant says that all of the

1301
01:03:40,920 --> 01:03:45,359
evaluators have a candidate that's

1302
01:03:42,839 --> 01:03:47,279
better than Dr Jackal it was true when

1303
01:03:45,359 --> 01:03:49,000
they rejected Dr Jackal and it remains

1304
01:03:47,279 --> 01:03:54,200
true from then

1305
01:03:49,000 --> 01:03:54,200
on um all evaluators

1306
01:03:57,000 --> 01:03:59,359
have a

1307
01:04:01,480 --> 01:04:09,079
candidate better than Dr

1308
01:04:06,119 --> 01:04:11,760
J so we know we finish and when we

1309
01:04:09,079 --> 01:04:15,279
finish all of the evaluators end up

1310
01:04:11,760 --> 01:04:15,279
paired with someone better than Dr

1311
01:04:15,680 --> 01:04:21,880
J but there aren't enough people for

1312
01:04:18,079 --> 01:04:24,359
that they're in evaluators and N

1313
01:04:21,880 --> 01:04:26,119
applicants and if Dr Jackal isn't paired

1314
01:04:24,359 --> 01:04:27,960
with anyone

1315
01:04:26,119 --> 01:04:31,400
then there are only n minus one other

1316
01:04:27,960 --> 01:04:35,720
applicants that can possibly have

1317
01:04:31,400 --> 01:04:37,960
Partners uh so it can't be that all n of

1318
01:04:35,720 --> 01:04:41,480
the evaluators finish with a partner

1319
01:04:37,960 --> 01:04:43,720
better than Dr J because all n of the

1320
01:04:41,480 --> 01:04:46,960
the evaluators can't finish with anyone

1321
01:04:43,720 --> 01:04:49,119
or they can't all finish with anyone at

1322
01:04:46,960 --> 01:04:50,960
all

1323
01:04:49,119 --> 01:04:55,799
right

1324
01:04:50,960 --> 01:04:58,799
um but there're only n minus one other

1325
01:04:55,799 --> 01:04:58,799
candidate uh other

1326
01:05:00,799 --> 01:05:07,079
applicants so the N

1327
01:05:03,480 --> 01:05:07,079
evaluators can't all have

1328
01:05:11,640 --> 01:05:14,640
Partners

1329
01:05:15,720 --> 01:05:21,720
better than Dr J and there's our

1330
01:05:19,279 --> 01:05:24,520
contradiction so if we assume Dr J has

1331
01:05:21,720 --> 01:05:26,720
no partner at the end bad things happen

1332
01:05:24,520 --> 01:05:29,160
we find a contradiction so that doesn't

1333
01:05:26,720 --> 01:05:30,720
happen so Dr Jackal does end up with a

1334
01:05:29,160 --> 01:05:32,319
partner at the end and therefore

1335
01:05:30,720 --> 01:05:36,480
everyone

1336
01:05:32,319 --> 01:05:36,480
does so it returns a perfect

1337
01:05:40,720 --> 01:05:45,960
matching it returns a perfect matching

1338
01:05:43,079 --> 01:05:49,640
everyone gets some partner but is it

1339
01:05:45,960 --> 01:05:52,960
stable this is the part we really care

1340
01:05:49,640 --> 01:05:57,079
about is it

1341
01:05:52,960 --> 01:05:59,079
stable at the end

1342
01:05:57,079 --> 01:06:03,000
this is the part we really truly care

1343
01:05:59,079 --> 01:06:03,000
about and let's prove that it

1344
01:06:04,799 --> 01:06:11,680
is so to see why

1345
01:06:08,599 --> 01:06:15,319
um let's imagine what could possibly

1346
01:06:11,680 --> 01:06:15,319
result in a rogue

1347
01:06:15,839 --> 01:06:21,839
pair who can be

1348
01:06:19,319 --> 01:06:24,000
Rogue the algorithm returns some perfect

1349
01:06:21,839 --> 01:06:27,960
matching at the end what does it mean

1350
01:06:24,000 --> 01:06:30,359
for some pair of of of entities um to be

1351
01:06:27,960 --> 01:06:34,039
Rogue

1352
01:06:30,359 --> 01:06:37,039
well I claim there are three kinds of

1353
01:06:34,039 --> 01:06:39,720
applicant um in relation to one of the

1354
01:06:37,039 --> 01:06:42,440
particular evaluators so if we think of

1355
01:06:39,720 --> 01:06:46,680
tus as one of the evaluators tus Medical

1356
01:06:42,440 --> 01:06:49,000
Center um then some of the applicants

1357
01:06:46,680 --> 01:06:51,920
toughs rejected at some point in the

1358
01:06:49,000 --> 01:06:55,119
algorithm some of the applicants toughs

1359
01:06:51,920 --> 01:06:56,039
never spoke to and then one applicant

1360
01:06:55,119 --> 01:06:58,000
toughs

1361
01:06:56,039 --> 01:07:00,319
keeps until the end and ends up paired

1362
01:06:58,000 --> 01:07:02,640
with so let's consider each of those

1363
01:07:00,319 --> 01:07:06,000
three kinds of pairings and show that

1364
01:07:02,640 --> 01:07:08,520
toughs can't be Rogue with any of them

1365
01:07:06,000 --> 01:07:08,520
so let's

1366
01:07:09,720 --> 01:07:12,720
assume

1367
01:07:13,720 --> 01:07:20,559
Tufts rejected let's let's pick a

1368
01:07:16,520 --> 01:07:23,079
generic example tus rejected Dr

1369
01:07:20,559 --> 01:07:27,520
no uh let's say

1370
01:07:23,079 --> 01:07:27,520
TS um never spoke to

1371
01:07:29,960 --> 01:07:34,720
uh drct

1372
01:07:31,319 --> 01:07:39,160
who who's that I never spoke to them and

1373
01:07:34,720 --> 01:07:39,160
finally tus um is paired

1374
01:07:40,319 --> 01:07:43,799
with uh the good

1375
01:07:45,160 --> 01:07:49,960
doctor these are the three kinds of

1376
01:07:47,319 --> 01:07:51,480
people that can uh that can exist

1377
01:07:49,960 --> 01:07:52,640
relative to TS and let's show that none

1378
01:07:51,480 --> 01:07:55,279
of these can be

1379
01:07:52,640 --> 01:07:57,440
Rogue first of all toughs is paired with

1380
01:07:55,279 --> 01:07:59,920
the good doctor they're in our perfect

1381
01:07:57,440 --> 01:08:02,079
matching Rogue pairs are never in our

1382
01:07:59,920 --> 01:08:04,520
perfect matching they're pairs that are

1383
01:08:02,079 --> 01:08:07,319
preferred U mutually preferred to the

1384
01:08:04,520 --> 01:08:09,680
perfect matching so this is never

1385
01:08:07,319 --> 01:08:12,160
Rogue by definition of rogue if you're

1386
01:08:09,680 --> 01:08:13,720
in the matching you're not Rogue all

1387
01:08:12,160 --> 01:08:16,119
right so it's these other two cases that

1388
01:08:13,720 --> 01:08:16,119
we care

1389
01:08:18,160 --> 01:08:25,520
[Applause]

1390
01:08:20,319 --> 01:08:25,520
about so first let's look at Dr no

1391
01:08:32,719 --> 01:08:37,120
all right so tus

1392
01:08:38,040 --> 01:08:42,719
rejected Dr

1393
01:08:40,080 --> 01:08:45,040
No at some point in the

1394
01:08:42,719 --> 01:08:47,960
algorithm and because of this invariant

1395
01:08:45,040 --> 01:08:52,040
that we found we know that Tufts ends up

1396
01:08:47,960 --> 01:08:52,040
with someone better than Dr

1397
01:08:53,640 --> 01:08:57,440
no um is pair

1398
01:09:00,839 --> 01:09:03,520
with someone

1399
01:09:05,159 --> 01:09:11,279
better than Dr no because the moment uh

1400
01:09:09,319 --> 01:09:12,440
an evaluator rejects someone they know

1401
01:09:11,279 --> 01:09:15,880
they're always going to have someone

1402
01:09:12,440 --> 01:09:18,440
better from then on so tus and Dr No

1403
01:09:15,880 --> 01:09:20,600
can't possibly be Rogue because tus is

1404
01:09:18,440 --> 01:09:22,279
better with who they end up is U happier

1405
01:09:20,600 --> 01:09:23,640
with who they end up with than they

1406
01:09:22,279 --> 01:09:27,359
would be with Dr

1407
01:09:23,640 --> 01:09:29,880
no remember Rogue pair requires both

1408
01:09:27,359 --> 01:09:31,880
members of the pair to prefer each other

1409
01:09:29,880 --> 01:09:33,920
rather than their assigned partner so

1410
01:09:31,880 --> 01:09:37,040
since tus is happier with their assigned

1411
01:09:33,920 --> 01:09:39,520
partner than with Dr No TS and Dr No

1412
01:09:37,040 --> 01:09:39,520
cannot be

1413
01:09:41,920 --> 01:09:47,799
Rogue does that make

1414
01:09:45,120 --> 01:09:49,920
sense all right so we just use that

1415
01:09:47,799 --> 01:09:52,120
invariant to say that since tus rejected

1416
01:09:49,920 --> 01:09:53,159
Dr No their eventual partner is better

1417
01:09:52,120 --> 01:09:55,440
than Dr

1418
01:09:53,159 --> 01:09:57,719
No that's all that that is saying what

1419
01:09:55,440 --> 01:10:01,400
about the other side what about toughs

1420
01:09:57,719 --> 01:10:03,920
with Doctor Who Doctor Who Never spoke

1421
01:10:01,400 --> 01:10:06,719
with toughs during the algorithm all

1422
01:10:03,920 --> 01:10:09,880
right and since drct

1423
01:10:06,719 --> 01:10:13,600
who uh

1424
01:10:09,880 --> 01:10:13,600
never spoke with

1425
01:10:14,280 --> 01:10:18,040
toughs well remember what the applicants

1426
01:10:16,520 --> 01:10:21,040
are doing they're going down their list

1427
01:10:18,040 --> 01:10:24,320
from the top and since they stopped

1428
01:10:21,040 --> 01:10:28,480
before they got to Tufts wherever they

1429
01:10:24,320 --> 01:10:28,480
stopped they like better than they like

1430
01:10:29,600 --> 01:10:34,440
toughs so doctor

1431
01:10:32,800 --> 01:10:37,679
who

1432
01:10:34,440 --> 01:10:37,679
likes their

1433
01:10:41,679 --> 01:10:46,960
partner better than they like

1434
01:10:44,640 --> 01:10:49,159
toughs

1435
01:10:46,960 --> 01:10:52,640
right and

1436
01:10:49,159 --> 01:10:56,760
therefore toughs with Doctor Who Can't

1437
01:10:52,640 --> 01:10:58,960
Be Rogue not Rogue

1438
01:10:56,760 --> 01:11:00,880
because this time it's Doctor Who who's

1439
01:10:58,960 --> 01:11:03,360
happier with their assignment than they

1440
01:11:00,880 --> 01:11:03,360
would be with

1441
01:11:03,480 --> 01:11:09,080
TS so in this case tus would be happier

1442
01:11:07,360 --> 01:11:11,360
or tus is happier with their current

1443
01:11:09,080 --> 01:11:13,360
partner in this case Doctor Who is

1444
01:11:11,360 --> 01:11:16,320
happier with their current partner in

1445
01:11:13,360 --> 01:11:18,920
both of these cases tfts with this

1446
01:11:16,320 --> 01:11:21,480
person on the right cannot be Rogue so

1447
01:11:18,920 --> 01:11:25,159
toughs can't be Rogue with anyone so

1448
01:11:21,480 --> 01:11:25,159
there are no Rogue pairs

1449
01:11:31,920 --> 01:11:36,360
no rope pairs can exist the matching we

1450
01:11:34,280 --> 01:11:39,159
get at the end is in fact

1451
01:11:36,360 --> 01:11:41,480
stable did that make

1452
01:11:39,159 --> 01:11:43,480
sense

1453
01:11:41,480 --> 01:11:45,960
awesome okay let's return to this

1454
01:11:43,480 --> 01:11:47,280
question of how good is this matching is

1455
01:11:45,960 --> 01:11:49,480
this the one that makes everyone

1456
01:11:47,280 --> 01:11:52,719
maximally happy or minimally happy or

1457
01:11:49,480 --> 01:11:56,520
somewhere in the middle does anyone have

1458
01:11:52,719 --> 01:11:58,120
excuse me does anyone have an advantage

1459
01:11:56,520 --> 01:12:00,120
if you were participating in this

1460
01:11:58,120 --> 01:12:01,920
algorithm would you prefer to be an

1461
01:12:00,120 --> 01:12:04,800
applicant or an

1462
01:12:01,920 --> 01:12:06,199
evaluator well can kind of go both ways

1463
01:12:04,800 --> 01:12:08,239
we already said that applicants

1464
01:12:06,199 --> 01:12:09,880
prospects only get worse over time and

1465
01:12:08,239 --> 01:12:12,800
evaluators Prospects only get better

1466
01:12:09,880 --> 01:12:15,199
over time so maybe it's better to be an

1467
01:12:12,800 --> 01:12:16,880
evaluator on the other hand applicants

1468
01:12:15,199 --> 01:12:19,199
start at the top and they stay as close

1469
01:12:16,880 --> 01:12:21,639
to the top as they can until someone

1470
01:12:19,199 --> 01:12:24,719
grudgingly says okay I guess I'll keep

1471
01:12:21,639 --> 01:12:26,880
you um so maybe it's better to be an

1472
01:12:24,719 --> 01:12:30,639
applicant because you're always asking

1473
01:12:26,880 --> 01:12:33,000
the best um the best partner you you can

1474
01:12:30,639 --> 01:12:34,320
possibly have rather than the evaluators

1475
01:12:33,000 --> 01:12:35,239
who have to wait around for people to

1476
01:12:34,320 --> 01:12:37,960
come to

1477
01:12:35,239 --> 01:12:40,400
them so it's it's maybe not clear which

1478
01:12:37,960 --> 01:12:40,400
side is

1479
01:12:43,239 --> 01:12:48,320
preferable so let me give some let me

1480
01:12:46,440 --> 01:12:50,560
give a term so we can measure what we

1481
01:12:48,320 --> 01:12:56,320
mean by

1482
01:12:50,560 --> 01:13:00,880
preferable uh first of all let's say

1483
01:12:56,320 --> 01:13:04,159
um excuse me so if e is an evaluator and

1484
01:13:00,880 --> 01:13:08,000
a is an applicant uh let's say that E

1485
01:13:04,159 --> 01:13:11,000
and A are

1486
01:13:08,000 --> 01:13:11,000
feasible

1487
01:13:13,080 --> 01:13:18,520
Partners if and only if it's

1488
01:13:19,840 --> 01:13:25,320
possible to put E and A together

1489
01:13:26,120 --> 01:13:28,800
in a stable

1490
01:13:31,920 --> 01:13:37,440
matching not necessarily the stable

1491
01:13:34,560 --> 01:13:40,239
matching that the algorithm gives but if

1492
01:13:37,440 --> 01:13:41,920
there's any stable matching that pairs e

1493
01:13:40,239 --> 01:13:43,920
with a together then we'll say that they

1494
01:13:41,920 --> 01:13:48,600
are feasible

1495
01:13:43,920 --> 01:13:50,080
Partners all right and now we have the

1496
01:13:48,600 --> 01:13:53,520
following

1497
01:13:50,080 --> 01:13:58,280
theorems the Gail shapley

1498
01:13:53,520 --> 01:13:58,280
algorithm pairs every

1499
01:14:00,280 --> 01:14:07,120
applicant with

1500
01:14:03,040 --> 01:14:10,800
their most

1501
01:14:07,120 --> 01:14:10,800
preferred feasible

1502
01:14:14,920 --> 01:14:19,480
partner so each applicant doesn't get

1503
01:14:17,400 --> 01:14:20,840
their Top Choice we know they can't each

1504
01:14:19,480 --> 01:14:24,440
get their first choice because there

1505
01:14:20,840 --> 01:14:26,840
might be conflicts there um but each

1506
01:14:24,440 --> 01:14:28,679
applicant turns out gets the best

1507
01:14:26,840 --> 01:14:32,120
possible choice they could ever hope to

1508
01:14:28,679 --> 01:14:34,840
get among all possible stable

1509
01:14:32,120 --> 01:14:37,600
matchings so up here on the board we see

1510
01:14:34,840 --> 01:14:41,080
that um applicant a is paired with

1511
01:14:37,600 --> 01:14:43,920
evaluator 2 and not with one or

1512
01:14:41,080 --> 01:14:46,520
three and what this theorem says is that

1513
01:14:43,920 --> 01:14:49,040
a can never be paired with one and can

1514
01:14:46,520 --> 01:14:51,159
never be paired with three in any stable

1515
01:14:49,040 --> 01:14:53,199
matching there is no stable matching

1516
01:14:51,159 --> 01:14:55,440
that pairs a with one there is no stable

1517
01:14:53,199 --> 01:14:58,679
matching that pairs a with three a

1518
01:14:55,440 --> 01:15:02,400
paired with two is the highest

1519
01:14:58,679 --> 01:15:05,120
preference um partner that a has that is

1520
01:15:02,400 --> 01:15:06,199
feasible and Gail shap Gail shapley

1521
01:15:05,120 --> 01:15:08,920
gives him that

1522
01:15:06,199 --> 01:15:11,239
partner so every evaluator gets the best

1523
01:15:08,920 --> 01:15:12,480
partner they could possibly get in any

1524
01:15:11,239 --> 01:15:14,639
stable

1525
01:15:12,480 --> 01:15:17,440
matching I personally find this

1526
01:15:14,639 --> 01:15:19,840
surprising like often we when we have

1527
01:15:17,440 --> 01:15:21,400
some optimization problem but we have

1528
01:15:19,840 --> 01:15:24,280
lots of different metrics that we're

1529
01:15:21,400 --> 01:15:26,159
trying to optimize um like candidate a

1530
01:15:24,280 --> 01:15:27,719
wants to get their best possible partner

1531
01:15:26,159 --> 01:15:31,440
candidate B wants to get their best

1532
01:15:27,719 --> 01:15:33,679
possible partner and to me it it feels

1533
01:15:31,440 --> 01:15:36,480
intuitive that maybe these desires might

1534
01:15:33,679 --> 01:15:40,080
conflict with each other like maybe A

1535
01:15:36,480 --> 01:15:42,520
and B both have um evaluator 3 as their

1536
01:15:40,080 --> 01:15:44,239
optimal partner uh and there are just

1537
01:15:42,520 --> 01:15:46,400
two different stable matchings one that

1538
01:15:44,239 --> 01:15:49,320
pairs a with three one that pairs B with

1539
01:15:46,400 --> 01:15:52,320
three um so it's kind of weird to me

1540
01:15:49,320 --> 01:15:54,560
that each candidate can be given their

1541
01:15:52,320 --> 01:15:55,800
optimal partner their optimal feasible

1542
01:15:54,560 --> 01:15:57,280
partner

1543
01:15:55,800 --> 01:16:00,880
all at the same time and there's no

1544
01:15:57,280 --> 01:16:02,400
conflict among them so I find this a

1545
01:16:00,880 --> 01:16:06,360
little bit counterintuitive for that

1546
01:16:02,400 --> 01:16:06,360
reason beautiful fact but a little

1547
01:16:07,000 --> 01:16:12,320
counterintuitive

1548
01:16:08,880 --> 01:16:17,239
and Theorem Gail

1549
01:16:12,320 --> 01:16:17,239
shapley pairs every

1550
01:16:19,280 --> 01:16:26,520
evaluator with their this time least

1551
01:16:24,120 --> 01:16:29,080
preferred

1552
01:16:26,520 --> 01:16:29,080
feasible

1553
01:16:32,480 --> 01:16:37,360
partner so exactly the same idea but

1554
01:16:35,280 --> 01:16:39,239
this time the evaluators instead of

1555
01:16:37,360 --> 01:16:41,920
coming out as best as they possibly can

1556
01:16:39,239 --> 01:16:45,199
they come out as worst as they possibly

1557
01:16:41,920 --> 01:16:47,440
can because evaluator uh let's say

1558
01:16:45,199 --> 01:16:48,880
because evaluator one ended up with

1559
01:16:47,440 --> 01:16:51,800
partner

1560
01:16:48,880 --> 01:16:54,159
c um there is no stable matching that

1561
01:16:51,800 --> 01:16:55,560
pairs one with anyone worse than C

1562
01:16:54,159 --> 01:16:57,080
there's no stable matching that pairs

1563
01:16:55,560 --> 01:16:59,000
one with B there's no stable matching

1564
01:16:57,080 --> 01:17:03,080
that pairs one with

1565
01:16:59,000 --> 01:17:05,560
a um so it's best for all of the

1566
01:17:03,080 --> 01:17:09,239
applicants at the same time and

1567
01:17:05,560 --> 01:17:11,840
simultaneously worst uh for all of the

1568
01:17:09,239 --> 01:17:13,920
evaluators at the same time this single

1569
01:17:11,840 --> 01:17:17,120
matching that Gail shapley returns has

1570
01:17:13,920 --> 01:17:20,159
all of these properties in

1571
01:17:17,120 --> 01:17:22,960
it um which brings us back to the

1572
01:17:20,159 --> 01:17:25,639
question earlier if we were to run this

1573
01:17:22,960 --> 01:17:27,960
algorithm in reverse by swapping the

1574
01:17:25,639 --> 01:17:30,199
roles of the evaluators and the

1575
01:17:27,960 --> 01:17:32,800
applicants we're going to swap from

1576
01:17:30,199 --> 01:17:35,480
we're going to move from the matching

1577
01:17:32,800 --> 01:17:37,600
that is best for this set to to the one

1578
01:17:35,480 --> 01:17:38,920
that's best for the other set and the

1579
01:17:37,600 --> 01:17:41,600
one that's worst for the first set to

1580
01:17:38,920 --> 01:17:43,320
the one that's best for the other set

1581
01:17:41,600 --> 01:17:45,560
and that's why usually you're going to

1582
01:17:43,320 --> 01:17:47,880
get two different matchings out of it

1583
01:17:45,560 --> 01:17:49,880
because if there are multiple matchings

1584
01:17:47,880 --> 01:17:52,280
multiple stable matchings at all for

1585
01:17:49,880 --> 01:17:53,840
this set of preferences the worst and

1586
01:17:52,280 --> 01:17:56,840
the best are going to be different from

1587
01:17:53,840 --> 01:17:56,840
each other

1588
01:17:56,960 --> 01:18:01,639
do these ideas make sense we haven't

1589
01:17:58,560 --> 01:18:03,520
proven them yet but are the ideas do the

1590
01:18:01,639 --> 01:18:06,239
ideas make

1591
01:18:03,520 --> 01:18:09,199
sense all right uh let me give you just

1592
01:18:06,239 --> 01:18:11,199
a a brief hint at how we might go about

1593
01:18:09,199 --> 01:18:13,159
proving this we'll prove it more

1594
01:18:11,199 --> 01:18:17,199
precisely in recitation

1595
01:18:13,159 --> 01:18:17,199
tomorrow but the basic

1596
01:18:22,239 --> 01:18:26,760
idea pause for dramatic effect

1597
01:18:30,920 --> 01:18:34,800
the basic idea is going to be oh I'm

1598
01:18:33,080 --> 01:18:42,040
holding chalk I found

1599
01:18:34,800 --> 01:18:45,719
it um one more uh key invariant so

1600
01:18:42,040 --> 01:18:49,719
invariant for our Gail shapley

1601
01:18:45,719 --> 01:18:49,719
algorithm uh so if an

1602
01:18:50,280 --> 01:18:56,719
evaluator

1603
01:18:52,159 --> 01:18:56,719
ever rejects an applicant a

1604
01:18:57,560 --> 01:19:02,679
then

1605
01:18:59,400 --> 01:19:05,679
EA are not

1606
01:19:02,679 --> 01:19:05,679
feasible

1607
01:19:06,480 --> 01:19:11,360
Partners so if e rejects a at any time

1608
01:19:09,760 --> 01:19:13,960
during the Gil shapley

1609
01:19:11,360 --> 01:19:16,960
algorithm then there does not exist any

1610
01:19:13,960 --> 01:19:19,440
stable matching at all that puts e with

1611
01:19:16,960 --> 01:19:22,600
a

1612
01:19:19,440 --> 01:19:25,120
together uh turns out we can prove this

1613
01:19:22,600 --> 01:19:27,760
um as an invariant of our state machine

1614
01:19:25,120 --> 01:19:30,960
machine uh very briefly let's see if we

1615
01:19:27,760 --> 01:19:34,080
can do that um okay

1616
01:19:30,960 --> 01:19:36,920
so uh Al also this is true for all

1617
01:19:34,080 --> 01:19:39,080
evaluators and for all applicants if any

1618
01:19:36,920 --> 01:19:41,320
evaluator rejects any applicant at any

1619
01:19:39,080 --> 01:19:44,040
time then they're not feasible

1620
01:19:41,320 --> 01:19:45,679
Partners so the the heart of the proof

1621
01:19:44,040 --> 01:19:48,880
is let's

1622
01:19:45,679 --> 01:19:53,120
assume um that an evaluator

1623
01:19:48,880 --> 01:19:53,120
e uh rejects an applicant

1624
01:19:53,239 --> 01:19:58,639
a today

1625
01:19:56,120 --> 01:20:00,120
so we've newly rejected someone and so

1626
01:19:58,639 --> 01:20:01,560
now we're going to show that E and A

1627
01:20:00,120 --> 01:20:06,239
can't be feasible

1628
01:20:01,560 --> 01:20:09,600
Partners uh well in

1629
01:20:06,239 --> 01:20:13,520
favor of applicant B in favor sorry in

1630
01:20:09,600 --> 01:20:15,440
favor of a prime so if e rejects this

1631
01:20:13,520 --> 01:20:18,480
applicant in favor of that

1632
01:20:15,440 --> 01:20:21,360
applicant well then we know that e

1633
01:20:18,480 --> 01:20:23,520
prefers the new applicant over the old

1634
01:20:21,360 --> 01:20:26,040
applicant because that's the only reason

1635
01:20:23,520 --> 01:20:29,320
e would reject one for the

1636
01:20:26,040 --> 01:20:32,880
other uh and then the claim

1637
01:20:29,320 --> 01:20:36,719
here um or the the main

1638
01:20:32,880 --> 01:20:36,719
observation is that let's

1639
01:20:37,600 --> 01:20:42,520
see in any uh

1640
01:20:44,280 --> 01:20:47,280
hypothetical

1641
01:20:48,040 --> 01:20:52,719
stable matching not necessarily the one

1642
01:20:50,960 --> 01:20:54,400
that comes from Gil shapley but in any

1643
01:20:52,719 --> 01:20:55,639
possible stable matching you try to set

1644
01:20:54,400 --> 01:20:58,719
up

1645
01:20:55,639 --> 01:21:02,719
where a matches with E and then

1646
01:20:58,719 --> 01:21:06,320
necessarily a prime matches with someone

1647
01:21:02,719 --> 01:21:06,320
else um you can

1648
01:21:07,120 --> 01:21:15,199
prove that a sorry that e and a

1649
01:21:11,960 --> 01:21:15,199
prime are

1650
01:21:15,920 --> 01:21:23,840
rogue so because e rejected a prime in

1651
01:21:20,400 --> 01:21:26,040
favor of a on some day in the algorithm

1652
01:21:23,840 --> 01:21:27,880
um you can show that anytime you try to

1653
01:21:26,040 --> 01:21:30,199
pair a with e together in a stable

1654
01:21:27,880 --> 01:21:32,080
matching actually it's not stable cuz e

1655
01:21:30,199 --> 01:21:34,000
and a prime are are rogue they each

1656
01:21:32,080 --> 01:21:35,920
prefer each other uh you'll see the

1657
01:21:34,000 --> 01:21:39,360
details of that in recitation tomorrow

1658
01:21:35,920 --> 01:21:39,360
thank you so much

