1
00:00:11,360 --> 00:00:17,359
All right. Well, today's guest lecture

2
00:00:12,880 --> 00:00:18,320
is James Shepard uh with Quant Quantile.

3
00:00:17,359 --> 00:00:21,520
>> Quantile. Yeah.

4
00:00:18,320 --> 00:00:23,680
>> Which is a uh wholly owned uh subsidiary

5
00:00:21,520 --> 00:00:28,400
of LSCG.

6
00:00:23,680 --> 00:00:31,119
and uh your background in quant finance

7
00:00:28,400 --> 00:00:33,440
is quite long. Yep.

8
00:00:31,119 --> 00:00:35,280
>> And so I'll let you share some of the

9
00:00:33,440 --> 00:00:35,600
highlights. Okay. Thank you very much,

10
00:00:35,280 --> 00:00:36,800
James.

11
00:00:35,600 --> 00:00:38,800
>> Thank you very much. Do I need that or

12
00:00:36,800 --> 00:00:41,280
not? Okay. Thank you very much. Thank

13
00:00:38,800 --> 00:00:44,160
you for having me. Um this supposed to

14
00:00:41,280 --> 00:00:45,680
finish about a quarter to 4. Yeah, I

15
00:00:44,160 --> 00:00:46,719
would hope to leave some time for for

16
00:00:45,680 --> 00:00:48,079
questions.

17
00:00:46,719 --> 00:00:50,239
>> Yeah. 10.

18
00:00:48,079 --> 00:00:52,480
>> Okay. Uh thank you very much for having

19
00:00:50,239 --> 00:00:55,280
me. Yes, I'm James. Yes, I work for

20
00:00:52,480 --> 00:00:58,800
Quantile Technologies. Um, that's a

21
00:00:55,280 --> 00:01:01,840
fintech company. Um, founded in about

22
00:00:58,800 --> 00:01:04,000
2016 to do counterparty risk

23
00:01:01,840 --> 00:01:06,320
optimization, uh, which is the subject

24
00:01:04,000 --> 00:01:08,320
of today's talk. Um, a couple of years

25
00:01:06,320 --> 00:01:10,159
ago, we got bought out by the London

26
00:01:08,320 --> 00:01:14,240
Stock Exchange Group, which is why my

27
00:01:10,159 --> 00:01:16,479
email now says uh, LSEG. Prior to that,

28
00:01:14,240 --> 00:01:18,000
I was at Morgan Stanley for quite a long

29
00:01:16,479 --> 00:01:20,080
time, which is where I know kind of

30
00:01:18,000 --> 00:01:22,720
Vasili and Jake from, which is kind of

31
00:01:20,080 --> 00:01:25,040
how I've ended up here.

32
00:01:22,720 --> 00:01:27,040
Um, so we're going to talk today, we're

33
00:01:25,040 --> 00:01:30,080
going to kind of work our way up to

34
00:01:27,040 --> 00:01:31,840
talking about um optimizing a thing

35
00:01:30,080 --> 00:01:35,840
called initial margin, which is a

36
00:01:31,840 --> 00:01:37,680
measure of counterparty risk. Um, so

37
00:01:35,840 --> 00:01:42,320
we're going to start off talking about

38
00:01:37,680 --> 00:01:45,119
different types of risk. Sorry. Sorry.

39
00:01:42,320 --> 00:01:48,079
>> Uh, I've just emailed them to Peter.

40
00:01:45,119 --> 00:01:50,000
Sorry about that.

41
00:01:48,079 --> 00:01:51,520
>> Um, the first few is just kind of like

42
00:01:50,000 --> 00:01:55,600
warm-up stuff so you're not missing too

43
00:01:51,520 --> 00:01:56,960
much. Um, so the first the first part of

44
00:01:55,600 --> 00:01:58,399
the talk we're going to talk about are

45
00:01:56,960 --> 00:02:00,799
different types of risk that you have

46
00:01:58,399 --> 00:02:02,960
with um, derivative trading. Um, and

47
00:02:00,799 --> 00:02:05,759
we're going to talk about um, expected

48
00:02:02,960 --> 00:02:07,520
shortfall and and value at risk. Um just

49
00:02:05,759 --> 00:02:10,239
out of interest, do people know what

50
00:02:07,520 --> 00:02:13,599
these terms are or is it worth my

51
00:02:10,239 --> 00:02:16,959
explaining them a little bit?

52
00:02:13,599 --> 00:02:19,520
>> Okay, I will do that. Um then we'll talk

53
00:02:16,959 --> 00:02:22,000
about how that relates to initial margin

54
00:02:19,520 --> 00:02:24,879
uh and counterparty risk and then we'll

55
00:02:22,000 --> 00:02:28,239
kind of work our way up to uh how we

56
00:02:24,879 --> 00:02:31,280
optimize uh this initial margin uh

57
00:02:28,239 --> 00:02:32,959
within a network of uh financial inst

58
00:02:31,280 --> 00:02:34,959
institutions.

59
00:02:32,959 --> 00:02:37,360
and we'll talk a lot about the sort of

60
00:02:34,959 --> 00:02:40,000
challenges that you get in in the real

61
00:02:37,360 --> 00:02:42,239
world. Um, because this is a maths kind

62
00:02:40,000 --> 00:02:44,239
of talk, I feel morally obliged to to

63
00:02:42,239 --> 00:02:46,319
chuck some equations in the thing from

64
00:02:44,239 --> 00:02:47,680
time to time, but largely I'll kind of

65
00:02:46,319 --> 00:02:49,519
skip over that and talk a little bit

66
00:02:47,680 --> 00:02:51,840
about some of the intuition, some of the

67
00:02:49,519 --> 00:02:53,120
toy models. Um, and I put a bunch of

68
00:02:51,840 --> 00:02:55,360
references when you get the thing.

69
00:02:53,120 --> 00:02:56,879
There's a bunch of references at the end

70
00:02:55,360 --> 00:02:59,040
uh which have got sort of some of the

71
00:02:56,879 --> 00:03:01,120
proper maths and proofs uh and more

72
00:02:59,040 --> 00:03:03,519
detailed stuff behind it if if you're

73
00:03:01,120 --> 00:03:06,400
interested in that.

74
00:03:03,519 --> 00:03:07,680
Okay, so in the shape of derivatives,

75
00:03:06,400 --> 00:03:09,519
when we talk about the different kinds

76
00:03:07,680 --> 00:03:12,319
of risks that can arise when you're

77
00:03:09,519 --> 00:03:14,159
trading derivatives, um market risk is

78
00:03:12,319 --> 00:03:15,760
probably the most common one, right? So

79
00:03:14,159 --> 00:03:17,519
that's the value of your derivative goes

80
00:03:15,760 --> 00:03:21,760
up and down as the as the market

81
00:03:17,519 --> 00:03:24,560
changes. Um credit risk um again is sort

82
00:03:21,760 --> 00:03:28,080
of reasonably well kind of uh

83
00:03:24,560 --> 00:03:32,480
understood. It's um the the arises when

84
00:03:28,080 --> 00:03:34,879
you've got exposure to uh a data um

85
00:03:32,480 --> 00:03:37,920
defaulting, right? Operational risk is

86
00:03:34,879 --> 00:03:39,760
is largely when somebody screws up. Um

87
00:03:37,920 --> 00:03:41,599
it's probably actually the hardest one

88
00:03:39,760 --> 00:03:43,120
to do any mathematical modeling on

89
00:03:41,599 --> 00:03:46,640
operational risk because it's quite hard

90
00:03:43,120 --> 00:03:49,200
to to to to model people just messing

91
00:03:46,640 --> 00:03:52,799
up, right? Which is really what that is.

92
00:03:49,200 --> 00:03:57,120
Um liquidity risk um is when you've got

93
00:03:52,799 --> 00:03:58,959
a transaction which is um it's well as

94
00:03:57,120 --> 00:04:00,159
the name suggests illquid. It's going to

95
00:03:58,959 --> 00:04:02,000
happen when you've got a very large

96
00:04:00,159 --> 00:04:03,680
position. So if you're trying to sell a

97
00:04:02,000 --> 00:04:05,599
massive position in some particular

98
00:04:03,680 --> 00:04:07,040
stock you start selling that thing and

99
00:04:05,599 --> 00:04:08,959
then because you start selling it that

100
00:04:07,040 --> 00:04:10,720
moves the market and so you can't sell

101
00:04:08,959 --> 00:04:13,120
the whole thing at the position that the

102
00:04:10,720 --> 00:04:15,439
market was kind of when you started. Um

103
00:04:13,120 --> 00:04:18,079
so liquidity risk happens. It happens if

104
00:04:15,439 --> 00:04:19,919
it's a kind of obscure instrument and

105
00:04:18,079 --> 00:04:23,120
we'll come back to it in this it happens

106
00:04:19,919 --> 00:04:25,280
again if you've got a very very large

107
00:04:23,120 --> 00:04:29,040
position and what we're mostly going to

108
00:04:25,280 --> 00:04:30,720
talk about today is counterparty risk um

109
00:04:29,040 --> 00:04:34,400
which is the the exposure that you've

110
00:04:30,720 --> 00:04:37,919
got uh to when you trade derivatives to

111
00:04:34,400 --> 00:04:40,240
a counterparty defaulting um I think

112
00:04:37,919 --> 00:04:42,320
maybe question you might come ac have

113
00:04:40,240 --> 00:04:46,080
here is what's the difference between

114
00:04:42,320 --> 00:04:47,440
counterparty risk and credit risk. Um so

115
00:04:46,080 --> 00:04:49,759
the example you can have to

116
00:04:47,440 --> 00:04:51,919
differentiate this is if I do a trade

117
00:04:49,759 --> 00:04:55,840
with Goldman Sachs that's say a credit

118
00:04:51,919 --> 00:04:58,160
derivative swap that has some JP Morgan

119
00:04:55,840 --> 00:05:00,320
uh corporate bond as the underlying then

120
00:04:58,160 --> 00:05:03,120
I have credit risk with respect to JP

121
00:05:00,320 --> 00:05:05,680
Morgan because if JP Morgan defaults on

122
00:05:03,120 --> 00:05:08,000
its corporate bond then the value of my

123
00:05:05,680 --> 00:05:10,800
derivative will will will change and I

124
00:05:08,000 --> 00:05:13,120
have counterparty risk to Goldman Sachs

125
00:05:10,800 --> 00:05:14,880
because depending on what happens to the

126
00:05:13,120 --> 00:05:17,600
value of that derivative Goldman Sachs

127
00:05:14,880 --> 00:05:19,520
may or may not pay me that amount of

128
00:05:17,600 --> 00:05:22,880
money. Is that that's that's the

129
00:05:19,520 --> 00:05:25,440
difference between those those two

130
00:05:22,880 --> 00:05:28,639
make sense?

131
00:05:25,440 --> 00:05:30,639
Okay. Uh so once you've got uh type of

132
00:05:28,639 --> 00:05:32,479
risk once you've got some risk um

133
00:05:30,639 --> 00:05:35,039
generally speaking you want to mitigate

134
00:05:32,479 --> 00:05:37,600
it. I reduce either the probability of

135
00:05:35,039 --> 00:05:38,800
it happening or reduce the impact of uh

136
00:05:37,600 --> 00:05:41,199
that risk happening. Not just for

137
00:05:38,800 --> 00:05:43,680
counterparty risk for all kinds of risk,

138
00:05:41,199 --> 00:05:45,600
right? um should hopefully reasonably

139
00:05:43,680 --> 00:05:48,880
obvious that people want to try and make

140
00:05:45,600 --> 00:05:50,240
the the impact of the of once you've

141
00:05:48,880 --> 00:05:51,919
identified the risk make the impact of

142
00:05:50,240 --> 00:05:54,960
that smaller. So there's a bunch of

143
00:05:51,919 --> 00:05:56,960
different ways that you can uh do that.

144
00:05:54,960 --> 00:05:59,199
We're largely going today to talk about

145
00:05:56,960 --> 00:06:01,360
the hedging, right? Which means book

146
00:05:59,199 --> 00:06:03,039
some trades to offset book some new

147
00:06:01,360 --> 00:06:04,800
trades which will offset the risk that

148
00:06:03,039 --> 00:06:07,199
you've just discovered that you've got.

149
00:06:04,800 --> 00:06:09,120
Um and we'll talk about uh

150
00:06:07,199 --> 00:06:12,560
collateralization, right? which is

151
00:06:09,120 --> 00:06:14,000
really paying margin payments from um

152
00:06:12,560 --> 00:06:15,919
from the person you've got the person

153
00:06:14,000 --> 00:06:17,600
who you have you're exposed to. You

154
00:06:15,919 --> 00:06:18,960
would collect a margin payment from them

155
00:06:17,600 --> 00:06:21,120
which is kind of like an insurance

156
00:06:18,960 --> 00:06:22,240
payment against them defaulting and

157
00:06:21,120 --> 00:06:24,960
that's mostly what we're going to talk

158
00:06:22,240 --> 00:06:28,720
about today. Um there are other things

159
00:06:24,960 --> 00:06:30,319
you can do. Um, and there's a thing

160
00:06:28,720 --> 00:06:31,600
called central clearing counterparties,

161
00:06:30,319 --> 00:06:33,520
which I thought nobody would have heard

162
00:06:31,600 --> 00:06:35,199
of, but apparently someone's Andrew

163
00:06:33,520 --> 00:06:36,639
Gunstensson has already sort of

164
00:06:35,199 --> 00:06:39,280
mentioned this a little bit, so hope I

165
00:06:36,639 --> 00:06:41,280
might skip over this slide. Um, because

166
00:06:39,280 --> 00:06:45,039
they are kind of important in the

167
00:06:41,280 --> 00:06:50,000
trading of of derivatives. Um, so I have

168
00:06:45,039 --> 00:06:51,280
a quick slide on CCPs. Um, so normally

169
00:06:50,000 --> 00:06:53,039
you trade derivatives and they're

170
00:06:51,280 --> 00:06:54,880
bilateral trades, right? So JP Morgan

171
00:06:53,039 --> 00:06:57,440
trades with Goldman Sachs and so on. So,

172
00:06:54,880 --> 00:06:59,840
we've got here you've got four parties.

173
00:06:57,440 --> 00:07:03,120
Say A trades with B. A trades with C.

174
00:06:59,840 --> 00:07:05,599
Um, it's got a position of 100 versus B,

175
00:07:03,120 --> 00:07:08,080
125 in the opposite direction versus C.

176
00:07:05,599 --> 00:07:10,160
And what a central clearing uh

177
00:07:08,080 --> 00:07:12,479
counterparty does, as the name kind of

178
00:07:10,160 --> 00:07:15,280
suggests, is that it steps into the

179
00:07:12,479 --> 00:07:17,520
middle of all these trades, right? And

180
00:07:15,280 --> 00:07:20,720
so instead of A facing facing B and A

181
00:07:17,520 --> 00:07:22,400
facing C, A just faces the CCP, right?

182
00:07:20,720 --> 00:07:25,599
And so does B and so does C and so does

183
00:07:22,400 --> 00:07:26,720
D. Um just by doing that you haven't

184
00:07:25,599 --> 00:07:28,560
really achieved much. You've just

185
00:07:26,720 --> 00:07:33,280
changed your counterparty risk from

186
00:07:28,560 --> 00:07:36,960
being uh from being versus uh uh B and C

187
00:07:33,280 --> 00:07:40,400
to versus the CCP. But once the thing is

188
00:07:36,960 --> 00:07:42,319
in the CCP um you've got both the 125

189
00:07:40,400 --> 00:07:44,000
and the 100 and you can net those two

190
00:07:42,319 --> 00:07:45,759
positions together, right? And so you

191
00:07:44,000 --> 00:07:48,479
can net that down and say, well now

192
00:07:45,759 --> 00:07:51,520
instead of having 100 plus 125, I've

193
00:07:48,479 --> 00:07:53,039
only got 25, right? As my as my risk,

194
00:07:51,520 --> 00:07:55,039
right? And the same story for all the

195
00:07:53,039 --> 00:07:56,560
others, right? So in the case of B,

196
00:07:55,039 --> 00:07:58,800
right, when it had exactly equal and

197
00:07:56,560 --> 00:08:01,360
offsetting positions, B's ended up with

198
00:07:58,800 --> 00:08:03,360
no counterparty risk at all. So B's in a

199
00:08:01,360 --> 00:08:05,360
very very happy situation and everyone

200
00:08:03,360 --> 00:08:07,840
else is slightly happier than they were

201
00:08:05,360 --> 00:08:11,680
before. Um there are other advantages of

202
00:08:07,840 --> 00:08:14,080
CCPs. Um which um I'm not really going

203
00:08:11,680 --> 00:08:16,319
to talk about too much, but the thing to

204
00:08:14,080 --> 00:08:19,520
know is that some derivatives are

205
00:08:16,319 --> 00:08:21,599
mandated to clear at CCP. So interest

206
00:08:19,520 --> 00:08:24,080
rate swaps pretty much if you have a

207
00:08:21,599 --> 00:08:25,919
standard vanilla interest rate swap, you

208
00:08:24,080 --> 00:08:28,720
have to do this, right? You don't get a

209
00:08:25,919 --> 00:08:30,319
choice. Um but more exotic trades like

210
00:08:28,720 --> 00:08:34,560
say an interest rate swap or something

211
00:08:30,319 --> 00:08:37,360
sorry an interest rate swapion. Um they

212
00:08:34,560 --> 00:08:39,760
are not eligible to be cleared at a CCP.

213
00:08:37,360 --> 00:08:42,080
So some are some are not. So what you

214
00:08:39,760 --> 00:08:43,680
end up with is a portfolio with some

215
00:08:42,080 --> 00:08:46,160
bilateral trades versus a bunch of

216
00:08:43,680 --> 00:08:48,640
different counterparties and some trades

217
00:08:46,160 --> 00:08:53,120
at the CCP. Right? So almost everybody

218
00:08:48,640 --> 00:08:55,519
will end up with a mixture uh of stuff.

219
00:08:53,120 --> 00:08:59,040
Okay.

220
00:08:55,519 --> 00:09:01,600
Um so now we're going to talk about uh

221
00:08:59,040 --> 00:09:03,279
quantitative risk risk measures, right?

222
00:09:01,600 --> 00:09:06,640
So what you want from a risk measure or

223
00:09:03,279 --> 00:09:09,040
any general risk measure. Um it should

224
00:09:06,640 --> 00:09:10,800
quantify somewhat the size of the total

225
00:09:09,040 --> 00:09:13,040
risk or the size of the total impact.

226
00:09:10,800 --> 00:09:15,360
How much money could you possibly lose?

227
00:09:13,040 --> 00:09:19,040
and it should also quantify the

228
00:09:15,360 --> 00:09:20,800
probability of uh

229
00:09:19,040 --> 00:09:22,320
of losing that amount. Right? So there's

230
00:09:20,800 --> 00:09:26,480
two aspects to it, the size and the

231
00:09:22,320 --> 00:09:29,200
probability. Um so in 1999

232
00:09:26,480 --> 00:09:32,000
um there's a paper by Artsner um there's

233
00:09:29,200 --> 00:09:37,040
a reference in the at the back um kind

234
00:09:32,000 --> 00:09:38,800
of came up with these um properties of a

235
00:09:37,040 --> 00:09:41,440
risk function which are sort of nice

236
00:09:38,800 --> 00:09:43,680
properties right which are known as as a

237
00:09:41,440 --> 00:09:46,959
coherent risk function if it satisfies

238
00:09:43,680 --> 00:09:50,080
those uh five five properties right

239
00:09:46,959 --> 00:09:53,040
mostly they say things like um the

240
00:09:50,080 --> 00:09:56,399
function behaves kind of normally right

241
00:09:53,040 --> 00:09:58,560
Um we'll come back. So the important one

242
00:09:56,399 --> 00:10:02,399
is subadditivity,

243
00:09:58,560 --> 00:10:05,279
right? Uh anyone heard of subadditivity

244
00:10:02,399 --> 00:10:08,880
as a thing? So basically what that says

245
00:10:05,279 --> 00:10:10,640
is if I have two portfolios X1 and X2

246
00:10:08,880 --> 00:10:12,720
and I've got some risk on X1 and some

247
00:10:10,640 --> 00:10:14,480
risk on X2 and then I bash those two

248
00:10:12,720 --> 00:10:16,880
portfolios together, right? And now I've

249
00:10:14,480 --> 00:10:18,800
got a combined portfolio. the risk on my

250
00:10:16,880 --> 00:10:21,760
combined portfolio according to my risk

251
00:10:18,800 --> 00:10:23,519
measure ought to be less than or equal

252
00:10:21,760 --> 00:10:25,360
to the sum of the risk on the two

253
00:10:23,519 --> 00:10:27,279
portfolios I had in the first place

254
00:10:25,360 --> 00:10:28,720
right which seems kind of sensible if I

255
00:10:27,279 --> 00:10:30,320
put two if I put some stuff here and

256
00:10:28,720 --> 00:10:32,560
some stuff here and put it together it

257
00:10:30,320 --> 00:10:35,120
seems unlikely that I've manufactured

258
00:10:32,560 --> 00:10:36,880
some risk out of doing this but

259
00:10:35,120 --> 00:10:38,560
conversely it seems highly plausible

260
00:10:36,880 --> 00:10:40,320
that there might be some diversification

261
00:10:38,560 --> 00:10:42,480
of putting these two things together and

262
00:10:40,320 --> 00:10:44,959
so my overall risk might well be smaller

263
00:10:42,480 --> 00:10:49,279
it seems a very plausible and reasonable

264
00:10:44,959 --> 00:10:53,600
uh property to um ask for from a risk

265
00:10:49,279 --> 00:10:55,760
from a risk measure. Okay.

266
00:10:53,600 --> 00:10:58,160
Um so we're going to talk about two risk

267
00:10:55,760 --> 00:10:59,839
measures in particular, right? Which are

268
00:10:58,160 --> 00:11:01,760
probably the two most common ones for

269
00:10:59,839 --> 00:11:04,320
looking at a whole portfolio. One is

270
00:11:01,760 --> 00:11:06,640
value at risk, which um I probably will

271
00:11:04,320 --> 00:11:08,800
keep referring to as VAR. Um and the

272
00:11:06,640 --> 00:11:11,519
other is expected shortfall, right? So

273
00:11:08,800 --> 00:11:16,000
value at risk right is this this amount

274
00:11:11,519 --> 00:11:18,320
here says if I've got it say is um

275
00:11:16,000 --> 00:11:21,279
what is the maximum for a given

276
00:11:18,320 --> 00:11:25,120
confidence level what is the maximum

277
00:11:21,279 --> 00:11:27,040
amount that I can say that I will lose

278
00:11:25,120 --> 00:11:29,440
more than that amount right so for

279
00:11:27,040 --> 00:11:33,760
example

280
00:11:29,440 --> 00:11:37,040
um can I be 99% certain that I won't

281
00:11:33,760 --> 00:11:38,720
lose more than $10 million over say the

282
00:11:37,040 --> 00:11:41,440
next 10 days Right. So I have a

283
00:11:38,720 --> 00:11:43,200
confidence level here is called uh beta.

284
00:11:41,440 --> 00:11:47,760
Um there's a time horizon which we'll

285
00:11:43,200 --> 00:11:51,839
talk about uh in a sec. And the VA is um

286
00:11:47,760 --> 00:11:53,920
that that how much money can I be 99% or

287
00:11:51,839 --> 00:11:56,959
beta percent confident that I won't lose

288
00:11:53,920 --> 00:11:59,839
more than this amount. Okay.

289
00:11:56,959 --> 00:12:02,240
The expected shortfall says conditional

290
00:11:59,839 --> 00:12:04,000
that I've exceeded that amount of that

291
00:12:02,240 --> 00:12:07,279
amount of loss. Right. So given I'm in

292
00:12:04,000 --> 00:12:11,200
the the 1% tail, right? If if if bet is

293
00:12:07,279 --> 00:12:14,000
99% or the 5% tail if beat is 95% if I'm

294
00:12:11,200 --> 00:12:17,040
in that tail right what is my expected

295
00:12:14,000 --> 00:12:18,639
loss given that I've exceeded VA right

296
00:12:17,040 --> 00:12:21,040
so that's what expected expected

297
00:12:18,639 --> 00:12:22,480
shortfall is right so hopefully it's

298
00:12:21,040 --> 00:12:25,920
indicated on here that this is the

299
00:12:22,480 --> 00:12:28,959
percentage this dark area here is um one

300
00:12:25,920 --> 00:12:32,320
minus beta so this is say 1% or 5% right

301
00:12:28,959 --> 00:12:35,519
the var is the biggest amount before I

302
00:12:32,320 --> 00:12:37,760
get into the the tail right and the

303
00:12:35,519 --> 00:12:42,000
Expected shortfall is the average value

304
00:12:37,760 --> 00:12:43,279
of that tail. Yeah. Uh clearly the

305
00:12:42,000 --> 00:12:44,639
expected shortfall should be bigger than

306
00:12:43,279 --> 00:12:47,360
the VAR, right? Hopefully that's

307
00:12:44,639 --> 00:12:50,160
obvious, right? Uh for the same for the

308
00:12:47,360 --> 00:12:51,680
same confidence uh level.

309
00:12:50,160 --> 00:12:54,079
Um

310
00:12:51,680 --> 00:12:56,720
got that.

311
00:12:54,079 --> 00:13:00,000
Um so VAR was kind of popularized by JP

312
00:12:56,720 --> 00:13:01,680
Morgan and about the 1990s um something

313
00:13:00,000 --> 00:13:04,160
like that. expected shortfall came

314
00:13:01,680 --> 00:13:06,000
around in about 2000 and both of them

315
00:13:04,160 --> 00:13:07,760
are heavily used by regulators and lots

316
00:13:06,000 --> 00:13:11,519
and lots of kind of counterparty risk

317
00:13:07,760 --> 00:13:13,760
measures uh today. Um,

318
00:13:11,519 --> 00:13:16,560
var is probably the most well-known one,

319
00:13:13,760 --> 00:13:19,120
right? And most common. Um, it's got a

320
00:13:16,560 --> 00:13:21,120
couple of problems, right? The first

321
00:13:19,120 --> 00:13:23,760
problem is if you have these kind of

322
00:13:21,120 --> 00:13:26,000
weird sort of fat tail probabilities,

323
00:13:23,760 --> 00:13:28,560
right? So, you've got two probability

324
00:13:26,000 --> 00:13:30,639
distributions, red and blue, right? Um,

325
00:13:28,560 --> 00:13:32,480
the blue has this weird fat tail bit

326
00:13:30,639 --> 00:13:35,120
over here, right? And we'll just say,

327
00:13:32,480 --> 00:13:37,040
well, the area under the blue bit and

328
00:13:35,120 --> 00:13:39,519
the red bit is the same. So both these

329
00:13:37,040 --> 00:13:42,880
distributions have the same var right

330
00:13:39,519 --> 00:13:44,160
because the area up to here right assume

331
00:13:42,880 --> 00:13:47,040
there's a little bit of blue here the

332
00:13:44,160 --> 00:13:48,399
area up to here uh is the same as the

333
00:13:47,040 --> 00:13:50,880
area under that so both these

334
00:13:48,399 --> 00:13:53,040
distributions have the same var right

335
00:13:50,880 --> 00:13:55,680
but clearly the blue one has a much

336
00:13:53,040 --> 00:13:58,959
bigger probability of doing some fairly

337
00:13:55,680 --> 00:14:00,959
horrific loss right and also hopefully

338
00:13:58,959 --> 00:14:02,800
clearly the blue one would have a much

339
00:14:00,959 --> 00:14:04,560
bigger expected shortfall than the red

340
00:14:02,800 --> 00:14:06,560
one because the average of the blue one

341
00:14:04,560 --> 00:14:09,279
is about here the average the red ones

342
00:14:06,560 --> 00:14:10,720
about here, right? So that var doesn't

343
00:14:09,279 --> 00:14:13,120
distinguish between those two different

344
00:14:10,720 --> 00:14:15,279
cases, right? And you might say, well,

345
00:14:13,120 --> 00:14:17,519
this is ridiculous because nobody's

346
00:14:15,279 --> 00:14:19,440
going to have a in real life that kind

347
00:14:17,519 --> 00:14:22,639
of distribution can't possibly exist.

348
00:14:19,440 --> 00:14:25,120
But that is not completely ridiculous uh

349
00:14:22,639 --> 00:14:28,480
distribution. Um it's not totally

350
00:14:25,120 --> 00:14:29,839
uncommon trading policy to have to sell

351
00:14:28,480 --> 00:14:31,760
a whole bunch of out ofthe- money

352
00:14:29,839 --> 00:14:33,839
options. And if you sell a bunch of out

353
00:14:31,760 --> 00:14:34,880
of the money options, what most of the

354
00:14:33,839 --> 00:14:36,399
time going to happen is you're going to

355
00:14:34,880 --> 00:14:39,040
take a small profit from the sale of

356
00:14:36,399 --> 00:14:40,560
those options. And most of the time they

357
00:14:39,040 --> 00:14:42,079
will expire still out of the money. They

358
00:14:40,560 --> 00:14:44,880
won't get exercised and you're going to

359
00:14:42,079 --> 00:14:47,279
take a profit. But some of the time the

360
00:14:44,880 --> 00:14:49,440
market will move enough and if it moves

361
00:14:47,279 --> 00:14:51,120
enough they'll get exercised and you're

362
00:14:49,440 --> 00:14:53,279
going to lose a lot of money on those

363
00:14:51,120 --> 00:14:54,880
options. So that even though I did

364
00:14:53,279 --> 00:14:56,480
contrive that for the purposes of this

365
00:14:54,880 --> 00:14:58,959
lecture, right, that kind of

366
00:14:56,480 --> 00:15:01,680
distribution is not as ridiculous as you

367
00:14:58,959 --> 00:15:03,920
might think.

368
00:15:01,680 --> 00:15:06,720
Okay, so that's the first problem. The

369
00:15:03,920 --> 00:15:09,279
second kind of related problem um is

370
00:15:06,720 --> 00:15:12,240
that value at risk is not uh sub

371
00:15:09,279 --> 00:15:15,440
additive. Right? So this again a little

372
00:15:12,240 --> 00:15:19,040
bit of a contrived example um to show

373
00:15:15,440 --> 00:15:21,440
that um if you take say the 95% VAR uh I

374
00:15:19,040 --> 00:15:23,199
take two two portfolios A and B with

375
00:15:21,440 --> 00:15:26,000
those kind of uh probability of

376
00:15:23,199 --> 00:15:28,560
happening right um A and B by themselves

377
00:15:26,000 --> 00:15:30,399
that the VAR is zero right because

378
00:15:28,560 --> 00:15:33,120
there's a 96% chance I'm going to lose

379
00:15:30,399 --> 00:15:36,000
nothing right so 95% the VAR is going to

380
00:15:33,120 --> 00:15:37,680
be zero um the expected shortfall of

381
00:15:36,000 --> 00:15:41,760
those things is given I'm in that last

382
00:15:37,680 --> 00:15:44,079
5% tail right um 1% % of the five I'm

383
00:15:41,760 --> 00:15:46,160
going to lose nothing and 4% of the five

384
00:15:44,079 --> 00:15:47,920
uh I'm going to lose 100 so I get to 80

385
00:15:46,160 --> 00:15:49,839
right and if you do the maths and just

386
00:15:47,920 --> 00:15:52,160
add the two things up um and you do the

387
00:15:49,839 --> 00:15:54,000
a plus b you can discover that the var

388
00:15:52,160 --> 00:15:57,519
of the combined portfolio is 100 and the

389
00:15:54,000 --> 00:15:59,680
expected shortfall is 103 right um so

390
00:15:57,519 --> 00:16:04,480
that is a kind of example that shows

391
00:15:59,680 --> 00:16:06,160
that var is not subadditive expected

392
00:16:04,480 --> 00:16:08,160
short obviously this is not proving that

393
00:16:06,160 --> 00:16:11,120
expected shortfall is subadditive it is

394
00:16:08,160 --> 00:16:12,959
in this case um it's quite hard to isish

395
00:16:11,120 --> 00:16:16,480
to prove that expectant shortfall is

396
00:16:12,959 --> 00:16:18,000
subadditive. It is and uh I put one of

397
00:16:16,480 --> 00:16:19,920
the things at the end is is seven

398
00:16:18,000 --> 00:16:22,240
different proofs that it is subadditive.

399
00:16:19,920 --> 00:16:26,000
So you can pick pick your favorite one

400
00:16:22,240 --> 00:16:28,079
from the the the thing at the end. Um I

401
00:16:26,000 --> 00:16:30,720
also put an example at the end. So even

402
00:16:28,079 --> 00:16:34,720
though this one is a very contrived

403
00:16:30,720 --> 00:16:37,440
example, right? So in real life most

404
00:16:34,720 --> 00:16:39,920
things are kind of normal or normallike,

405
00:16:37,440 --> 00:16:43,040
right? And in that case, var is

406
00:16:39,920 --> 00:16:45,120
subadditive. Right? So in real life

407
00:16:43,040 --> 00:16:47,279
situations, this is not as much of a

408
00:16:45,120 --> 00:16:48,800
problem as you might think. And there's

409
00:16:47,279 --> 00:16:51,680
a paper at the end that talks a little

410
00:16:48,800 --> 00:16:53,519
also a lot about that and says actually

411
00:16:51,680 --> 00:16:55,120
lots of people criticize var because of

412
00:16:53,519 --> 00:16:59,279
they come up with these kind of crazy

413
00:16:55,120 --> 00:17:01,600
examples. But it's not too bad for our

414
00:16:59,279 --> 00:17:04,400
purposes given we kind of want to go on

415
00:17:01,600 --> 00:17:08,160
to optimizing stuff. It is critically

416
00:17:04,400 --> 00:17:09,839
bad, right? Because subadd additivity is

417
00:17:08,160 --> 00:17:11,679
we'll come back to this again in a sec

418
00:17:09,839 --> 00:17:14,799
is basically the same thing as

419
00:17:11,679 --> 00:17:17,039
convexity. So not being subadditive

420
00:17:14,799 --> 00:17:20,240
means var is not really a convex

421
00:17:17,039 --> 00:17:22,959
function in general and convex functions

422
00:17:20,240 --> 00:17:26,079
are way way way easier to optimize than

423
00:17:22,959 --> 00:17:27,760
non-convex functions. So even though

424
00:17:26,079 --> 00:17:30,960
it's not a problem if you just want to

425
00:17:27,760 --> 00:17:33,360
know var, it is a massive problem if you

426
00:17:30,960 --> 00:17:36,240
want to optimize one of these things,

427
00:17:33,360 --> 00:17:39,120
right? We'll come back to this uh again

428
00:17:36,240 --> 00:17:41,679
uh in a little bit.

429
00:17:39,120 --> 00:17:43,039
Um I just want to quickly point out that

430
00:17:41,679 --> 00:17:45,360
there's lots and lots of other risk

431
00:17:43,039 --> 00:17:47,360
measures you can possibly choose here.

432
00:17:45,360 --> 00:17:49,520
Uh v and expected shortfall just happen

433
00:17:47,360 --> 00:17:51,840
to be the two kind of common ones. um

434
00:17:49,520 --> 00:17:54,080
you can kind of characterize uh a risk

435
00:17:51,840 --> 00:17:56,240
measure by sort of how much weight uh it

436
00:17:54,080 --> 00:17:57,760
puts on a particular percentile, right?

437
00:17:56,240 --> 00:17:59,919
So VA is putting all of its weight on

438
00:17:57,760 --> 00:18:01,679
the beta percentile. Expected shortfall

439
00:17:59,919 --> 00:18:04,080
puts zero on everything less than beta

440
00:18:01,679 --> 00:18:05,679
and averages out everything above beta,

441
00:18:04,080 --> 00:18:08,160
right? But you could say, well, both of

442
00:18:05,679 --> 00:18:10,400
those h you could you can make some

443
00:18:08,160 --> 00:18:12,000
criticisms of them. You could say, well,

444
00:18:10,400 --> 00:18:13,120
I should put a little bit of weight on

445
00:18:12,000 --> 00:18:14,880
something that's a bit less than the

446
00:18:13,120 --> 00:18:18,000
beta percentage and I should wait the

447
00:18:14,880 --> 00:18:19,919
the the the really really extreme tail

448
00:18:18,000 --> 00:18:22,160
losses. I should weight them more than

449
00:18:19,919 --> 00:18:24,640
the than the just beyond the tail

450
00:18:22,160 --> 00:18:26,960
losses. Right? So you can imagine having

451
00:18:24,640 --> 00:18:28,240
these sort of exponential spectral risk

452
00:18:26,960 --> 00:18:30,320
functions that have these kind of

453
00:18:28,240 --> 00:18:33,760
functions which do exactly those things

454
00:18:30,320 --> 00:18:36,720
that they put an awful lot of weight on

455
00:18:33,760 --> 00:18:40,720
uh the the really bad losses at the 99

456
00:18:36,720 --> 00:18:43,520
and 99.9% things and it sort of scales

457
00:18:40,720 --> 00:18:44,720
off going down, right? Um it's just to

458
00:18:43,520 --> 00:18:48,320
point out there's there's a there's a

459
00:18:44,720 --> 00:18:50,240
few different choices you can make here.

460
00:18:48,320 --> 00:18:53,360
Okay.

461
00:18:50,240 --> 00:18:54,799
Um, so both VAR and expected shortfall,

462
00:18:53,360 --> 00:18:56,559
they've basically got two parameters,

463
00:18:54,799 --> 00:19:00,960
right? They've got the confidence level

464
00:18:56,559 --> 00:19:04,400
and they've got the time horizon. Um, so

465
00:19:00,960 --> 00:19:07,840
um we'll talk a bit about the uh the the

466
00:19:04,400 --> 00:19:09,440
time horizon, right? So that means I

467
00:19:07,840 --> 00:19:11,919
want to make sure that I'm going to lose

468
00:19:09,440 --> 00:19:14,160
less than this amount of money over one

469
00:19:11,919 --> 00:19:15,840
day, 5 days, 10 days, right? What that's

470
00:19:14,160 --> 00:19:17,679
the time horizon. how how long have I

471
00:19:15,840 --> 00:19:20,160
got to avoid losing this amount of

472
00:19:17,679 --> 00:19:23,280
money, right? If you were to make the

473
00:19:20,160 --> 00:19:26,080
assumption that um the change in the

474
00:19:23,280 --> 00:19:28,880
portfolio, so this uh this delta p is a

475
00:19:26,080 --> 00:19:30,960
normal distribution, right? Then var and

476
00:19:28,880 --> 00:19:33,520
expected shortfall would have these two

477
00:19:30,960 --> 00:19:37,679
uh these these two formats here, right?

478
00:19:33,520 --> 00:19:41,039
So um they would also be normal. um or

479
00:19:37,679 --> 00:19:42,799
uh and if you assume that uh people make

480
00:19:41,039 --> 00:19:46,559
these kind of assumptions and I think

481
00:19:42,799 --> 00:19:48,559
that the uh the the mean change right on

482
00:19:46,559 --> 00:19:51,679
a daily basis is zero which is not a

483
00:19:48,559 --> 00:19:53,440
crazy kind of uh uh assumption then both

484
00:19:51,679 --> 00:19:56,160
VAR and expected shortfall would be

485
00:19:53,440 --> 00:19:58,000
proportional to the standard deviation

486
00:19:56,160 --> 00:20:00,799
right uh with these things they would be

487
00:19:58,000 --> 00:20:03,280
normal and if you did that and you

488
00:20:00,799 --> 00:20:06,720
assumed that all the daily changes were

489
00:20:03,280 --> 00:20:08,160
independently uh they were all kind

490
00:20:06,720 --> 00:20:09,679
independent identical normal

491
00:20:08,160 --> 00:20:11,120
distributions. So you could add them all

492
00:20:09,679 --> 00:20:12,880
up. Then you would discover that the

493
00:20:11,120 --> 00:20:14,720
t-day var and the t-day expected

494
00:20:12,880 --> 00:20:17,520
shortfall is proportional to the square

495
00:20:14,720 --> 00:20:20,000
root uh of the one day var which is the

496
00:20:17,520 --> 00:20:24,320
normal approximation that uh that people

497
00:20:20,000 --> 00:20:28,799
make uh with those things. In reality it

498
00:20:24,320 --> 00:20:30,640
seems that the uh the losses the changes

499
00:20:28,799 --> 00:20:33,679
that you have on a typical portfolio or

500
00:20:30,640 --> 00:20:35,440
typical market data are not independent.

501
00:20:33,679 --> 00:20:36,880
Right? If you lose a lot of money one

502
00:20:35,440 --> 00:20:38,400
day, there's a reasonable chance you

503
00:20:36,880 --> 00:20:40,000
might lose some money on the the market

504
00:20:38,400 --> 00:20:41,120
might go down on the second day. So

505
00:20:40,000 --> 00:20:43,039
there's a thing called kind of

506
00:20:41,120 --> 00:20:45,440
autocorrelation, which is basically the

507
00:20:43,039 --> 00:20:48,960
correlation of a time series with itself

508
00:20:45,440 --> 00:20:50,880
shifted by one day, right? And so you

509
00:20:48,960 --> 00:20:52,400
can which is what this uh thing here.

510
00:20:50,880 --> 00:20:54,000
And if you assume that that

511
00:20:52,400 --> 00:20:57,520
autocorrelation

512
00:20:54,000 --> 00:21:01,760
row is is some uh number then it would

513
00:20:57,520 --> 00:21:04,080
modify uh the t-day var accord well for

514
00:21:01,760 --> 00:21:06,159
two days by by this formula right which

515
00:21:04,080 --> 00:21:07,520
I put in this in this table. So the top

516
00:21:06,159 --> 00:21:09,679
row is assuming that there's no

517
00:21:07,520 --> 00:21:11,679
autocorrelation, right? So that's one,

518
00:21:09,679 --> 00:21:14,640
roo<unk>2, roo<unk> 5, root 10 and so on

519
00:21:11,679 --> 00:21:16,640
is the top row. Um and then as you

520
00:21:14,640 --> 00:21:20,640
increase the autocorrelation,

521
00:21:16,640 --> 00:21:22,720
um the t-day var right as a function of

522
00:21:20,640 --> 00:21:24,720
the one day var gets bigger and bigger,

523
00:21:22,720 --> 00:21:26,640
right? So I did some I'll show you some

524
00:21:24,720 --> 00:21:29,120
market data in a sec, right? So I took

525
00:21:26,640 --> 00:21:32,320
one a set of observations from the euro

526
00:21:29,120 --> 00:21:35,039
stocks uh stock index, right? And that

527
00:21:32,320 --> 00:21:37,360
suggests that the row right the the

528
00:21:35,039 --> 00:21:39,360
autocorrelation is about 0.1. I did some

529
00:21:37,360 --> 00:21:44,000
other indices and they were all between

530
00:21:39,360 --> 00:21:48,400
0.05 and one 0.15. Um so now that so 0.1

531
00:21:44,000 --> 00:21:51,360
is kind of reasonable and generally um

532
00:21:48,400 --> 00:21:53,360
people take a 10day VAR thing as a

533
00:21:51,360 --> 00:21:57,440
normal thing. So you'd be looking at

534
00:21:53,360 --> 00:22:00,720
about this um this number here right um

535
00:21:57,440 --> 00:22:04,159
this uh 3.46. It's about that means to

536
00:22:00,720 --> 00:22:07,200
say that the standard approximation of

537
00:22:04,159 --> 00:22:09,679
using the square root of the of saying

538
00:22:07,200 --> 00:22:11,760
the square root of the of of of the one

539
00:22:09,679 --> 00:22:14,320
day var uh sorry the square root of of

540
00:22:11,760 --> 00:22:16,799
of t times the one day var is probably

541
00:22:14,320 --> 00:22:19,440
going to underestimate the actual t-day

542
00:22:16,799 --> 00:22:22,320
var by about 10%. Right? Because the

543
00:22:19,440 --> 00:22:25,440
3.46 divided by 3.16.

544
00:22:22,320 --> 00:22:27,520
Okay. Um but nevertheless almost

545
00:22:25,440 --> 00:22:32,320
everybody just says that the t-day var

546
00:22:27,520 --> 00:22:35,200
is the one day var times root t. Uh

547
00:22:32,320 --> 00:22:38,559
okay. Um so this is where I got the data

548
00:22:35,200 --> 00:22:42,240
from. So uh I picked uh four four stock

549
00:22:38,559 --> 00:22:44,799
indexes uh IBEX DAX and Euro stocks.

550
00:22:42,240 --> 00:22:48,159
That's um if you don't know Spanish,

551
00:22:44,799 --> 00:22:52,400
French, German and a pan European uh

552
00:22:48,159 --> 00:22:54,159
stock stock index. Um so from 2006 to

553
00:22:52,400 --> 00:22:56,880
2024 you can see there's a couple of

554
00:22:54,159 --> 00:22:59,760
periods of uh stress in here. one in

555
00:22:56,880 --> 00:23:02,159
sort of 2008 kind of time time frame

556
00:22:59,760 --> 00:23:04,159
round about kind of here um which was

557
00:23:02,159 --> 00:23:08,320
the global financial crash and one in

558
00:23:04,159 --> 00:23:10,400
about 2020 which was uh COVID right and

559
00:23:08,320 --> 00:23:12,720
some degree of calmness in in between

560
00:23:10,400 --> 00:23:15,120
those in between those two periods right

561
00:23:12,720 --> 00:23:20,640
clearly some correlation between these

562
00:23:15,120 --> 00:23:21,840
uh um things um that's there on a

563
00:23:20,640 --> 00:23:23,440
practical note there's a couple of

564
00:23:21,840 --> 00:23:26,080
things worth pointing out I picked these

565
00:23:23,440 --> 00:23:27,919
stock indic indices because they're all

566
00:23:26,080 --> 00:23:30,159
European, which means I don't need to

567
00:23:27,919 --> 00:23:33,280
worry about FX rates when I'm playing

568
00:23:30,159 --> 00:23:34,480
with these things. Um, but because but

569
00:23:33,280 --> 00:23:36,480
even though they're European, they're

570
00:23:34,480 --> 00:23:39,280
from different countries. And the

571
00:23:36,480 --> 00:23:41,840
different countries have different um

572
00:23:39,280 --> 00:23:43,200
holidays. And so you have to decide what

573
00:23:41,840 --> 00:23:45,360
I'm going to do, what you're going to do

574
00:23:43,200 --> 00:23:48,000
when one of these indexes is is on

575
00:23:45,360 --> 00:23:50,000
holiday and not and not and not trading.

576
00:23:48,000 --> 00:23:51,280
Um, what I did here was said if all of

577
00:23:50,000 --> 00:23:54,080
them were on holiday, I'm ignoring the

578
00:23:51,280 --> 00:23:55,520
day completely. And if one of them was

579
00:23:54,080 --> 00:23:57,200
not on holiday, but the rest were, I

580
00:23:55,520 --> 00:23:59,039
just fill I just fill forward. And so

581
00:23:57,200 --> 00:24:01,280
you'd see a daily change of zero on

582
00:23:59,039 --> 00:24:03,360
those. The might not necessarily be the

583
00:24:01,280 --> 00:24:04,799
most sensible thing to do. Doesn't

584
00:24:03,360 --> 00:24:08,400
really make that much difference. But

585
00:24:04,799 --> 00:24:11,120
the reason I mention it is because if

586
00:24:08,400 --> 00:24:13,360
you work in this kind of uh industry and

587
00:24:11,120 --> 00:24:15,200
stuff like that, you end up spending a

588
00:24:13,360 --> 00:24:18,240
surprising and disproportionate amount

589
00:24:15,200 --> 00:24:20,799
of time dealing with both FX and holiday

590
00:24:18,240 --> 00:24:22,799
calendars, right? You probably don't

591
00:24:20,799 --> 00:24:25,120
expect to be doing this, but holiday

592
00:24:22,799 --> 00:24:26,720
calendars spend you spend a lot of your

593
00:24:25,120 --> 00:24:28,799
time trying to work out what are you

594
00:24:26,720 --> 00:24:30,559
going to do with these kind of things.

595
00:24:28,799 --> 00:24:32,640
Okay.

596
00:24:30,559 --> 00:24:34,080
Um

597
00:24:32,640 --> 00:24:36,480
so there's a couple of different ways

598
00:24:34,080 --> 00:24:41,360
you can estimate VAR. Um one is

599
00:24:36,480 --> 00:24:43,360
historical simulation and uh one is um

600
00:24:41,360 --> 00:24:46,080
doing a model building. We'll have a

601
00:24:43,360 --> 00:24:47,760
quick look at both of them. Um so the

602
00:24:46,080 --> 00:24:49,200
historical simulation basically we're

603
00:24:47,760 --> 00:24:51,360
going to go back and look at these look

604
00:24:49,200 --> 00:24:53,520
at the time series. We'll look at the

605
00:24:51,360 --> 00:24:56,400
we'll look at the value of each of these

606
00:24:53,520 --> 00:24:59,440
indices the CAC DAX and Euro stocks on

607
00:24:56,400 --> 00:25:01,039
each day right um and we'll come up with

608
00:24:59,440 --> 00:25:02,640
a portfolio. So I just made up some

609
00:25:01,039 --> 00:25:05,039
portfolio say I'm going to have 3,000

610
00:25:02,640 --> 00:25:07,039
units of of CAC 4,000 of DAX and so on

611
00:25:05,039 --> 00:25:10,559
and so on. Um and we'll call that the

612
00:25:07,039 --> 00:25:14,240
portfolio weight. And so now um I can I

613
00:25:10,559 --> 00:25:17,200
can figure out that on the day the the

614
00:25:14,240 --> 00:25:19,120
change in value on on day I right is

615
00:25:17,200 --> 00:25:22,000
going to be the relative change in the

616
00:25:19,120 --> 00:25:23,600
underlying market index right so it's

617
00:25:22,000 --> 00:25:25,440
for example the second row minus the

618
00:25:23,600 --> 00:25:27,760
first row for the first day and so on

619
00:25:25,440 --> 00:25:29,440
multiply by the weight for that that uh

620
00:25:27,760 --> 00:25:32,400
that index then just sum it up over all

621
00:25:29,440 --> 00:25:35,919
the indices right and that will give me

622
00:25:32,400 --> 00:25:37,600
um the change on the i day okay

623
00:25:35,919 --> 00:25:40,400
um

624
00:25:37,600 --> 00:25:42,640
And so then I can take the distribution

625
00:25:40,400 --> 00:25:45,760
of those things and I will get something

626
00:25:42,640 --> 00:25:49,360
that looks like that. Hopefully that's

627
00:25:45,760 --> 00:25:51,520
big enough. Um so one thing to add here

628
00:25:49,360 --> 00:25:54,960
is that when you're doing that when

629
00:25:51,520 --> 00:25:57,200
you're looking at these um uh historical

630
00:25:54,960 --> 00:25:59,360
simulations, you have to decide over

631
00:25:57,200 --> 00:26:02,480
what period over what historical period

632
00:25:59,360 --> 00:26:04,720
am I going to look at. Right? And the

633
00:26:02,480 --> 00:26:06,640
main thing to notice here is that

634
00:26:04,720 --> 00:26:08,720
depending on what historical period you

635
00:26:06,640 --> 00:26:10,640
look at, it makes a massive difference

636
00:26:08,720 --> 00:26:14,159
to both the VAR and the expected

637
00:26:10,640 --> 00:26:16,640
shortfall. Um, so what normally happens

638
00:26:14,159 --> 00:26:20,080
if you normally talk about VAR, you talk

639
00:26:16,640 --> 00:26:21,600
about the most recent say two years. The

640
00:26:20,080 --> 00:26:24,559
these are all two-year periods by the

641
00:26:21,600 --> 00:26:27,039
way, right? So the top left 2022 to the

642
00:26:24,559 --> 00:26:29,279
end of 2023. Given my series went up to

643
00:26:27,039 --> 00:26:31,039
the end of 2023, this would what this

644
00:26:29,279 --> 00:26:33,440
this top left box would be what you

645
00:26:31,039 --> 00:26:35,919
would normally put in as as var, right?

646
00:26:33,440 --> 00:26:37,600
The most recent 500 days, basically

647
00:26:35,919 --> 00:26:40,400
assuming there's 250 days in a year,

648
00:26:37,600 --> 00:26:42,159
which is more or less true. Um, the ones

649
00:26:40,400 --> 00:26:43,760
on the right, they're from the two kind

650
00:26:42,159 --> 00:26:47,760
of stress periods, right? The global

651
00:26:43,760 --> 00:26:49,840
financial crisis and uh COVID. And as

652
00:26:47,760 --> 00:26:51,919
you might imagine, if you compute VAR

653
00:26:49,840 --> 00:26:53,919
based his if you compute VAR based off

654
00:26:51,919 --> 00:26:55,840
those two periods, you get a much much

655
00:26:53,919 --> 00:26:57,279
bigger number than you do of either of

656
00:26:55,840 --> 00:27:00,080
the kind of calm periods, the kind of

657
00:26:57,279 --> 00:27:02,240
most recent one 2022 or a period in

658
00:27:00,080 --> 00:27:05,200
between the global financial crisis and

659
00:27:02,240 --> 00:27:09,039
COVID 2015 to 2016

660
00:27:05,200 --> 00:27:10,640
uh with with that right. So that makes

661
00:27:09,039 --> 00:27:13,520
by far and away the biggest difference

662
00:27:10,640 --> 00:27:16,159
which which period you choose. Um and

663
00:27:13,520 --> 00:27:17,760
because of that um regulators have

664
00:27:16,159 --> 00:27:19,360
recently introduced the well not that

665
00:27:17,760 --> 00:27:22,000
recently introduced the concept of a

666
00:27:19,360 --> 00:27:24,000
thing called stress var. So in addition

667
00:27:22,000 --> 00:27:25,279
to taking the most recent two years,

668
00:27:24,000 --> 00:27:28,159
five years, 10 years, whatever you

669
00:27:25,279 --> 00:27:31,679
decide to choose, you also pick a fixed

670
00:27:28,159 --> 00:27:33,600
period known to be stressful, right? So

671
00:27:31,679 --> 00:27:35,919
people will pick either COVID or they

672
00:27:33,600 --> 00:27:37,919
will pick uh the global financial

673
00:27:35,919 --> 00:27:40,320
crisis, right? And then that's generally

674
00:27:37,919 --> 00:27:41,600
known as SVAR or or or stressed far,

675
00:27:40,320 --> 00:27:43,520
right? Because there's such a big

676
00:27:41,600 --> 00:27:46,559
variation in these in these in these

677
00:27:43,520 --> 00:27:49,520
terms uh that are that are that are

678
00:27:46,559 --> 00:27:51,600
there, right? And then just to kind of

679
00:27:49,520 --> 00:27:53,679
break it down in terms of what you

680
00:27:51,600 --> 00:27:55,600
actually did here, what what I actually

681
00:27:53,679 --> 00:27:57,440
did was I took all those changes, right?

682
00:27:55,600 --> 00:27:59,840
So there was 500 changes in each period

683
00:27:57,440 --> 00:28:01,440
more or less. Um I ordered them from the

684
00:27:59,840 --> 00:28:03,440
biggest change to the to from the

685
00:28:01,440 --> 00:28:05,679
biggest loss to the biggest gain. Um

686
00:28:03,440 --> 00:28:07,520
these things here and then the fifth

687
00:28:05,679 --> 00:28:10,559
worst one, that's the VAR for the for

688
00:28:07,520 --> 00:28:12,480
the for the 99% VAR. Uh because that's

689
00:28:10,559 --> 00:28:14,799
that's 1%. And the 12th worst one,

690
00:28:12,480 --> 00:28:16,240
that's the 97.5. So there's there's not

691
00:28:14,799 --> 00:28:17,600
it's not that complicated. you just

692
00:28:16,240 --> 00:28:19,120
ordered the thing. You take the fifth

693
00:28:17,600 --> 00:28:22,799
worst one, 12th worst one. That's what

694
00:28:19,120 --> 00:28:25,039
virus and expected shortfall. Um for the

695
00:28:22,799 --> 00:28:28,559
99% you take the average of the of the

696
00:28:25,039 --> 00:28:31,440
worst four, right? Um and for the 97.5

697
00:28:28,559 --> 00:28:34,080
you take the average of the uh worst 11.

698
00:28:31,440 --> 00:28:35,520
Um there is some debate about that,

699
00:28:34,080 --> 00:28:37,440
right? Some people claim you should take

700
00:28:35,520 --> 00:28:39,919
the average of the worst five including

701
00:28:37,440 --> 00:28:42,480
the 320 uh and the average of the worst

702
00:28:39,919 --> 00:28:44,960
12. Um I think standard market

703
00:28:42,480 --> 00:28:47,120
convention is to take the four. doesn't

704
00:28:44,960 --> 00:28:48,799
matter that much, right? But that that's

705
00:28:47,120 --> 00:28:52,320
all that's actually happening here,

706
00:28:48,799 --> 00:28:54,159
right? Uh to to to do these.

707
00:28:52,320 --> 00:28:56,559
Okay.

708
00:28:54,159 --> 00:29:00,240
All okay. So far,

709
00:28:56,559 --> 00:29:02,480
um to do the model building approach, um

710
00:29:00,240 --> 00:29:04,159
it's kind of similar, right? We just

711
00:29:02,480 --> 00:29:06,720
make the assumptions that everything is

712
00:29:04,159 --> 00:29:08,080
uh normally distributed. Um the daily

713
00:29:06,720 --> 00:29:13,279
changes are normally distributed with

714
00:29:08,080 --> 00:29:14,640
mean zero uh and a sigma i. um we assume

715
00:29:13,279 --> 00:29:16,720
that there's some kind of correlation

716
00:29:14,640 --> 00:29:18,880
between all the different indices and so

717
00:29:16,720 --> 00:29:22,240
you say well the sigma for the portfolio

718
00:29:18,880 --> 00:29:24,640
is going to be um uh this this this term

719
00:29:22,240 --> 00:29:27,440
here right um so there's a variance

720
00:29:24,640 --> 00:29:30,480
coariance matrix uh between the right

721
00:29:27,440 --> 00:29:32,159
that you that you get um and using the

722
00:29:30,480 --> 00:29:36,000
assumption that var and expected

723
00:29:32,159 --> 00:29:38,080
shortfall are uh proportional to the

724
00:29:36,000 --> 00:29:39,840
sigma again you get these two you get

725
00:29:38,080 --> 00:29:41,760
these two expressions so all you need to

726
00:29:39,840 --> 00:29:43,520
do for the model building approach is

727
00:29:41,760 --> 00:29:45,360
figure out what the uh variance

728
00:29:43,520 --> 00:29:47,760
covariance matrix is between these

729
00:29:45,360 --> 00:29:52,000
different uh elements which I computed

730
00:29:47,760 --> 00:29:56,320
here and I come up with a var and I get

731
00:29:52,000 --> 00:29:58,159
these two numbers 225 and uh 257 um the

732
00:29:56,320 --> 00:30:01,200
main thing to note about that is that

733
00:29:58,159 --> 00:30:04,240
it's significantly significantly less um

734
00:30:01,200 --> 00:30:06,480
than the historical VAR right so the 99

735
00:30:04,240 --> 00:30:11,600
that's this is computed for the 2022

736
00:30:06,480 --> 00:30:13,600
2023 period right so Um the historical

737
00:30:11,600 --> 00:30:18,799
VAR was those equivalent numbers were

738
00:30:13,600 --> 00:30:20,880
320 and 377, right? Um basically showing

739
00:30:18,799 --> 00:30:22,320
that these normal distributions, right?

740
00:30:20,880 --> 00:30:23,919
It's clearly not a normal distribution.

741
00:30:22,320 --> 00:30:28,320
There's a fatter tail in there than

742
00:30:23,919 --> 00:30:30,640
you'd expect. Um but you can say well

743
00:30:28,320 --> 00:30:33,360
you can work out is this an acceptable

744
00:30:30,640 --> 00:30:35,120
VAR model, yes or no. Right? So what you

745
00:30:33,360 --> 00:30:37,360
can say is

746
00:30:35,120 --> 00:30:41,120
given I've got something where I'm going

747
00:30:37,360 --> 00:30:44,559
to take 500 trials and I expect to see

748
00:30:41,120 --> 00:30:47,520
an I expect the VAR the the actual loss

749
00:30:44,559 --> 00:30:50,640
to have exceeded the VAR 1% of the time.

750
00:30:47,520 --> 00:30:53,039
That's the definition of VAR, right? And

751
00:30:50,640 --> 00:30:56,000
uh what is the probability that I'm

752
00:30:53,039 --> 00:30:57,440
going to see 12 or more? Uh so this

753
00:30:56,000 --> 00:31:01,360
there there's 12 violations by the way.

754
00:30:57,440 --> 00:31:04,000
So if I take this um 225 right and say

755
00:31:01,360 --> 00:31:05,919
how many times did it actually according

756
00:31:04,000 --> 00:31:08,720
to that period how many times was it

757
00:31:05,919 --> 00:31:11,279
actually the loss was bigger than 225 or

758
00:31:08,720 --> 00:31:14,320
there were 12 scenarios bigger than 225.

759
00:31:11,279 --> 00:31:17,039
So what is the probability that I would

760
00:31:14,320 --> 00:31:21,279
see 12 or more days out of a sample of

761
00:31:17,039 --> 00:31:23,200
500 that exceeded um the um that

762
00:31:21,279 --> 00:31:26,480
exceeded the VA right so that's comes

763
00:31:23,200 --> 00:31:29,600
from the binomial uh distribution which

764
00:31:26,480 --> 00:31:32,559
is that formula and you get 5.2%.

765
00:31:29,600 --> 00:31:35,760
And the general rule of thumb is that if

766
00:31:32,559 --> 00:31:40,000
the probability is 5% or more of getting

767
00:31:35,760 --> 00:31:42,080
that degree of that number of uh of of

768
00:31:40,000 --> 00:31:44,640
violations of the VAR, you say that the

769
00:31:42,080 --> 00:31:46,640
model's okay. And if the if there's the

770
00:31:44,640 --> 00:31:48,240
probability is less than 5%, you'd

771
00:31:46,640 --> 00:31:50,240
probably reject the model and say the VA

772
00:31:48,240 --> 00:31:52,000
is it's not a it's not a good model. So

773
00:31:50,240 --> 00:31:53,760
even though the VAR here is

774
00:31:52,000 --> 00:31:55,919
significantly lower than uh the

775
00:31:53,760 --> 00:31:58,880
historical simulation,

776
00:31:55,919 --> 00:32:03,039
um you would probably accept that as as

777
00:31:58,880 --> 00:32:05,200
an okay kind kind of kind of model. Um

778
00:32:03,039 --> 00:32:09,519
and the only other point I wanted to

779
00:32:05,200 --> 00:32:11,039
make on that is that what we've

780
00:32:09,519 --> 00:32:13,120
basically done there is a back testing

781
00:32:11,039 --> 00:32:14,559
of VAR, right? So we basically came up

782
00:32:13,120 --> 00:32:16,000
came up with a model and we said how

783
00:32:14,559 --> 00:32:18,480
good is that model, right? how many

784
00:32:16,000 --> 00:32:23,600
times uh based off some historical

785
00:32:18,480 --> 00:32:26,320
simulation was the VAR uh um exceeded

786
00:32:23,600 --> 00:32:29,919
right so it's really really easy to do

787
00:32:26,320 --> 00:32:32,480
back testing in VAR the main single main

788
00:32:29,919 --> 00:32:35,519
reason why people still use VAR over

789
00:32:32,480 --> 00:32:38,399
expected shortfall is because doing this

790
00:32:35,519 --> 00:32:40,159
for expected shortfall is quite tricky

791
00:32:38,399 --> 00:32:42,960
right it's not even clear what it means

792
00:32:40,159 --> 00:32:44,559
to do back testing of expected shortfall

793
00:32:42,960 --> 00:32:48,320
because

794
00:32:44,559 --> 00:32:49,440
I your the expected shortfall is is a

795
00:32:48,320 --> 00:32:51,360
function of the probability

796
00:32:49,440 --> 00:32:54,159
distribution. It's the mean of the tail.

797
00:32:51,360 --> 00:32:55,440
You can't really compare that with one

798
00:32:54,159 --> 00:32:57,600
sample that I've drawn from the

799
00:32:55,440 --> 00:33:00,799
distribution, right? It's like comparing

800
00:32:57,600 --> 00:33:04,000
apples with oranges. Um there's a whole

801
00:33:00,799 --> 00:33:06,720
bunch of debate around whether um back

802
00:33:04,000 --> 00:33:09,679
testing expected shortfall is flatout

803
00:33:06,720 --> 00:33:11,039
impossible, difficult um or or not. And

804
00:33:09,679 --> 00:33:14,720
there's a bunch of papers at the end

805
00:33:11,039 --> 00:33:16,559
kind of uh on on on this as as as well.

806
00:33:14,720 --> 00:33:19,200
But it's definitely a lot trickier than

807
00:33:16,559 --> 00:33:21,200
doing it for var. Um and that is the

808
00:33:19,200 --> 00:33:22,399
main reason people still use VAR despite

809
00:33:21,200 --> 00:33:24,000
its shortcomings around the

810
00:33:22,399 --> 00:33:25,679
subadditivity and the handling of the

811
00:33:24,000 --> 00:33:28,640
tails.

812
00:33:25,679 --> 00:33:30,480
Okay. So I'm just going to skip over

813
00:33:28,640 --> 00:33:32,240
some stuff. Uh this is some stuff around

814
00:33:30,480 --> 00:33:37,120
regulation.

815
00:33:32,240 --> 00:33:40,399
Um and I quickly mentioned this slide um

816
00:33:37,120 --> 00:33:42,480
because I um so one of the problems with

817
00:33:40,399 --> 00:33:46,159
uh expected shortfall is it's kind of

818
00:33:42,480 --> 00:33:48,720
defined in terms of uh VAR, right?

819
00:33:46,159 --> 00:33:50,399
Because it's the prop it's the mean loss

820
00:33:48,720 --> 00:33:53,600
that you would get given you've exceeded

821
00:33:50,399 --> 00:33:56,640
VAR uh in the first place. What you can

822
00:33:53,600 --> 00:33:59,840
do this is a this function here. This is

823
00:33:56,640 --> 00:34:01,919
in the paper by Rockefeller and Ria Sev

824
00:33:59,840 --> 00:34:03,600
which is in the the back says if you

825
00:34:01,919 --> 00:34:07,840
take this function f which is this

826
00:34:03,600 --> 00:34:10,320
expression here right and you try and

827
00:34:07,840 --> 00:34:11,679
then you minimize that over alpha

828
00:34:10,320 --> 00:34:14,480
consider this to be a function of x

829
00:34:11,679 --> 00:34:17,599
which is the portfolio and alpha uh is

830
00:34:14,480 --> 00:34:20,399
just a number right and you minimize

831
00:34:17,599 --> 00:34:22,240
this over alpha then the minimal value

832
00:34:20,399 --> 00:34:24,240
of that function is the expected

833
00:34:22,240 --> 00:34:26,159
shortfall and so you can find the

834
00:34:24,240 --> 00:34:28,800
expected shortfall

835
00:34:26,159 --> 00:34:30,800
by taking that f and minimizing it,

836
00:34:28,800 --> 00:34:33,280
right? And that is basically if you

837
00:34:30,800 --> 00:34:35,040
replace the integral with a with a sum,

838
00:34:33,280 --> 00:34:36,639
that's basically a linear problem,

839
00:34:35,040 --> 00:34:39,760
right? And so it's relatively easy to

840
00:34:36,639 --> 00:34:42,240
find the expected shortfall. Um,

841
00:34:39,760 --> 00:34:45,440
moreover, if you minimize it with

842
00:34:42,240 --> 00:34:49,200
respect to alpha and x, now what you've

843
00:34:45,440 --> 00:34:51,760
done is you found the portfolio with the

844
00:34:49,200 --> 00:34:53,520
minimal expected shortfall, right? I.e.

845
00:34:51,760 --> 00:34:55,679
you have minimized the expected

846
00:34:53,520 --> 00:34:58,480
shortfall which is basically what we're

847
00:34:55,679 --> 00:34:59,920
trying to do in this whole uh in this

848
00:34:58,480 --> 00:35:01,680
whole thing. So you just have to

849
00:34:59,920 --> 00:35:04,160
consider this function here. You can

850
00:35:01,680 --> 00:35:07,440
minimize that over x and alpha right

851
00:35:04,160 --> 00:35:09,760
which is basically a linear problem and

852
00:35:07,440 --> 00:35:12,320
um that essentially is how you minimize

853
00:35:09,760 --> 00:35:14,800
expected shortfall. Um no such

854
00:35:12,320 --> 00:35:17,200
equivalent thing exists for for value at

855
00:35:14,800 --> 00:35:21,119
risk. Right? So even though expected

856
00:35:17,200 --> 00:35:25,680
shortfall is trickier to um is trickier

857
00:35:21,119 --> 00:35:27,760
to uh uh uh back test, it's easier to uh

858
00:35:25,680 --> 00:35:29,680
minimize, which is what I care about

859
00:35:27,760 --> 00:35:32,800
more.

860
00:35:29,680 --> 00:35:34,640
Okay. Um

861
00:35:32,800 --> 00:35:36,880
skip over it. So that's expected

862
00:35:34,640 --> 00:35:37,839
shortfall and VAR, right? So now we're

863
00:35:36,880 --> 00:35:41,359
going to start talking about

864
00:35:37,839 --> 00:35:46,720
counterparty risk and and margin, right?

865
00:35:41,359 --> 00:35:49,440
So if you have um in the derivative uh

866
00:35:46,720 --> 00:35:51,680
world right so if I have A has got two

867
00:35:49,440 --> 00:35:53,839
trades one with B one with C right

868
00:35:51,680 --> 00:35:55,440
derivatives typically swaps means I'm

869
00:35:53,839 --> 00:35:56,560
going to exchange a series of cash flows

870
00:35:55,440 --> 00:35:58,480
between the two between between between

871
00:35:56,560 --> 00:35:59,760
between the two parties right and

872
00:35:58,480 --> 00:36:01,280
typically those cash flows will be

873
00:35:59,760 --> 00:36:05,839
exchanged say over a three-month period

874
00:36:01,280 --> 00:36:07,760
or six month six-month period so um A in

875
00:36:05,839 --> 00:36:09,839
this case is receiving some cash flows

876
00:36:07,760 --> 00:36:13,200
it's paying the series SI to be and

877
00:36:09,839 --> 00:36:15,359
receiving TRI from uh from B. A is

878
00:36:13,200 --> 00:36:18,320
exposed to the fact that before the next

879
00:36:15,359 --> 00:36:20,480
cash flow arrives from B, B might

880
00:36:18,320 --> 00:36:22,800
default and not pay the cash flow,

881
00:36:20,480 --> 00:36:26,320
right? And the same story for for C. So

882
00:36:22,800 --> 00:36:28,320
A has counterparty risk to both B and C

883
00:36:26,320 --> 00:36:30,079
because when we get to the next cash

884
00:36:28,320 --> 00:36:32,000
flow date, say 3 months time or six

885
00:36:30,079 --> 00:36:34,000
months time or a year's time, they might

886
00:36:32,000 --> 00:36:35,760
not pay that cash flow that they're due.

887
00:36:34,000 --> 00:36:37,680
Right? So that's the fundamental reason

888
00:36:35,760 --> 00:36:40,640
why they have counterparty risk for for

889
00:36:37,680 --> 00:36:43,599
derivatives in order to mitigate against

890
00:36:40,640 --> 00:36:46,160
the fact that they might not pay uh that

891
00:36:43,599 --> 00:36:48,000
cash flow. What actually happens is that

892
00:36:46,160 --> 00:36:50,400
they pay is that both all these

893
00:36:48,000 --> 00:36:54,880
counterparties exchange on a daily basis

894
00:36:50,400 --> 00:36:57,760
the exchange variation margin right um

895
00:36:54,880 --> 00:37:00,240
which uh means that which is equal to

896
00:36:57,760 --> 00:37:01,680
the value of these derivatives. Right?

897
00:37:00,240 --> 00:37:03,040
So as the value goes up and down of

898
00:37:01,680 --> 00:37:04,800
these things, they'll be paying

899
00:37:03,040 --> 00:37:06,880
variation margin to one to one to one

900
00:37:04,800 --> 00:37:08,480
another, right? And that mitigates

901
00:37:06,880 --> 00:37:10,640
against the cost of the cash flow not

902
00:37:08,480 --> 00:37:12,079
getting paid. But if they're paying

903
00:37:10,640 --> 00:37:15,520
variation margin from one to another and

904
00:37:12,079 --> 00:37:17,599
then one party or other goes goes uh uh

905
00:37:15,520 --> 00:37:19,200
goes bust and defaults, then you still

906
00:37:17,599 --> 00:37:21,680
got to pay the variation margin to the

907
00:37:19,200 --> 00:37:23,520
other person. And as soon as one party

908
00:37:21,680 --> 00:37:25,440
goes bust, what A would try and do, so

909
00:37:23,520 --> 00:37:27,119
if C goes bust here, A would try and

910
00:37:25,440 --> 00:37:29,119
replace that trade. It would take it

911
00:37:27,119 --> 00:37:31,280
some number of days to replace that

912
00:37:29,119 --> 00:37:34,400
trade. uh with something else or unwind

913
00:37:31,280 --> 00:37:35,920
that trade, right? During which time the

914
00:37:34,400 --> 00:37:37,440
value of that trade might go up and

915
00:37:35,920 --> 00:37:39,200
because the value of that trade is going

916
00:37:37,440 --> 00:37:41,839
up, it's having to pay an increased

917
00:37:39,200 --> 00:37:43,520
amount of variation margin to to B,

918
00:37:41,839 --> 00:37:46,480
right? And so therefore, it incurs a

919
00:37:43,520 --> 00:37:49,119
loss, right? And so it incurs a loss

920
00:37:46,480 --> 00:37:51,200
because during the period between when C

921
00:37:49,119 --> 00:37:53,599
defaults and when it manages to replace

922
00:37:51,200 --> 00:37:57,680
that trade, the value of the trade will

923
00:37:53,599 --> 00:38:00,640
change or go go up basically.

924
00:37:57,680 --> 00:38:02,880
and that that is the loss. So in order

925
00:38:00,640 --> 00:38:06,480
in order to mitigate against that risk,

926
00:38:02,880 --> 00:38:08,000
right, A will collect initial margin,

927
00:38:06,480 --> 00:38:09,920
right? That's what initial margin is.

928
00:38:08,000 --> 00:38:13,599
That's the essentially a covering you

929
00:38:09,920 --> 00:38:16,640
for the risk um in between when a party

930
00:38:13,599 --> 00:38:20,079
defaults and when you've managed to uh

931
00:38:16,640 --> 00:38:23,200
unwind or replace that position. Okay,

932
00:38:20,079 --> 00:38:24,880
that slide just says what I just said.

933
00:38:23,200 --> 00:38:26,240
Okay. And then I have another slide

934
00:38:24,880 --> 00:38:28,800
which says the same thing again in a

935
00:38:26,240 --> 00:38:30,960
picture. Right. Um so you have the

936
00:38:28,800 --> 00:38:33,920
variation margin is getting paid up

937
00:38:30,960 --> 00:38:35,680
until uh here between all these things.

938
00:38:33,920 --> 00:38:36,960
Uh you get some default will happen

939
00:38:35,680 --> 00:38:40,079
here. We don't know what's going to

940
00:38:36,960 --> 00:38:42,480
happen. The risk can go up or down. Um

941
00:38:40,079 --> 00:38:44,160
and there's some uh loss could

942
00:38:42,480 --> 00:38:46,480
potentially be incurred right at this

943
00:38:44,160 --> 00:38:47,760
point. This should hopefully sound to

944
00:38:46,480 --> 00:38:49,599
you a little bit like what we just

945
00:38:47,760 --> 00:38:51,839
discussed right with VAR an expected

946
00:38:49,599 --> 00:38:53,520
shortfall. And so initial margin in

947
00:38:51,839 --> 00:38:55,280
order how much initial margin should I

948
00:38:53,520 --> 00:38:58,079
should I should I collect? Well,

949
00:38:55,280 --> 00:38:59,760
basically it's going to be a VAR based

950
00:38:58,079 --> 00:39:01,359
on how long you think it's going to take

951
00:38:59,760 --> 00:39:04,320
you to unwind that position which is

952
00:39:01,359 --> 00:39:05,920
called the margin period of risk, right?

953
00:39:04,320 --> 00:39:07,520
Um

954
00:39:05,920 --> 00:39:09,119
there's two kinds of initial margin

955
00:39:07,520 --> 00:39:12,800
depending on whether your trade is a

956
00:39:09,119 --> 00:39:15,839
cleared trade uh or a bilateral trade.

957
00:39:12,800 --> 00:39:18,160
Um the cleared margin

958
00:39:15,839 --> 00:39:20,800
is set up by the clearing house, the

959
00:39:18,160 --> 00:39:23,040
CCP. Um and that's always been the case

960
00:39:20,800 --> 00:39:25,920
for years and years and years. Um up

961
00:39:23,040 --> 00:39:28,640
until 2016, people were not paying uh

962
00:39:25,920 --> 00:39:30,880
initial margin on bilateral trades. Um

963
00:39:28,640 --> 00:39:34,000
that changed when ISDA came up with

964
00:39:30,880 --> 00:39:36,640
their standard initial margin. Um which

965
00:39:34,000 --> 00:39:38,079
is um the form I've put the formula down

966
00:39:36,640 --> 00:39:40,240
here, but it's kind of similar. It's

967
00:39:38,079 --> 00:39:42,079
basically VAR, right, is what they put

968
00:39:40,240 --> 00:39:45,200
here. Um, and the only difference

969
00:39:42,079 --> 00:39:47,760
compared to what we just discussed, um,

970
00:39:45,200 --> 00:39:51,119
is that because it's handling nonlinear

971
00:39:47,760 --> 00:39:52,960
portfolios, there's a gamma term, uh, in

972
00:39:51,119 --> 00:39:55,040
there, which I didn't talk about, uh,

973
00:39:52,960 --> 00:39:56,320
before. Um, and when you work it all the

974
00:39:55,040 --> 00:39:58,079
way through, you make exactly the same

975
00:39:56,320 --> 00:40:01,359
assumptions that everything is normal.

976
00:39:58,079 --> 00:40:03,520
Uh, mean is mean is zero. Um, you end up

977
00:40:01,359 --> 00:40:05,920
with the exact same term we talked we

978
00:40:03,520 --> 00:40:08,400
saw before, right? And you also sim

979
00:40:05,920 --> 00:40:10,560
assumes that it's a 10day margin period

980
00:40:08,400 --> 00:40:13,040
of risk, right? and it's a 99%

981
00:40:10,560 --> 00:40:15,359
confidence interval. So the 99% conf

982
00:40:13,040 --> 00:40:19,599
confidence interval uh is that's the

983
00:40:15,359 --> 00:40:23,520
inverse normal of of 99%. That's the uh

984
00:40:19,599 --> 00:40:25,280
10day uh um margin period of risk.

985
00:40:23,520 --> 00:40:27,760
That's the exact same term we looked at

986
00:40:25,280 --> 00:40:29,599
in the VAR before. And then you get two

987
00:40:27,760 --> 00:40:32,079
additional terms that come from the

988
00:40:29,599 --> 00:40:35,599
convexity, right? Which is kind kind of

989
00:40:32,079 --> 00:40:38,480
similar. The main point is that initial

990
00:40:35,599 --> 00:40:42,079
margin is basically some variant of VA

991
00:40:38,480 --> 00:40:43,599
or potentially expected shortfall. Okay.

992
00:40:42,079 --> 00:40:46,000
Um

993
00:40:43,599 --> 00:40:48,880
in real life um there's lots and lots

994
00:40:46,000 --> 00:40:50,640
more simplifying assumptions um that uh

995
00:40:48,880 --> 00:40:52,880
people

996
00:40:50,640 --> 00:40:57,119
um make around all these things to try

997
00:40:52,880 --> 00:40:58,640
and uh simplify stuff um and all these

998
00:40:57,119 --> 00:41:00,319
kind of correlations between all the

999
00:40:58,640 --> 00:41:02,319
different uh parameters. This covers the

1000
00:41:00,319 --> 00:41:04,800
entire world, all all different asset

1001
00:41:02,319 --> 00:41:07,280
classes. Uhuh.

1002
00:41:04,800 --> 00:41:10,640
And so they get kind of recalibrated on

1003
00:41:07,280 --> 00:41:13,599
a yearly basis. Um, if you Google um,

1004
00:41:10,640 --> 00:41:15,839
SIM COVID uh, now, you'll probably see

1005
00:41:13,599 --> 00:41:19,599
quite a lot of stuff uh, in there

1006
00:41:15,839 --> 00:41:21,760
because SIM 2.7 is about to come out in

1007
00:41:19,599 --> 00:41:23,760
the beginning of December. And that'll

1008
00:41:21,760 --> 00:41:26,240
be the first one that's calibrated

1009
00:41:23,760 --> 00:41:30,079
without any of the COVID or global

1010
00:41:26,240 --> 00:41:31,359
financial uh, crisis data in there. And

1011
00:41:30,079 --> 00:41:33,200
what's going to happen, what people

1012
00:41:31,359 --> 00:41:35,359
expect to happen is that the initial

1013
00:41:33,200 --> 00:41:37,119
margin calculated by this sim is going

1014
00:41:35,359 --> 00:41:39,520
to massively reduce by somewhere in the

1015
00:41:37,119 --> 00:41:41,920
region of kind of five to 20%. Um, and

1016
00:41:39,520 --> 00:41:44,240
what that will do is release something

1017
00:41:41,920 --> 00:41:46,400
in the region of kind of $40 billion of

1018
00:41:44,240 --> 00:41:48,560
margin back out into the wild because

1019
00:41:46,400 --> 00:41:49,599
today people are paying initial margin

1020
00:41:48,560 --> 00:41:51,520
or these different things with these

1021
00:41:49,599 --> 00:41:53,760
high levels of uh using these high

1022
00:41:51,520 --> 00:41:55,280
levels of VA. When they recalibrate in

1023
00:41:53,760 --> 00:41:57,040
the first week of December, everything

1024
00:41:55,280 --> 00:41:59,599
will come down. Everybody will release

1025
00:41:57,040 --> 00:42:01,280
all the initial margin. Um so there's

1026
00:41:59,599 --> 00:42:05,040
quite a lot of stuff around that kind of

1027
00:42:01,280 --> 00:42:06,640
in the news at the moment. Uh um that

1028
00:42:05,040 --> 00:42:09,040
just talks about how to structure you

1029
00:42:06,640 --> 00:42:10,720
you um roll everything up into one

1030
00:42:09,040 --> 00:42:12,560
number across all the different port

1031
00:42:10,720 --> 00:42:16,960
portfolios.

1032
00:42:12,560 --> 00:42:19,520
Um and skip over that. So that's what

1033
00:42:16,960 --> 00:42:22,160
margin is right. So now we come on to

1034
00:42:19,520 --> 00:42:24,720
trying to optimize

1035
00:42:22,160 --> 00:42:27,200
the the initial margin. I put margin

1036
00:42:24,720 --> 00:42:29,599
here. I I mean initial margin, right? So

1037
00:42:27,200 --> 00:42:31,280
the the situation that we're thinking

1038
00:42:29,599 --> 00:42:33,680
about is we've got multiple different

1039
00:42:31,280 --> 00:42:37,040
financial participants ABCDE. Think of

1040
00:42:33,680 --> 00:42:39,440
them as banks, right? And we've got I've

1041
00:42:37,040 --> 00:42:41,839
put one CCP, right? There could in fact

1042
00:42:39,440 --> 00:42:43,760
be multiple CCPs in the middle, right?

1043
00:42:41,839 --> 00:42:45,200
And all these participants have got a

1044
00:42:43,760 --> 00:42:48,800
bunch of bilateral trades versus each

1045
00:42:45,200 --> 00:42:50,880
other and they've got um a bunch of

1046
00:42:48,800 --> 00:42:52,640
trades versus the CCP. That's the

1047
00:42:50,880 --> 00:42:55,280
situation that that that we've got,

1048
00:42:52,640 --> 00:42:58,240
right? and they're all posting margin to

1049
00:42:55,280 --> 00:43:01,280
to each other, right? In this situation,

1050
00:42:58,240 --> 00:43:05,280
okay? And what we are trying to do by

1051
00:43:01,280 --> 00:43:07,599
optimizing stuff is come up with a bunch

1052
00:43:05,280 --> 00:43:10,640
of hedge trades, right, which is these

1053
00:43:07,599 --> 00:43:12,960
XH variables between all the different

1054
00:43:10,640 --> 00:43:16,720
participants in order to try and

1055
00:43:12,960 --> 00:43:18,560
minimize the margin, i.e. the VAR, in

1056
00:43:16,720 --> 00:43:21,359
the entire system, right? That's the

1057
00:43:18,560 --> 00:43:24,480
goal of what we're trying to uh get to.

1058
00:43:21,359 --> 00:43:26,560
Okay? And you might say, well, why are

1059
00:43:24,480 --> 00:43:29,280
there no trades versus the CCP? Were you

1060
00:43:26,560 --> 00:43:31,760
ignoring the uh cleared margin? Um,

1061
00:43:29,280 --> 00:43:33,680
that's just a practical issue. We can't

1062
00:43:31,760 --> 00:43:38,400
book, you can't book trades between the

1063
00:43:33,680 --> 00:43:40,480
CCP uh and um and a bank. All you can do

1064
00:43:38,400 --> 00:43:42,160
is book bilateral trades between A and

1065
00:43:40,480 --> 00:43:44,720
B, A, A, and E, all these different

1066
00:43:42,160 --> 00:43:47,920
things. And depending on which trades

1067
00:43:44,720 --> 00:43:50,000
you choose, some of them will be cleared

1068
00:43:47,920 --> 00:43:52,160
or not cleared. If you ch if you pick a

1069
00:43:50,000 --> 00:43:54,319
trade where the trade type is like an an

1070
00:43:52,160 --> 00:43:56,079
interest rate swap, then that'll be

1071
00:43:54,319 --> 00:43:58,400
mandated to clear. And so even though

1072
00:43:56,079 --> 00:44:00,400
it's between A and B, it'll get cleared

1073
00:43:58,400 --> 00:44:02,720
and it will affect the cleared margin

1074
00:44:00,400 --> 00:44:04,880
and not the bilateral margin. Okay,

1075
00:44:02,720 --> 00:44:06,720
that's why there's no actual trades

1076
00:44:04,880 --> 00:44:09,520
booked between the CCP and any of these

1077
00:44:06,720 --> 00:44:11,440
people. Okay, so that's what we're

1078
00:44:09,520 --> 00:44:13,119
trying to do.

1079
00:44:11,440 --> 00:44:14,319
So

1080
00:44:13,119 --> 00:44:15,920
that's the problem we're trying to

1081
00:44:14,319 --> 00:44:18,240
solve, right? which looks like a lot of

1082
00:44:15,920 --> 00:44:20,319
maths um but in fact is not that

1083
00:44:18,240 --> 00:44:23,200
complicated right so what we're trying

1084
00:44:20,319 --> 00:44:25,040
to do is we're trying to minimize summed

1085
00:44:23,200 --> 00:44:28,640
over all of the parties right so all of

1086
00:44:25,040 --> 00:44:31,119
the banks ABCDE E right the margin of

1087
00:44:28,640 --> 00:44:34,800
all those people so the margin is made

1088
00:44:31,119 --> 00:44:36,319
up of the sim the bilateral margin

1089
00:44:34,800 --> 00:44:39,599
summed over all the all the

1090
00:44:36,319 --> 00:44:42,400
counterparties right plus the cleared

1091
00:44:39,599 --> 00:44:44,319
margin summed over all the CCPs that are

1092
00:44:42,400 --> 00:44:45,920
there so that just says the sum of all

1093
00:44:44,319 --> 00:44:48,319
the margin margin in the system is what

1094
00:44:45,920 --> 00:44:49,920
I'm trying to minimize right and we say

1095
00:44:48,319 --> 00:44:52,079
well where sim and the initial margin

1096
00:44:49,920 --> 00:44:53,599
there's some functions of risk as we've

1097
00:44:52,079 --> 00:44:56,480
just discussed right we know what the

1098
00:44:53,599 --> 00:45:00,240
function is it's var like let's say

1099
00:44:56,480 --> 00:45:03,440
right so we know that sim and uh whoop

1100
00:45:00,240 --> 00:45:06,960
sorry initial margin are some functions

1101
00:45:03,440 --> 00:45:11,119
of the risk and we know that the risk

1102
00:45:06,960 --> 00:45:14,480
position that's there is equal to the

1103
00:45:11,119 --> 00:45:16,880
initial risk which is this the zero plus

1104
00:45:14,480 --> 00:45:17,839
the sum over all the hedges that we're

1105
00:45:16,880 --> 00:45:19,599
going to book. So, we're going to

1106
00:45:17,839 --> 00:45:21,040
propose a bunch of bunch of trades. So,

1107
00:45:19,599 --> 00:45:23,520
we sum over all the hedges that we're

1108
00:45:21,040 --> 00:45:24,960
going to book, the size of the hedge,

1109
00:45:23,520 --> 00:45:26,800
right, which is the x, which is the

1110
00:45:24,960 --> 00:45:30,319
thing we're trying to find, multiplied

1111
00:45:26,800 --> 00:45:32,160
by the risk of that particular hedge,

1112
00:45:30,319 --> 00:45:34,640
right? So, that's that's how we know

1113
00:45:32,160 --> 00:45:35,920
what the new risk is, right? And we've

1114
00:45:34,640 --> 00:45:38,880
got a couple of constraints that we need

1115
00:45:35,920 --> 00:45:41,280
to put in the system, right? This is the

1116
00:45:38,880 --> 00:45:42,960
most important one, right? This is this

1117
00:45:41,280 --> 00:45:44,400
is what we call the symmetry constraint

1118
00:45:42,960 --> 00:45:47,359
even though it looks like an looks like

1119
00:45:44,400 --> 00:45:51,119
an asymmetry constraint. What this says

1120
00:45:47,359 --> 00:45:54,079
is that if JP if if if P sells something

1121
00:45:51,119 --> 00:45:58,079
to Q, Q had better buy that same thing

1122
00:45:54,079 --> 00:46:00,400
from P. Right. Exactly. And this was

1123
00:45:58,079 --> 00:46:02,079
when we first set this up, this was in

1124
00:46:00,400 --> 00:46:03,920
reality the thing that people were most

1125
00:46:02,079 --> 00:46:05,599
worried that we would mess up. Right.

1126
00:46:03,920 --> 00:46:08,400
Because the biggest problem that could

1127
00:46:05,599 --> 00:46:10,160
have happened here is that we told we we

1128
00:46:08,400 --> 00:46:13,119
set up a thing. We tell uh Goldman

1129
00:46:10,160 --> 00:46:15,920
Sachs, go and buy a h 100red million of

1130
00:46:13,119 --> 00:46:19,359
stuff from JP Morgan. And then we tell

1131
00:46:15,920 --> 00:46:22,000
JP Morgan, go and sell 200 million of

1132
00:46:19,359 --> 00:46:23,760
stuff, right, to Goldman Sachs. So

1133
00:46:22,000 --> 00:46:25,119
Goldman Sachs sees their thing, says buy

1134
00:46:23,760 --> 00:46:27,200
100 million. They think that looks good

1135
00:46:25,119 --> 00:46:28,960
to us. We'll we'll agree to this, right?

1136
00:46:27,200 --> 00:46:30,960
JP Morgan sees their thing, which sells

1137
00:46:28,960 --> 00:46:33,280
says sell 200 million of stuff to

1138
00:46:30,960 --> 00:46:34,880
Goldman Sachs and JP Morgan goes that

1139
00:46:33,280 --> 00:46:36,480
looks good. We we'll we'll agree to

1140
00:46:34,880 --> 00:46:38,319
this. Goldman Sachs doesn't see what we

1141
00:46:36,480 --> 00:46:40,960
told JP Morgan and JP Morgan doesn't see

1142
00:46:38,319 --> 00:46:42,880
what we told go Goldman Sachs and they

1143
00:46:40,960 --> 00:46:45,119
only discover that something's gone

1144
00:46:42,880 --> 00:46:48,560
horrifically wrong when they try and do

1145
00:46:45,119 --> 00:46:49,920
that trade, right? Um so the reason that

1146
00:46:48,560 --> 00:46:52,000
doesn't happen is because we've got this

1147
00:46:49,920 --> 00:46:53,520
constraint in the system, right? That

1148
00:46:52,000 --> 00:46:55,599
says that whatever I whatever Goldman

1149
00:46:53,520 --> 00:46:57,599
Sachs buys from JP Morgan, JP Morgan

1150
00:46:55,599 --> 00:47:00,240
better sell that exact same thing to

1151
00:46:57,599 --> 00:47:01,520
Goldman Sachs, right? That is the most

1152
00:47:00,240 --> 00:47:03,839
important constraint in the whole

1153
00:47:01,520 --> 00:47:05,680
system. Right? The second constraint,

1154
00:47:03,839 --> 00:47:08,400
the big one that we've got in there is

1155
00:47:05,680 --> 00:47:10,880
this one, right? Which says this is cash

1156
00:47:08,400 --> 00:47:14,480
flow flatness, right? This says that for

1157
00:47:10,880 --> 00:47:17,680
any party, let's say Goldman Sachs, if I

1158
00:47:14,480 --> 00:47:20,880
sell something, if I if I sell something

1159
00:47:17,680 --> 00:47:22,960
to one party, I'd better buy that exact

1160
00:47:20,880 --> 00:47:24,800
same thing from every from some

1161
00:47:22,960 --> 00:47:27,119
combination of other people, right?

1162
00:47:24,800 --> 00:47:29,520
That's what that constraint says. We

1163
00:47:27,119 --> 00:47:32,319
don't need that to be in the system.

1164
00:47:29,520 --> 00:47:34,160
It's a kind of safety valve uh that's in

1165
00:47:32,319 --> 00:47:36,480
there, right? The advantage of having

1166
00:47:34,160 --> 00:47:38,240
this in here is it says if I'm

1167
00:47:36,480 --> 00:47:41,119
definitely sure that everything is cash

1168
00:47:38,240 --> 00:47:42,560
flow flat across the system, nobody's

1169
00:47:41,119 --> 00:47:44,720
going to make any money or lose any

1170
00:47:42,560 --> 00:47:46,400
money out of the out of the whole system

1171
00:47:44,720 --> 00:47:47,920
because I'm going to sell something. I'm

1172
00:47:46,400 --> 00:47:48,880
going to going to sell something to

1173
00:47:47,920 --> 00:47:50,079
there. I'm going to buy it from

1174
00:47:48,880 --> 00:47:52,079
somewhere else. So, I'm just all I'm

1175
00:47:50,079 --> 00:47:55,040
doing is shuffling risk around the

1176
00:47:52,079 --> 00:47:57,040
system. Right? You could relax that and

1177
00:47:55,040 --> 00:47:58,400
you could say, well, some parties could

1178
00:47:57,040 --> 00:48:00,240
make some money, some could lose some

1179
00:47:58,400 --> 00:48:02,240
money, some could change some risk, but

1180
00:48:00,240 --> 00:48:04,960
it makes everything a lot trickier,

1181
00:48:02,240 --> 00:48:07,280
right? So, we basically enforce this

1182
00:48:04,960 --> 00:48:09,119
around around the system. And then the

1183
00:48:07,280 --> 00:48:11,280
last constraint is a risk constraint

1184
00:48:09,119 --> 00:48:12,800
which comes from the uh parties

1185
00:48:11,280 --> 00:48:14,800
themselves,

1186
00:48:12,800 --> 00:48:17,119
right? And what this says is that

1187
00:48:14,800 --> 00:48:19,839
Goldman Sachs or some party might say,

1188
00:48:17,119 --> 00:48:22,079
well, I don't really want to go uh I

1189
00:48:19,839 --> 00:48:24,240
might not want to go long a particular

1190
00:48:22,079 --> 00:48:27,200
risk factor versus some particular

1191
00:48:24,240 --> 00:48:29,119
counterparty for whatever reason, right?

1192
00:48:27,200 --> 00:48:31,200
Um so the first two are sort of

1193
00:48:29,119 --> 00:48:33,280
systemwide kind of constraints that we

1194
00:48:31,200 --> 00:48:36,000
kind of impose on the thing and the last

1195
00:48:33,280 --> 00:48:38,400
one is a constraint which basically says

1196
00:48:36,000 --> 00:48:41,040
don't change the risk too much, right?

1197
00:48:38,400 --> 00:48:44,079
Which is what parties say, right? So all

1198
00:48:41,040 --> 00:48:47,680
of that all of that math that's all it's

1199
00:48:44,079 --> 00:48:49,440
saying. Okay. Um so if we look at it's

1200
00:48:47,680 --> 00:48:52,559
kind of if we look at a very very simple

1201
00:48:49,440 --> 00:48:56,000
example if we take a three-party system

1202
00:48:52,559 --> 00:48:57,359
right uh ABC this might be a bit small

1203
00:48:56,000 --> 00:48:58,960
uh and you put it in there and say well

1204
00:48:57,359 --> 00:49:00,960
how could I minimize the margin around

1205
00:48:58,960 --> 00:49:03,040
that system right and the way you

1206
00:49:00,960 --> 00:49:05,760
minimize if you've got AC's got to trade

1207
00:49:03,040 --> 00:49:07,760
with 10 AB's got a trade with two and

1208
00:49:05,760 --> 00:49:10,000
BC's got to trade with nine. Well, what

1209
00:49:07,760 --> 00:49:12,400
you do is you move the median trade

1210
00:49:10,000 --> 00:49:14,720
around the whole triangle, right? If you

1211
00:49:12,400 --> 00:49:16,640
move one median trade around, one trade

1212
00:49:14,720 --> 00:49:19,599
around the whole triangle, right? I'm

1213
00:49:16,640 --> 00:49:21,280
guaranteed to satisfy like by

1214
00:49:19,599 --> 00:49:23,839
construction those first two

1215
00:49:21,280 --> 00:49:25,359
constraints, right? Uh because I'm only

1216
00:49:23,839 --> 00:49:28,800
moving the exact same thing around the

1217
00:49:25,359 --> 00:49:31,760
whole system. And if uh I'm moving just

1218
00:49:28,800 --> 00:49:33,280
say in this case nine, I'm going to A's

1219
00:49:31,760 --> 00:49:34,800
going to buy nine, sell nine. B is going

1220
00:49:33,280 --> 00:49:36,319
to buy nine, sell nine. C is going to

1221
00:49:34,800 --> 00:49:38,160
buy nine, sell nine. So I'm going to

1222
00:49:36,319 --> 00:49:39,839
satisfy the second constraint as well.

1223
00:49:38,160 --> 00:49:42,240
Right? I've ignored the third constraint

1224
00:49:39,839 --> 00:49:44,720
for now. Um and the reason I picked that

1225
00:49:42,240 --> 00:49:47,280
is u those particular examples with 29

1226
00:49:44,720 --> 00:49:49,440
and 10 is that actually if you fiddle

1227
00:49:47,280 --> 00:49:52,079
around with the maths a bit the thing

1228
00:49:49,440 --> 00:49:53,920
you should move is the median trade

1229
00:49:52,079 --> 00:49:55,440
given any triangle and you can take any

1230
00:49:53,920 --> 00:49:57,359
network and you can always break a

1231
00:49:55,440 --> 00:49:59,040
network into a bunch of triangles,

1232
00:49:57,359 --> 00:50:01,200
right? And for every triangle you just

1233
00:49:59,040 --> 00:50:03,280
move the median around, right? That's

1234
00:50:01,200 --> 00:50:04,880
what you should do, right? The problems

1235
00:50:03,280 --> 00:50:06,559
are this won't satisfy all the different

1236
00:50:04,880 --> 00:50:09,760
con if you have additional constraints

1237
00:50:06,559 --> 00:50:12,079
causes problems and obviously um some

1238
00:50:09,760 --> 00:50:14,160
edges of this triangle would also be

1239
00:50:12,079 --> 00:50:16,240
edges of other triangles and so you end

1240
00:50:14,160 --> 00:50:19,280
up but you can it won't generally solve

1241
00:50:16,240 --> 00:50:21,440
the problem right but it's a good way of

1242
00:50:19,280 --> 00:50:23,520
thinking about it we always think about

1243
00:50:21,440 --> 00:50:26,720
triangles and how you would move risk

1244
00:50:23,520 --> 00:50:29,119
around uh in a particular triangle

1245
00:50:26,720 --> 00:50:32,079
okay

1246
00:50:29,119 --> 00:50:34,079
so it's that um

1247
00:50:32,079 --> 00:50:35,440
In reality, we just use a big numerical

1248
00:50:34,079 --> 00:50:39,440
solver around this. So, what we're in

1249
00:50:35,440 --> 00:50:41,200
the business here is we're solving uh um

1250
00:50:39,440 --> 00:50:42,800
minimization problems. So, operational

1251
00:50:41,200 --> 00:50:45,520
research type type problems. They're of

1252
00:50:42,800 --> 00:50:49,599
the form minimize uh f subject to uh

1253
00:50:45,520 --> 00:50:51,440
some other stuff. And um as I mentioned

1254
00:50:49,599 --> 00:50:53,359
earlier, solving convex problems is way

1255
00:50:51,440 --> 00:50:55,520
way way easier than solving general

1256
00:50:53,359 --> 00:50:56,480
nonlinear problems. And convexity is

1257
00:50:55,520 --> 00:50:57,920
basically the same thing as

1258
00:50:56,480 --> 00:51:00,400
subadditivity, right? That's the

1259
00:50:57,920 --> 00:51:02,400
definition of convexity, right? And that

1260
00:51:00,400 --> 00:51:05,280
should remind you of the definition we

1261
00:51:02,400 --> 00:51:06,800
saw earlier of subadditivity, right? So

1262
00:51:05,280 --> 00:51:08,319
we saw earlier minimizing expected

1263
00:51:06,800 --> 00:51:10,800
shortfall. That's basically a peace-wise

1264
00:51:08,319 --> 00:51:13,119
linear problem. All these things we're

1265
00:51:10,800 --> 00:51:15,040
talking about sim is nearly convex,

1266
00:51:13,119 --> 00:51:17,680
right? There are different add-ons that

1267
00:51:15,040 --> 00:51:19,280
you can have which are usually convex.

1268
00:51:17,680 --> 00:51:21,280
And some of the math that we get into is

1269
00:51:19,280 --> 00:51:23,359
that how do you come up with approx

1270
00:51:21,280 --> 00:51:25,599
approximations of these things which

1271
00:51:23,359 --> 00:51:27,680
genuinely are convex. Right? We tried

1272
00:51:25,599 --> 00:51:29,760
using non like proper nonlinear solvers

1273
00:51:27,680 --> 00:51:31,359
on these things. way easier just to

1274
00:51:29,760 --> 00:51:34,079
approximate the function you want and

1275
00:51:31,359 --> 00:51:35,520
use a convex solver on it because the

1276
00:51:34,079 --> 00:51:37,200
state of the technology for solving

1277
00:51:35,520 --> 00:51:39,599
convex optimization problems is really

1278
00:51:37,200 --> 00:51:41,599
really really good, right? Uh it would

1279
00:51:39,599 --> 00:51:44,079
be crazy to write your own version of a

1280
00:51:41,599 --> 00:51:45,839
convex optimization solver because there

1281
00:51:44,079 --> 00:51:50,559
are loads of open source and commercial

1282
00:51:45,839 --> 00:51:53,760
availables things available. Uh so don't

1283
00:51:50,559 --> 00:51:56,720
do it. Just plug it into a system uh and

1284
00:51:53,760 --> 00:51:59,200
it works. The thing to note is that that

1285
00:51:56,720 --> 00:52:01,440
how difficult it is to solve the problem

1286
00:51:59,200 --> 00:52:03,440
is really really really sensitive on the

1287
00:52:01,440 --> 00:52:04,880
specifics of the problem, right? And

1288
00:52:03,440 --> 00:52:06,559
that doesn't really mean the size of the

1289
00:52:04,880 --> 00:52:09,280
problem. The size is not really too much

1290
00:52:06,559 --> 00:52:11,040
of a an issue. It's it's all kinds of

1291
00:52:09,280 --> 00:52:12,559
the structure of the problem. How sparse

1292
00:52:11,040 --> 00:52:15,119
is the problem in the thing? These are

1293
00:52:12,559 --> 00:52:19,680
the things that matter uh in the real

1294
00:52:15,119 --> 00:52:22,319
world. Okay. Um also it's a good idea to

1295
00:52:19,680 --> 00:52:23,599
use modeling languages, right? So um

1296
00:52:22,319 --> 00:52:26,480
there are lots of modeling languages

1297
00:52:23,599 --> 00:52:28,319
available. Gro is the one uh we use. I

1298
00:52:26,480 --> 00:52:30,240
think you may people might have used it.

1299
00:52:28,319 --> 00:52:33,599
I think you can get it free if you're

1300
00:52:30,240 --> 00:52:35,200
academic uh in institution. Um in case

1301
00:52:33,599 --> 00:52:37,599
anybody wants to spend 10 seconds trying

1302
00:52:35,200 --> 00:52:40,240
to solve that uh in their head. Uh so

1303
00:52:37,599 --> 00:52:42,880
this is in integer problem. Uh trying to

1304
00:52:40,240 --> 00:52:44,800
minimize 5x1 plus 8x2 subject to those

1305
00:52:42,880 --> 00:52:49,040
two constraints. Uh you can probably do

1306
00:52:44,800 --> 00:52:51,599
do that in your head. Uh

1307
00:52:49,040 --> 00:52:55,280
hang on.

1308
00:52:51,599 --> 00:52:57,040
Do that. Sorry.

1309
00:52:55,280 --> 00:53:01,119
Um,

1310
00:52:57,040 --> 00:53:03,520
so we did it on Groi using 24 physical

1311
00:53:01,119 --> 00:53:06,240
cores probably is overkill for that

1312
00:53:03,520 --> 00:53:07,839
problem, but it uh comes up in uh 10

1313
00:53:06,240 --> 00:53:09,119
milliseconds with the answer of 31,

1314
00:53:07,839 --> 00:53:13,200
which is hopefully if you did it, that's

1315
00:53:09,119 --> 00:53:15,680
what you tried. Uh, just to show how

1316
00:53:13,200 --> 00:53:18,400
easy it is to solve some of these uh

1317
00:53:15,680 --> 00:53:21,200
problems. In real life, a typical

1318
00:53:18,400 --> 00:53:23,200
problem that we would have uh might have

1319
00:53:21,200 --> 00:53:26,319
sort of 25 different parties in the

1320
00:53:23,200 --> 00:53:28,480
network might be say for FX delta 30 odd

1321
00:53:26,319 --> 00:53:30,960
different currencies, right? Uh that

1322
00:53:28,480 --> 00:53:33,040
we've got in there. Um we pick different

1323
00:53:30,960 --> 00:53:35,200
kinds of hedge instruments. So we try

1324
00:53:33,040 --> 00:53:37,680
and pick simple ones. The reason for

1325
00:53:35,200 --> 00:53:40,160
picking things like non-deliverable FX

1326
00:53:37,680 --> 00:53:42,240
forwards is that each individual hedge

1327
00:53:40,160 --> 00:53:43,920
type there has exposure to exactly one

1328
00:53:42,240 --> 00:53:46,160
underlying namely the currency. If I

1329
00:53:43,920 --> 00:53:47,760
pick a dollar euro uh non-deliverable

1330
00:53:46,160 --> 00:53:49,839
that's got exposure to the dollar euro

1331
00:53:47,760 --> 00:53:52,400
FX rate and nothing but the dollar euro

1332
00:53:49,839 --> 00:53:54,800
fx rates rate in this case right which

1333
00:53:52,400 --> 00:53:56,720
turns out to be useful um and if you do

1334
00:53:54,800 --> 00:53:59,920
that you end up with a system which is

1335
00:53:56,720 --> 00:54:01,920
something like say 20,000 variables

1336
00:53:59,920 --> 00:54:04,319
40,000 constraints something like that

1337
00:54:01,920 --> 00:54:06,880
is the real size of the is the real size

1338
00:54:04,319 --> 00:54:09,280
of the problem right

1339
00:54:06,880 --> 00:54:11,119
and really when you're solving convex

1340
00:54:09,280 --> 00:54:12,880
optimization problems solving convex

1341
00:54:11,119 --> 00:54:14,960
optimization problems is easy because

1342
00:54:12,880 --> 00:54:18,400
they A convex problem looks like a bowl,

1343
00:54:14,960 --> 00:54:21,280
right? And so they have one minimum. And

1344
00:54:18,400 --> 00:54:23,680
so you can convert the optimization

1345
00:54:21,280 --> 00:54:25,440
problem into a a root finding problem.

1346
00:54:23,680 --> 00:54:27,119
Just find where the root of the

1347
00:54:25,440 --> 00:54:29,520
derivative is so where where the

1348
00:54:27,119 --> 00:54:31,440
derivative is equal to zero. Right? Um

1349
00:54:29,520 --> 00:54:33,440
so that's root finding. People generally

1350
00:54:31,440 --> 00:54:36,640
use something like Newton Rafson for for

1351
00:54:33,440 --> 00:54:39,359
root finding. Uh when you use uh Newton

1352
00:54:36,640 --> 00:54:41,359
Rafson, you've got to compute a Hessen

1353
00:54:39,359 --> 00:54:43,280
matrix, right? And then you need to

1354
00:54:41,359 --> 00:54:45,040
invert that hessen matrix. That's the

1355
00:54:43,280 --> 00:54:46,800
slow part of the entire system is that

1356
00:54:45,040 --> 00:54:49,520
you're repeatedly

1357
00:54:46,800 --> 00:54:52,480
inverting hessen matrices, right? So the

1358
00:54:49,520 --> 00:54:54,640
matrix might be 40,000ish, right? Um

1359
00:54:52,480 --> 00:54:56,559
matrix inversion is basically an ncubed

1360
00:54:54,640 --> 00:54:58,960
kind of operation. So you end up with

1361
00:54:56,559 --> 00:55:01,920
this unfeasibly large number of uh

1362
00:54:58,960 --> 00:55:04,400
operations to to solve. In general, most

1363
00:55:01,920 --> 00:55:08,800
computers will not be able to factoriize

1364
00:55:04,400 --> 00:55:12,319
a 40,000 uh matrix for a randomly chosen

1365
00:55:08,800 --> 00:55:14,720
40,000 uh by 40,000 matrix. Right?

1366
00:55:12,319 --> 00:55:17,680
However, the problems that we have here

1367
00:55:14,720 --> 00:55:19,760
are very much not randomly chosen uh

1368
00:55:17,680 --> 00:55:21,839
matrices. They have an awful lot of

1369
00:55:19,760 --> 00:55:25,920
structure involved and they're massively

1370
00:55:21,839 --> 00:55:27,359
massively sparse, right? and any most

1371
00:55:25,920 --> 00:55:29,520
solvers the reason why they're very

1372
00:55:27,359 --> 00:55:31,920
mature is they take advantage of all

1373
00:55:29,520 --> 00:55:34,559
this matrix structure uh that's there

1374
00:55:31,920 --> 00:55:36,640
and so they can do way way way better

1375
00:55:34,559 --> 00:55:40,880
than you'd expect from this so in

1376
00:55:36,640 --> 00:55:42,559
particular for fx delta right the matrix

1377
00:55:40,880 --> 00:55:44,480
looks a little bit like this right so

1378
00:55:42,559 --> 00:55:46,720
you got a bit of stuff kind of at the

1379
00:55:44,480 --> 00:55:47,920
top of the matrix which is the thing I

1380
00:55:46,720 --> 00:55:49,760
talked around around the symmetry

1381
00:55:47,920 --> 00:55:52,400
constraints and the flatness constraints

1382
00:55:49,760 --> 00:55:54,160
right but the vast vast majority of the

1383
00:55:52,400 --> 00:55:55,920
constraints are those ones at the bottom

1384
00:55:54,160 --> 00:55:57,760
of that picture which are the the risk

1385
00:55:55,920 --> 00:55:59,440
constraints specified by the individual

1386
00:55:57,760 --> 00:56:02,319
parties

1387
00:55:59,440 --> 00:56:05,680
and they are guaranteed to be uh block

1388
00:56:02,319 --> 00:56:08,960
diagonal right because each if I have a

1389
00:56:05,680 --> 00:56:10,720
particular hedge say the hedge a b right

1390
00:56:08,960 --> 00:56:12,960
that's only going to affect the risk

1391
00:56:10,720 --> 00:56:14,640
between party A and party B right at

1392
00:56:12,960 --> 00:56:16,319
worst case and then the hedge the hedges

1393
00:56:14,640 --> 00:56:18,400
between A and C they're only going to

1394
00:56:16,319 --> 00:56:19,680
affect the risk between parties A and C

1395
00:56:18,400 --> 00:56:22,640
right so I'm definitely going to get a

1396
00:56:19,680 --> 00:56:24,000
block diagonal matrix down down here and

1397
00:56:22,640 --> 00:56:26,000
everything else is going to be zero. So

1398
00:56:24,000 --> 00:56:28,160
the vast majority is going to be zero.

1399
00:56:26,000 --> 00:56:30,160
And if I pick these NDF trades as well,

1400
00:56:28,160 --> 00:56:32,319
right, and those NDF trades only have

1401
00:56:30,160 --> 00:56:33,280
exposure to one risk factor themselves,

1402
00:56:32,319 --> 00:56:35,280
I'm just going to get a straight

1403
00:56:33,280 --> 00:56:36,720
diagonal matrix here, right? And

1404
00:56:35,280 --> 00:56:38,799
obviously inverting a straight diagonal

1405
00:56:36,720 --> 00:56:40,319
matrix is trivially easy, right? So I've

1406
00:56:38,799 --> 00:56:42,559
got a bit at the top, which makes it a

1407
00:56:40,319 --> 00:56:45,040
bit more complicated, but it's a little

1408
00:56:42,559 --> 00:56:47,040
bit at the top plus basically a massive

1409
00:56:45,040 --> 00:56:49,119
big diagonal matrix, right? That's

1410
00:56:47,040 --> 00:56:51,280
called a dancing wolf uh structure and

1411
00:56:49,119 --> 00:56:53,280
it's it's there are techniques known to

1412
00:56:51,280 --> 00:56:57,720
factoriize and invert those kind of

1413
00:56:53,280 --> 00:56:57,720
things. Okay.

1414
00:56:58,160 --> 00:57:02,559
So then I like this slide. I think this

1415
00:57:00,319 --> 00:57:04,640
is one slide I've used all three years.

1416
00:57:02,559 --> 00:57:08,319
Uh the problems that you get into in

1417
00:57:04,640 --> 00:57:12,160
real life are not solving the uh kind of

1418
00:57:08,319 --> 00:57:13,680
uh um the big minimization problem. You

1419
00:57:12,160 --> 00:57:16,799
just literally write down the math that

1420
00:57:13,680 --> 00:57:21,119
you want. more or less plug that into

1421
00:57:16,799 --> 00:57:22,880
the uh the the the solver, right? But in

1422
00:57:21,119 --> 00:57:25,200
real life, you get situations where

1423
00:57:22,880 --> 00:57:26,880
you've got nearly parallel risks. You

1424
00:57:25,200 --> 00:57:29,839
have two trades which are nearly the

1425
00:57:26,880 --> 00:57:31,760
same, right? Um but not quite exactly

1426
00:57:29,839 --> 00:57:34,400
the same or can't be represented exactly

1427
00:57:31,760 --> 00:57:36,559
the same on a on a computer. So this

1428
00:57:34,400 --> 00:57:38,880
example here, right? If I really wanted

1429
00:57:36,559 --> 00:57:40,960
to solve this this first equation here,

1430
00:57:38,880 --> 00:57:42,960
right? Obviously, everyone hopefully you

1431
00:57:40,960 --> 00:57:44,319
can see that there's essentially there's

1432
00:57:42,960 --> 00:57:46,720
there's lots of solutions to that,

1433
00:57:44,319 --> 00:57:49,280
right? Uh w with this, but you can't

1434
00:57:46,720 --> 00:57:51,920
represent a third properly on a

1435
00:57:49,280 --> 00:57:53,440
computer, right? So if you actually

1436
00:57:51,920 --> 00:57:55,359
tried to represent that on a computer,

1437
00:57:53,440 --> 00:57:58,559
what you might end up with, for example,

1438
00:57:55,359 --> 00:58:00,960
instead of putting a third uh a third x1

1439
00:57:58,559 --> 00:58:02,640
plus a third y1 as your second equation,

1440
00:58:00,960 --> 00:58:09,119
you might end up with this thing here

1441
00:58:02,640 --> 00:58:13,359
333 uh x1, sorry 333 x1 plus 333 y1,

1442
00:58:09,119 --> 00:58:15,920
right? And that has this solution 01,

1443
00:58:13,359 --> 00:58:17,760
but you make a tiny tiny change to that

1444
00:58:15,920 --> 00:58:21,680
thing, right? So all I did was I flipped

1445
00:58:17,760 --> 00:58:23,040
over uh the um solution here instead of

1446
00:58:21,680 --> 00:58:24,799
having three threes at the end having

1447
00:58:23,040 --> 00:58:26,559
four threes at the end. And instead of

1448
00:58:24,799 --> 00:58:29,440
getting a solution 01, I've now got a

1449
00:58:26,559 --> 00:58:32,079
solution one zero. Right? And if I make

1450
00:58:29,440 --> 00:58:34,720
another small change uh to those things,

1451
00:58:32,079 --> 00:58:37,200
it says instead of I'm going to get 3,

1452
00:58:34,720 --> 00:58:41,119
right? Then that has a single solution

1453
00:58:37,200 --> 00:58:42,960
of minus 110 111. Right? That's that's

1454
00:58:41,119 --> 00:58:45,040
that's that's the solution to that that

1455
00:58:42,960 --> 00:58:46,799
problem. Now it's highly plausible. I

1456
00:58:45,040 --> 00:58:48,559
might also say well I want all these x's

1457
00:58:46,799 --> 00:58:50,799
to be positive right that might be a

1458
00:58:48,559 --> 00:58:53,040
thing in there and so entirely due to

1459
00:58:50,799 --> 00:58:54,720
numerical noise it will say if I want x

1460
00:58:53,040 --> 00:58:58,319
to be positive but the only solution to

1461
00:58:54,720 --> 00:58:59,280
this problem is minus 110 111 um any

1462
00:58:58,319 --> 00:59:03,200
systems going to go well that's

1463
00:58:59,280 --> 00:59:05,119
infeasible and so refuse to solve it and

1464
00:59:03,200 --> 00:59:06,559
so the problems that we get into real

1465
00:59:05,119 --> 00:59:08,480
life is trying to understand these

1466
00:59:06,559 --> 00:59:10,640
things and coming up with techniques to

1467
00:59:08,480 --> 00:59:14,160
remove these kind of situations from the

1468
00:59:10,640 --> 00:59:16,160
from from from the system right um

1469
00:59:14,160 --> 00:59:18,480
rather rather than trying to actually

1470
00:59:16,160 --> 00:59:22,400
solve uh sort of convex optimization

1471
00:59:18,480 --> 00:59:24,960
problems in in their general form. Um

1472
00:59:22,400 --> 00:59:27,440
so there um this is the same thing as

1473
00:59:24,960 --> 00:59:29,520
before except now for the FX delta the

1474
00:59:27,440 --> 00:59:32,720
full kind of FX delta problem we're up

1475
00:59:29,520 --> 00:59:35,359
to 48 cores now. Um and you can see here

1476
00:59:32,720 --> 00:59:37,520
it really was 114,000

1477
00:59:35,359 --> 00:59:40,319
100,000 by 100,000 matrix right is what

1478
00:59:37,520 --> 00:59:42,319
we ended up trying to solve. Um it's

1479
00:59:40,319 --> 00:59:45,280
worth noting this um kind of presolve

1480
00:59:42,319 --> 00:59:47,520
thing here removed close to half of it.

1481
00:59:45,280 --> 00:59:48,799
Right? What presolve is is sometimes you

1482
00:59:47,520 --> 00:59:50,319
get all these different constraints and

1483
00:59:48,799 --> 00:59:52,079
you have them in there and you end up

1484
00:59:50,319 --> 00:59:53,760
with a constraint that says X1 is

1485
00:59:52,079 --> 00:59:56,640
greater than one and another one that

1486
00:59:53,760 --> 00:59:57,920
says X1 is greater than two, right? So

1487
00:59:56,640 --> 00:59:59,359
you might as well chuck out the first

1488
00:59:57,920 --> 01:00:00,799
constraint and say well if X1 is greater

1489
00:59:59,359 --> 01:00:02,480
than one and it's greater than two,

1490
01:00:00,799 --> 01:00:04,400
chuck out the first one and just keep

1491
01:00:02,480 --> 01:00:06,400
the X1 is greater than two uh

1492
01:00:04,400 --> 01:00:10,079
constraint. And that happens a lot and

1493
01:00:06,400 --> 01:00:12,880
so you can massively reduce the size. Um

1494
01:00:10,079 --> 01:00:14,400
and we get down to a thing like this. Uh

1495
01:00:12,880 --> 01:00:18,160
but you can see even this this problem

1496
01:00:14,400 --> 01:00:21,040
we can solve it in um uh 11 seconds

1497
01:00:18,160 --> 01:00:22,480
right and with very very few iterations

1498
01:00:21,040 --> 01:00:25,920
which is basically a testament to the

1499
01:00:22,480 --> 01:00:28,240
the amazing power of Newton Rafson

1500
01:00:25,920 --> 01:00:30,640
quadratic convergence.

1501
01:00:28,240 --> 01:00:33,040
Um so what happens when you try and

1502
01:00:30,640 --> 01:00:34,960
solve it? Um

1503
01:00:33,040 --> 01:00:36,400
this is kind of how you have the initial

1504
01:00:34,960 --> 01:00:38,400
risk and this is with the optimized risk

1505
01:00:36,400 --> 01:00:40,960
on the right hand side as you might

1506
01:00:38,400 --> 01:00:42,559
expect it tries to form it tries to

1507
01:00:40,960 --> 01:00:43,839
basically get it that I don't have some

1508
01:00:42,559 --> 01:00:45,359
positive numbers and some negative

1509
01:00:43,839 --> 01:00:47,440
numbers it tries to nest all the risk

1510
01:00:45,359 --> 01:00:51,040
together right uh what you can kind of

1511
01:00:47,440 --> 01:00:54,240
see uh here um

1512
01:00:51,040 --> 01:00:56,319
you try this on a 20 uh party system

1513
01:00:54,240 --> 01:00:58,559
again just removing all the constraints

1514
01:00:56,319 --> 01:01:00,480
again it can remove almost all the

1515
01:00:58,559 --> 01:01:02,559
margin between the different systems and

1516
01:01:00,480 --> 01:01:05,119
you end up with either if for any given

1517
01:01:02,559 --> 01:01:06,880
row either pink stuff or green stuff.

1518
01:01:05,119 --> 01:01:08,640
It's either positive or negative. But

1519
01:01:06,880 --> 01:01:10,319
you don't have pink and green stuff in

1520
01:01:08,640 --> 01:01:11,920
the same row or in the same column.

1521
01:01:10,319 --> 01:01:13,440
Right? What that says is it managed to

1522
01:01:11,920 --> 01:01:16,160
get rid of all the situations where I

1523
01:01:13,440 --> 01:01:18,240
was up I was up here and down there. I

1524
01:01:16,160 --> 01:01:19,680
just want to be up or down. Right? So

1525
01:01:18,240 --> 01:01:21,359
I've netted all the risk together.

1526
01:01:19,680 --> 01:01:24,720
That's what the system was basically

1527
01:01:21,359 --> 01:01:27,839
trying trying to trying trying to do.

1528
01:01:24,720 --> 01:01:29,200
Okay. Um you try it on a real system

1529
01:01:27,839 --> 01:01:31,280
with all the constraints and stuff like

1530
01:01:29,200 --> 01:01:32,799
that. it's less convincing what it was

1531
01:01:31,280 --> 01:01:35,280
uh trying trying trying trying to do

1532
01:01:32,799 --> 01:01:40,079
because the constraints hold this stuff

1533
01:01:35,280 --> 01:01:41,839
um in in check here right with there um

1534
01:01:40,079 --> 01:01:44,160
just out of interest this this kind of

1535
01:01:41,839 --> 01:01:46,880
diagonal line down the front that's

1536
01:01:44,160 --> 01:01:48,400
essentially the margin versus itself

1537
01:01:46,880 --> 01:01:50,559
right so you obviously cannot pay a

1538
01:01:48,400 --> 01:01:54,400
margin to yourself which is why you get

1539
01:01:50,559 --> 01:01:57,040
uh a kind of blank sort of line down the

1540
01:01:54,400 --> 01:01:58,559
diagonal and the square stuff in the

1541
01:01:57,040 --> 01:02:01,599
middle I originally thought that was

1542
01:01:58,559 --> 01:02:04,240
kind of some bug Um but what that is is

1543
01:02:01,599 --> 01:02:06,400
trading between inter affiliates of the

1544
01:02:04,240 --> 01:02:07,920
same of the same entity right so

1545
01:02:06,400 --> 01:02:09,680
somebody like JP Morgan or Bank of

1546
01:02:07,920 --> 01:02:12,079
America will have lots of entities some

1547
01:02:09,680 --> 01:02:14,079
of which don't pay margin to to each

1548
01:02:12,079 --> 01:02:15,839
other what I probably did here was I

1549
01:02:14,079 --> 01:02:18,400
ordered all the entities out

1550
01:02:15,839 --> 01:02:20,880
alphabetically right so this is probably

1551
01:02:18,400 --> 01:02:23,040
I'm guessing given I did that that's

1552
01:02:20,880 --> 01:02:24,880
probably all the inter affiliates of JP

1553
01:02:23,040 --> 01:02:27,040
Morgan is the one in the middle since

1554
01:02:24,880 --> 01:02:29,599
that's uh or maybe it's Morgan Stanley

1555
01:02:27,040 --> 01:02:31,359
it'll be some some company which has got

1556
01:02:29,599 --> 01:02:34,079
a letter roughly in the middle of the

1557
01:02:31,359 --> 01:02:36,960
alphabet with many entities not trading

1558
01:02:34,079 --> 01:02:39,839
margin versus each other.

1559
01:02:36,960 --> 01:02:42,559
Uh that

1560
01:02:39,839 --> 01:02:44,559
um it's another example doing interest

1561
01:02:42,559 --> 01:02:47,680
rate stuff.

1562
01:02:44,559 --> 01:02:49,839
So what we've discussed so far is

1563
01:02:47,680 --> 01:02:51,440
solving the optimization problems. It

1564
01:02:49,839 --> 01:02:53,280
has to be feasible which means it

1565
01:02:51,440 --> 01:02:55,440
satisfies all the constraints and it has

1566
01:02:53,280 --> 01:02:59,599
to be optimal right which means it finds

1567
01:02:55,440 --> 01:03:01,760
a good margin saving right um but on top

1568
01:02:59,599 --> 01:03:04,319
of that it's interesting to try and make

1569
01:03:01,760 --> 01:03:07,359
them nice right and try and make them

1570
01:03:04,319 --> 01:03:09,440
fair. So what a nice uh thing would be

1571
01:03:07,359 --> 01:03:11,040
is that you don't really want to have

1572
01:03:09,440 --> 01:03:13,440
horrible looking notionals. You don't

1573
01:03:11,040 --> 01:03:14,960
want to have to have a trade with some

1574
01:03:13,440 --> 01:03:17,280
like complicated notional in there.

1575
01:03:14,960 --> 01:03:19,440
you'd like to just have trade a 100

1576
01:03:17,280 --> 01:03:21,920
million of this or 200 million of that,

1577
01:03:19,440 --> 01:03:25,280
right? The biggest amount of headache we

1578
01:03:21,920 --> 01:03:28,480
got into ever was trading with these NDF

1579
01:03:25,280 --> 01:03:31,839
uh FX trades where we would trade it

1580
01:03:28,480 --> 01:03:35,520
with a dollar notional with some like

1581
01:03:31,839 --> 01:03:38,079
200,000 million.74

1582
01:03:35,520 --> 01:03:40,400
and then something else with the euros

1583
01:03:38,079 --> 01:03:42,720
uh like 0.53 in the euros and then we

1584
01:03:40,400 --> 01:03:46,240
compute the FX rate which would be the

1585
01:03:42,720 --> 01:03:48,400
the the uh one divided by the other and

1586
01:03:46,240 --> 01:03:51,359
the FX rate would come out to be a like

1587
01:03:48,400 --> 01:03:53,440
15 decimal point number and everything

1588
01:03:51,359 --> 01:03:55,839
would be fine and then we give it to the

1589
01:03:53,440 --> 01:03:57,200
uh the banks and they would complain and

1590
01:03:55,839 --> 01:03:59,200
they would say well our system only

1591
01:03:57,200 --> 01:04:01,039
handles six decimal places or eight

1592
01:03:59,200 --> 01:04:02,880
decimal places in the trading system and

1593
01:04:01,039 --> 01:04:05,039
when I do that and I put six decimal

1594
01:04:02,880 --> 01:04:06,960
places in the FX rate it changes my

1595
01:04:05,039 --> 01:04:10,079
euron notional right it gets a little

1596
01:04:06,960 --> 01:04:13,359
bit off and so we ended up having to put

1597
01:04:10,079 --> 01:04:16,000
notionals in that were round numbers of

1598
01:04:13,359 --> 01:04:19,119
dollars and they came out as exact round

1599
01:04:16,000 --> 01:04:21,839
numbers of euros using a four decimal

1600
01:04:19,119 --> 01:04:26,160
base FX rate or a six decimal point uh

1601
01:04:21,839 --> 01:04:27,920
FX rate and that turns out to be quite

1602
01:04:26,160 --> 01:04:29,920
tricky because you need to round all

1603
01:04:27,920 --> 01:04:33,200
these numbers right and you can't just

1604
01:04:29,920 --> 01:04:35,599
take a solution right and just round it

1605
01:04:33,200 --> 01:04:37,520
to the nearest 10 right so if I take if

1606
01:04:35,599 --> 01:04:41,200
I have a party let's say I've got a and

1607
01:04:37,520 --> 01:04:43,280
I'm I'm selling uh I'm selling eight

1608
01:04:41,200 --> 01:04:45,680
units of something to one person and

1609
01:04:43,280 --> 01:04:47,359
I've offset that by buying four units

1610
01:04:45,680 --> 01:04:50,160
from a second person and four units from

1611
01:04:47,359 --> 01:04:52,319
a third person everything is flat. But

1612
01:04:50,160 --> 01:04:53,920
if I round everything to the nearest 10,

1613
01:04:52,319 --> 01:04:56,640
right, then I've rounded the eight to

1614
01:04:53,920 --> 01:04:59,039
10, right? And I round the both fours

1615
01:04:56,640 --> 01:05:00,880
down to zero. So now I'm no longer flat.

1616
01:04:59,039 --> 01:05:02,880
So you can't do this rounding as a

1617
01:05:00,880 --> 01:05:06,160
post-processing step afterwards because

1618
01:05:02,880 --> 01:05:08,240
it breaks the flatness uh in the in in

1619
01:05:06,160 --> 01:05:10,319
the whole system. So you have to do it

1620
01:05:08,240 --> 01:05:11,839
as part of the optimization. If you do

1621
01:05:10,319 --> 01:05:13,520
it as part of the optimization, that

1622
01:05:11,839 --> 01:05:15,839
makes it into a mixed integer problem

1623
01:05:13,520 --> 01:05:20,000
and that um makes it considerably

1624
01:05:15,839 --> 01:05:21,920
considerably harder, right? Um we also

1625
01:05:20,000 --> 01:05:23,200
people also want by nice they want like

1626
01:05:21,920 --> 01:05:24,559
a small number of trades. They don't

1627
01:05:23,200 --> 01:05:26,559
want to have to trade thousands and

1628
01:05:24,559 --> 01:05:28,799
thousands of trades in order to get some

1629
01:05:26,559 --> 01:05:30,480
of this uh margin saving. They like to

1630
01:05:28,799 --> 01:05:34,400
have a small number of trades. We talk

1631
01:05:30,480 --> 01:05:37,039
about it as notional efficiency. Um and

1632
01:05:34,400 --> 01:05:38,799
there are other advantages of CCP as I

1633
01:05:37,039 --> 01:05:40,720
mentioned earlier

1634
01:05:38,799 --> 01:05:42,319
um in addition to just the netting. And

1635
01:05:40,720 --> 01:05:44,880
so there's some advantage of saying,

1636
01:05:42,319 --> 01:05:49,200
well, I want to put I I'd like to put

1637
01:05:44,880 --> 01:05:51,039
more trades into the CCP, right? Um, and

1638
01:05:49,200 --> 01:05:52,799
so you might do some that might be a

1639
01:05:51,039 --> 01:05:54,799
nice thing to have, right? For other

1640
01:05:52,799 --> 01:05:56,480
reasons not directly related to initial

1641
01:05:54,799 --> 01:05:59,280
margin. So you can add all these

1642
01:05:56,480 --> 01:06:00,640
niceness features into the system. The

1643
01:05:59,280 --> 01:06:02,240
problem with adding the nicest things

1644
01:06:00,640 --> 01:06:04,079
like round numbers, small numbers like

1645
01:06:02,240 --> 01:06:06,400
trade counts, these these kind of

1646
01:06:04,079 --> 01:06:09,599
things, they all make the basically

1647
01:06:06,400 --> 01:06:12,720
continuous problem into a mixed integer

1648
01:06:09,599 --> 01:06:17,440
problem which is which is hard to uh

1649
01:06:12,720 --> 01:06:20,640
which is hard to solve. Um and

1650
01:06:17,440 --> 01:06:23,280
so skip and then fairness

1651
01:06:20,640 --> 01:06:24,799
um is well the first question is what

1652
01:06:23,280 --> 01:06:27,520
does it mean? What does what does

1653
01:06:24,799 --> 01:06:30,720
fairness mean uh in a optimization

1654
01:06:27,520 --> 01:06:33,039
problem? So you have this example

1655
01:06:30,720 --> 01:06:35,520
hopefully you can see this is a four

1656
01:06:33,039 --> 01:06:38,240
back to the triangle system right four

1657
01:06:35,520 --> 01:06:41,039
party system okay every it's kind of

1658
01:06:38,240 --> 01:06:43,680
symmetric between A and D there are four

1659
01:06:41,039 --> 01:06:46,000
there are three possible things you can

1660
01:06:43,680 --> 01:06:49,039
do all of which have the same kind of

1661
01:06:46,000 --> 01:06:52,400
overall saving here right essentially

1662
01:06:49,039 --> 01:06:54,720
you can ignore D right and solve the ABC

1663
01:06:52,400 --> 01:06:57,280
problem in which case D gets no saving

1664
01:06:54,720 --> 01:07:00,000
right you could ignore you could ignore

1665
01:06:57,280 --> 01:07:03,280
A right and get the and get the same

1666
01:07:00,000 --> 01:07:06,799
saving right or you could kind of split

1667
01:07:03,280 --> 01:07:08,160
the saving between uh A and D right so

1668
01:07:06,799 --> 01:07:09,680
they're the three different scenarios

1669
01:07:08,160 --> 01:07:11,359
that you can get right so I put them

1670
01:07:09,680 --> 01:07:13,119
down in the table at the bottom so

1671
01:07:11,359 --> 01:07:15,200
scenario one is the ignoring D this is

1672
01:07:13,119 --> 01:07:17,520
the saving that you get A gets a saving

1673
01:07:15,200 --> 01:07:20,640
of four ABC all get a saving of four

1674
01:07:17,520 --> 01:07:24,319
right D gets nothing right

1675
01:07:20,640 --> 01:07:27,920
um so this is where this is you can

1676
01:07:24,319 --> 01:07:30,559
argue that's not fair Right? Because D

1677
01:07:27,920 --> 01:07:32,319
gets gets uh gets nothing there. Right?

1678
01:07:30,559 --> 01:07:34,640
You can argue scenario two is not fair

1679
01:07:32,319 --> 01:07:37,119
because A gets nothing. Right? You can

1680
01:07:34,640 --> 01:07:42,160
argue that of these scenarios

1681
01:07:37,119 --> 01:07:44,640
um scenario three is the fairest, right?

1682
01:07:42,160 --> 01:07:47,280
Just intuitively, right? It still might

1683
01:07:44,640 --> 01:07:50,400
not be the fairest because well, why did

1684
01:07:47,280 --> 01:07:53,280
A get two and B D get two? But B and C

1685
01:07:50,400 --> 01:07:55,839
got their full four allocation, right?

1686
01:07:53,280 --> 01:07:59,359
So the concept of fairness is not a

1687
01:07:55,839 --> 01:08:02,079
well- definfined uh one. One thing you

1688
01:07:59,359 --> 01:08:06,799
can look at, right,

1689
01:08:02,079 --> 01:08:09,359
um, is Whoops. Have a two-step system,

1690
01:08:06,799 --> 01:08:12,079
right? So, you first of all figure out

1691
01:08:09,359 --> 01:08:15,200
what is the best possible saving that

1692
01:08:12,079 --> 01:08:17,199
any one party can get, right? So, the

1693
01:08:15,200 --> 01:08:19,839
best possible saving that all these

1694
01:08:17,199 --> 01:08:21,040
people can get is always four, right?

1695
01:08:19,839 --> 01:08:23,600
And so you do a whole bunch of

1696
01:08:21,040 --> 01:08:25,600
optimizations where you ignore everybody

1697
01:08:23,600 --> 01:08:27,279
else and just try and optimize for A,

1698
01:08:25,600 --> 01:08:29,839
then just optimize for B, then optimize

1699
01:08:27,279 --> 01:08:31,600
for C, then optimize for D. Now I get

1700
01:08:29,839 --> 01:08:34,159
the best possible thing that each one

1701
01:08:31,600 --> 01:08:37,199
can be subject to all of the constraints

1702
01:08:34,159 --> 01:08:38,640
still being there. Right? When I know

1703
01:08:37,199 --> 01:08:40,480
that, now I'm going to say what I'm

1704
01:08:38,640 --> 01:08:43,359
actually going to solve is how do I

1705
01:08:40,480 --> 01:08:45,679
minimize the square of the difference

1706
01:08:43,359 --> 01:08:46,880
from my actual solution to those things.

1707
01:08:45,679 --> 01:08:49,679
Right? Right. So I've got a le squares

1708
01:08:46,880 --> 01:08:51,600
problem that's uh that's uh in there

1709
01:08:49,679 --> 01:08:52,880
which is this this problem here and

1710
01:08:51,600 --> 01:08:55,199
that's the things and I'm going to do

1711
01:08:52,880 --> 01:08:57,679
one more optimization at the end when I

1712
01:08:55,199 --> 01:08:59,759
solve that problem right and I'm going

1713
01:08:57,679 --> 01:09:01,839
to say that's the answer that I've that

1714
01:08:59,759 --> 01:09:04,319
I've got and you can see if I did that

1715
01:09:01,839 --> 01:09:06,400
in this case clearly

1716
01:09:04,319 --> 01:09:07,679
um with the squared scenario three is

1717
01:09:06,400 --> 01:09:10,000
going to definitely come out as being

1718
01:09:07,679 --> 01:09:13,199
the best uh solution is b and c will be

1719
01:09:10,000 --> 01:09:17,359
zero in those things um and then uh for

1720
01:09:13,199 --> 01:09:19,759
scenario three I'll get uh uh four plus

1721
01:09:17,359 --> 01:09:23,040
four right whereas in scenario one and

1722
01:09:19,759 --> 01:09:25,279
scenario two I will get uh a 16 right

1723
01:09:23,040 --> 01:09:27,359
from the from the square right so if I

1724
01:09:25,279 --> 01:09:29,440
were to do that on this case right it

1725
01:09:27,359 --> 01:09:31,759
would this would this would be an

1726
01:09:29,440 --> 01:09:34,719
algorithm that would deterministically

1727
01:09:31,759 --> 01:09:37,199
give me scenario three as as the fairest

1728
01:09:34,719 --> 01:09:40,159
um but there are other ways of of

1729
01:09:37,199 --> 01:09:43,040
defining fairness um and I don't think

1730
01:09:40,159 --> 01:09:44,640
it's a wellestablished kind of uh uh

1731
01:09:43,040 --> 01:09:46,319
thing yet I think it's the single most

1732
01:09:44,640 --> 01:09:49,040
interesting problem uh that we've got

1733
01:09:46,319 --> 01:09:53,120
kind of in the optimization uh uh kind

1734
01:09:49,040 --> 01:09:54,640
of kind of space. Um and then I skip

1735
01:09:53,120 --> 01:09:56,400
over these are just some pictures of

1736
01:09:54,640 --> 01:09:58,640
what we've kind of really got as terms

1737
01:09:56,400 --> 01:10:00,800
of uh saving. The more interesting one

1738
01:09:58,640 --> 01:10:02,960
is really this right which is showing

1739
01:10:00,800 --> 01:10:04,480
the kind of network effect right so you

1740
01:10:02,960 --> 01:10:07,520
can kind of expect obviously that as I

1741
01:10:04,480 --> 01:10:09,520
put more and more uh uh banks or parties

1742
01:10:07,520 --> 01:10:11,520
into the system right the saving should

1743
01:10:09,520 --> 01:10:14,640
go up right that's kind of a reasonable

1744
01:10:11,520 --> 01:10:17,520
thing but more than that um the saving

1745
01:10:14,640 --> 01:10:20,640
divided by the initial that also goes up

1746
01:10:17,520 --> 01:10:22,640
right so you get um not just the total

1747
01:10:20,640 --> 01:10:25,760
saving in the system goes up but the

1748
01:10:22,640 --> 01:10:27,920
total the the the the

1749
01:10:25,760 --> 01:10:29,920
efficiency increases the more people you

1750
01:10:27,920 --> 01:10:31,679
add into the the system. I wouldn't put

1751
01:10:29,920 --> 01:10:34,320
too much faith into whether it's really

1752
01:10:31,679 --> 01:10:37,280
linear or whether it's a kind of not

1753
01:10:34,320 --> 01:10:39,360
linear uh uh thing in there. But the the

1754
01:10:37,280 --> 01:10:41,600
there was clearly a drift upwards right

1755
01:10:39,360 --> 01:10:44,000
in these things which basically says

1756
01:10:41,600 --> 01:10:46,320
that if you want to do this the most

1757
01:10:44,000 --> 01:10:48,400
effective thing you can do is get big

1758
01:10:46,320 --> 01:10:51,360
networks of people and big networks of

1759
01:10:48,400 --> 01:10:52,880
people are beneficial to everybody uh in

1760
01:10:51,360 --> 01:10:57,440
in the system. That's basically the

1761
01:10:52,880 --> 01:11:01,280
story uh of that of that picture. Uh

1762
01:10:57,440 --> 01:11:02,719
that's there. I think that is the end.

1763
01:11:01,280 --> 01:11:04,080
Yeah. So that's just a quick summary. We

1764
01:11:02,719 --> 01:11:06,239
talked about value at risk and expected

1765
01:11:04,080 --> 01:11:08,640
shortfall. Talked about the diff uh

1766
01:11:06,239 --> 01:11:10,320
centrally cleared and bilateral.

1767
01:11:08,640 --> 01:11:12,400
We talked about counterparty risk. What

1768
01:11:10,320 --> 01:11:13,679
variation margin is initial margin. What

1769
01:11:12,400 --> 01:11:16,320
we're really trying to do is optimize

1770
01:11:13,679 --> 01:11:18,400
this initial margin. Uh that basically

1771
01:11:16,320 --> 01:11:20,480
comes down to doing constrained convex

1772
01:11:18,400 --> 01:11:22,000
optimization. The difficulty in

1773
01:11:20,480 --> 01:11:24,880
constrained optimization is really all

1774
01:11:22,000 --> 01:11:27,440
the numerical issues uh that you've got.

1775
01:11:24,880 --> 01:11:29,760
Um and actually the interesting problems

1776
01:11:27,440 --> 01:11:32,000
are not it's too much solving the

1777
01:11:29,760 --> 01:11:34,320
feasibility and optimality bit but how

1778
01:11:32,000 --> 01:11:37,040
do you add the niceness and the fairness

1779
01:11:34,320 --> 01:11:39,040
on top on top of that.

1780
01:11:37,040 --> 01:11:41,120
Hopefully that is the end of your

1781
01:11:39,040 --> 01:11:45,159
slides.

1782
01:11:41,120 --> 01:11:45,159
There you go. Thank you very much.

1783
01:11:45,330 --> 01:11:48,430
[Applause]

1784
01:11:49,760 --> 01:11:56,800
that make sense to anybody or

1785
01:11:53,040 --> 01:11:58,080
anyone have any questions?

1786
01:11:56,800 --> 01:12:00,320
>> Go ahead.

1787
01:11:58,080 --> 01:12:02,000
>> Yeah, a question about the sim that you

1788
01:12:00,320 --> 01:12:04,719
mentioned that like

1789
01:12:02,000 --> 01:12:06,480
>> it's going to like the new that's coming

1790
01:12:04,719 --> 01:12:07,120
out in you said.

1791
01:12:06,480 --> 01:12:08,880
>> Yeah.

1792
01:12:07,120 --> 01:12:12,880
>> Is going to be the first one where it's

1793
01:12:08,880 --> 01:12:15,520
not using um data from like

1794
01:12:12,880 --> 01:12:16,560
like a stressful time for example.

1795
01:12:15,520 --> 01:12:19,600
>> Yeah. Yeah. Yeah.

1796
01:12:16,560 --> 01:12:22,960
>> Uh I was wondering like what goes into

1797
01:12:19,600 --> 01:12:24,640
like that data cut off and then what

1798
01:12:22,960 --> 01:12:29,040
implications do you think that will have

1799
01:12:24,640 --> 01:12:32,560
for like just overall behavior

1800
01:12:29,040 --> 01:12:34,960
or just affecting the economy?

1801
01:12:32,560 --> 01:12:36,800
So I don't think it will necessar well

1802
01:12:34,960 --> 01:12:38,000
the effect on the economy is going to be

1803
01:12:36,800 --> 01:12:39,520
well potentially there's going to be a

1804
01:12:38,000 --> 01:12:42,159
lot of margin released back into the

1805
01:12:39,520 --> 01:12:44,159
system right so essentially margin is

1806
01:12:42,159 --> 01:12:45,920
money that cannot be used for trading

1807
01:12:44,159 --> 01:12:48,400
right it's essentially locked away in in

1808
01:12:45,920 --> 01:12:50,000
in in sort of segregated accounts so the

1809
01:12:48,400 --> 01:12:51,040
release of all that margin into the

1810
01:12:50,000 --> 01:12:52,719
system means there's more margin

1811
01:12:51,040 --> 01:12:54,320
available for trading right that's

1812
01:12:52,719 --> 01:12:57,920
that's kind of the effect that it would

1813
01:12:54,320 --> 01:13:00,159
have on the on the system um in terms of

1814
01:12:57,920 --> 01:13:01,520
the kind of choice of parameters right I

1815
01:13:00,159 --> 01:13:03,360
think effectively must show that really

1816
01:13:01,520 --> 01:13:05,199
it's a sort roughly a two-year look

1817
01:13:03,360 --> 01:13:06,960
back, right? Similar to what I was doing

1818
01:13:05,199 --> 01:13:09,679
in the kind of toy examples that I had

1819
01:13:06,960 --> 01:13:10,880
earlier, right? So, this this is this is

1820
01:13:09,679 --> 01:13:12,080
even though it's looking at other

1821
01:13:10,880 --> 01:13:16,480
different things, the stress kind of

1822
01:13:12,080 --> 01:13:17,920
ended roughly 2021 22ish, something like

1823
01:13:16,480 --> 01:13:20,480
that. So, basically, it's going to be

1824
01:13:17,920 --> 01:13:23,520
looking at a at a at a region that's say

1825
01:13:20,480 --> 01:13:25,199
from 2021 or 2022 beyond, right? And

1826
01:13:23,520 --> 01:13:28,159
that's the reason that all these big

1827
01:13:25,199 --> 01:13:31,440
shocks that happened in 2020, they're

1828
01:13:28,159 --> 01:13:34,480
too far in the past uh to be to be

1829
01:13:31,440 --> 01:13:35,760
counted in the correlation uh these

1830
01:13:34,480 --> 01:13:37,760
days. Now, of course, there might be

1831
01:13:35,760 --> 01:13:40,480
some more. This the exact same thing was

1832
01:13:37,760 --> 01:13:42,719
about to happen in in 2018 2019 just

1833
01:13:40,480 --> 01:13:44,640
before that happened and they would also

1834
01:13:42,719 --> 01:13:46,800
uh been about to say, well, let's just

1835
01:13:44,640 --> 01:13:50,080
smooth it smooth it all out. And then

1836
01:13:46,800 --> 01:13:52,000
what did happen was then all these

1837
01:13:50,080 --> 01:13:53,679
shocks came in and people decided that

1838
01:13:52,000 --> 01:13:56,880
what SIM was doing was massively

1839
01:13:53,679 --> 01:13:58,480
underestimating the the VAR and the fact

1840
01:13:56,880 --> 01:14:00,719
that they were only reccalibrating on a

1841
01:13:58,480 --> 01:14:02,800
yearly basis was kind of problematic,

1842
01:14:00,719 --> 01:14:04,480
right? Because they had to wait a whole

1843
01:14:02,800 --> 01:14:05,760
year and in fact a year and a bit

1844
01:14:04,480 --> 01:14:07,360
because of the timing they had in

1845
01:14:05,760 --> 01:14:10,560
December and the way they come out

1846
01:14:07,360 --> 01:14:12,960
before they could start including these

1847
01:14:10,560 --> 01:14:15,920
shocks that were um that happened in in

1848
01:14:12,960 --> 01:14:17,920
in in 2020. So actually as a result of

1849
01:14:15,920 --> 01:14:20,560
that they moved from a annual

1850
01:14:17,920 --> 01:14:23,280
recalibration process to a semi-reanual

1851
01:14:20,560 --> 01:14:26,239
process so that they could bring uh

1852
01:14:23,280 --> 01:14:29,360
these um these the effect of these

1853
01:14:26,239 --> 01:14:31,199
shocks in more quickly.

1854
01:14:29,360 --> 01:14:34,320
>> Is they the regulators

1855
01:14:31,199 --> 01:14:37,440
>> is the so it's the international uh swap

1856
01:14:34,320 --> 01:14:41,600
uh derivatives association. So there's a

1857
01:14:37,440 --> 01:14:43,120
panel they chair it is it's it's model

1858
01:14:41,600 --> 01:14:44,560
they're the ones who ultimately put put

1859
01:14:43,120 --> 01:14:46,719
that thing there. But there's a lot of

1860
01:14:44,560 --> 01:14:50,080
collaboration with various banks and

1861
01:14:46,719 --> 01:14:53,560
other other sort of uh parties and

1862
01:14:50,080 --> 01:14:53,560
interested parties.

1863
01:14:56,000 --> 01:14:59,000
>> Yeah.

1864
01:15:00,740 --> 01:15:03,840
[Music]

1865
01:15:07,120 --> 01:15:11,360
>> It's a different beta.

1866
01:15:08,960 --> 01:15:13,440
>> Uh yeah. So that's a beta in terms of

1867
01:15:11,360 --> 01:15:15,280
well this beta here is just a confidence

1868
01:15:13,440 --> 01:15:18,880
uh interval right so that's just saying

1869
01:15:15,280 --> 01:15:22,600
it's the beta is the I'm 99% confident I

1870
01:15:18,880 --> 01:15:22,600
won't lose more than this

1871
01:15:23,600 --> 01:15:28,239
>> yeah do you mind going back to the slide

1872
01:15:26,159 --> 01:15:30,159
you talk about

1873
01:15:28,239 --> 01:15:33,600
back testing or I guess the limitations

1874
01:15:30,159 --> 01:15:36,400
on back testing expected shortfall

1875
01:15:33,600 --> 01:15:38,719
>> uh yeah

1876
01:15:36,400 --> 01:15:43,199
>> hang on

1877
01:15:38,719 --> 01:15:45,920
that Yeah, I guess it was

1878
01:15:43,199 --> 01:15:48,960
um

1879
01:15:45,920 --> 01:15:50,400
I I guess in my

1880
01:15:48,960 --> 01:15:52,239
what are some ways that you can like

1881
01:15:50,400 --> 01:15:56,560
almost cut corners like make some

1882
01:15:52,239 --> 01:15:59,040
assumptions that allow you to calculate

1883
01:15:56,560 --> 01:16:02,480
um expected shortfall? What do you have

1884
01:15:59,040 --> 01:16:07,320
to assume for it to be possible? to be

1885
01:16:02,480 --> 01:16:07,320
possible to back test. Uh

1886
01:16:07,360 --> 01:16:12,000
>> well, you kind of have to make some

1887
01:16:09,520 --> 01:16:13,679
assumptions around the form of the tail,

1888
01:16:12,000 --> 01:16:15,760
right? So, if you were to say, well, the

1889
01:16:13,679 --> 01:16:17,360
tail is is is kind of flat, right? Or

1890
01:16:15,760 --> 01:16:18,880
you have some structure in that. I think

1891
01:16:17,360 --> 01:16:21,199
you could start to you could start to

1892
01:16:18,880 --> 01:16:24,560
say, does it fit in there? What what

1893
01:16:21,199 --> 01:16:27,199
normally happens in real life uh is that

1894
01:16:24,560 --> 01:16:29,520
regulators have moved from VAR for

1895
01:16:27,199 --> 01:16:31,600
saying well your actual initial margin

1896
01:16:29,520 --> 01:16:34,400
and capital should be based that used to

1897
01:16:31,600 --> 01:16:36,560
be VAR then it was stress VAR uh and now

1898
01:16:34,400 --> 01:16:39,440
it's moved to expected shortfall but

1899
01:16:36,560 --> 01:16:41,199
they still require you to back test VAR.

1900
01:16:39,440 --> 01:16:43,199
So what you generally do is you build a

1901
01:16:41,199 --> 01:16:45,600
model which contain which will will

1902
01:16:43,199 --> 01:16:47,040
predict both VAR and expected shortfall.

1903
01:16:45,600 --> 01:16:48,800
You compute the number using the

1904
01:16:47,040 --> 01:16:50,640
expected shortfall number and then you

1905
01:16:48,800 --> 01:16:51,920
back test the VAR because that's a lot

1906
01:16:50,640 --> 01:16:53,760
easier, right? And then you say, well,

1907
01:16:51,920 --> 01:16:55,040
I've built the model consistently and

1908
01:16:53,760 --> 01:16:56,560
all I did was apply a different

1909
01:16:55,040 --> 01:16:58,719
multiplier for the expected shortfall

1910
01:16:56,560 --> 01:17:01,440
versus the VAR. So if the VAR back test

1911
01:16:58,719 --> 01:17:05,000
properly, then I'm prepared to accept

1912
01:17:01,440 --> 01:17:05,000
the expected shortfall,

1913
01:17:05,199 --> 01:17:10,719
>> right? So if if you like assume a

1914
01:17:08,960 --> 01:17:12,239
different shape of the tails, yeah, then

1915
01:17:10,719 --> 01:17:15,760
theoretically that's like not

1916
01:17:12,239 --> 01:17:17,840
necessarily like a valid

1917
01:17:15,760 --> 01:17:20,560
um like statistical test

1918
01:17:17,840 --> 01:17:21,760
>> well it is but when you're back testing

1919
01:17:20,560 --> 01:17:25,280
you're back testing and you say well

1920
01:17:21,760 --> 01:17:27,920
what happened on the 23rd of December 20

1921
01:17:25,280 --> 01:17:29,280
2015 well there was no distribution

1922
01:17:27,920 --> 01:17:31,280
that's just whatever happened on that

1923
01:17:29,280 --> 01:17:33,440
date right so there's no distribution uh

1924
01:17:31,280 --> 01:17:37,120
there so you can't say it's difficult to

1925
01:17:33,440 --> 01:17:40,000
make an assumption about whether or not

1926
01:17:37,120 --> 01:17:42,159
that was kind of predicted or not

1927
01:17:40,000 --> 01:17:45,920
predicted because it just it it's a

1928
01:17:42,159 --> 01:17:47,440
single uh draw from the distribution as

1929
01:17:45,920 --> 01:17:48,480
opposed to the shape of the

1930
01:17:47,440 --> 01:17:49,600
distribution. It doesn't tell you

1931
01:17:48,480 --> 01:17:51,679
anything. You can make any assumption

1932
01:17:49,600 --> 01:17:53,679
you want about that about the the tail.

1933
01:17:51,679 --> 01:17:55,280
But because I've taken one number, it

1934
01:17:53,679 --> 01:17:58,159
doesn't really show me anything. Does

1935
01:17:55,280 --> 01:17:59,440
that does that make sense?

1936
01:17:58,159 --> 01:18:01,520
>> Yep.

1937
01:17:59,440 --> 01:18:03,760
>> I guess building up on that. So you

1938
01:18:01,520 --> 01:18:06,400
mentioned that you can like backpass on

1939
01:18:03,760 --> 01:18:08,800
both the shortfall and bar on bar

1940
01:18:06,400 --> 01:18:11,360
instead of the shortfall and that's like

1941
01:18:08,800 --> 01:18:13,520
kind of like p like and then helps you

1942
01:18:11,360 --> 01:18:16,560
like predict more accurately. Are these

1943
01:18:13,520 --> 01:18:19,679
model like accurate enough to account

1944
01:18:16,560 --> 01:18:24,239
for like the difference that

1945
01:18:19,679 --> 01:18:26,159
bar and are they precise enough

1946
01:18:24,239 --> 01:18:27,760
are they well it depends how you build

1947
01:18:26,159 --> 01:18:30,000
up the model right so essentially my

1948
01:18:27,760 --> 01:18:32,000
model here right the model wasn't really

1949
01:18:30,000 --> 01:18:34,800
a var model or an expected shortfall

1950
01:18:32,000 --> 01:18:37,040
model the model that I proposed here was

1951
01:18:34,800 --> 01:18:39,679
that everything is that that the daily

1952
01:18:37,040 --> 01:18:40,880
changes are normally distributed right

1953
01:18:39,679 --> 01:18:43,840
and in this case that they're

1954
01:18:40,880 --> 01:18:45,440
independent uh All the daily changes are

1955
01:18:43,840 --> 01:18:48,080
independent. That was essentially my

1956
01:18:45,440 --> 01:18:50,080
model, right? Having made that

1957
01:18:48,080 --> 01:18:51,840
assumption, I get a VAR number and an

1958
01:18:50,080 --> 01:18:54,239
expected shortfall number, right? And I

1959
01:18:51,840 --> 01:18:56,719
can back test the VAR. In real life,

1960
01:18:54,239 --> 01:18:58,239
people make more sophisticated choices.

1961
01:18:56,719 --> 01:18:59,280
They don't assume that it's normally

1962
01:18:58,239 --> 01:19:01,040
distributed. You can have other

1963
01:18:59,280 --> 01:19:04,480
distributions. You don't assume that all

1964
01:19:01,040 --> 01:19:06,480
the changes are uh in independent of of

1965
01:19:04,480 --> 01:19:08,560
each other. But the model is not really

1966
01:19:06,480 --> 01:19:11,199
a VAR model necessarily or an expected

1967
01:19:08,560 --> 01:19:13,520
shortfall model. the model is what did I

1968
01:19:11,199 --> 01:19:15,679
assume about the distribution

1969
01:19:13,520 --> 01:19:16,880
having made those assumptions I get a

1970
01:19:15,679 --> 01:19:21,040
var number and I get an expected

1971
01:19:16,880 --> 01:19:23,040
shortfall number does that make sense

1972
01:19:21,040 --> 01:19:27,199
on on this example when you were

1973
01:19:23,040 --> 01:19:31,760
explaining it u you said that uh let's

1974
01:19:27,199 --> 01:19:35,840
see I guess the actual shortfall was

1975
01:19:31,760 --> 01:19:38,080
5.2% 2% was it or through the model or

1976
01:19:35,840 --> 01:19:39,920
through the historical simulation but

1977
01:19:38,080 --> 01:19:42,719
>> yeah so what so what I said so what I'd

1978
01:19:39,920 --> 01:19:45,760
said was that this came up as so the var

1979
01:19:42,719 --> 01:19:48,480
came up as 225 right based on the model

1980
01:19:45,760 --> 01:19:51,199
if I go back to this table right so this

1981
01:19:48,480 --> 01:19:54,080
is the leftmost column here right in

1982
01:19:51,199 --> 01:19:56,719
reality we can see that there were 12 uh

1983
01:19:54,080 --> 01:19:59,679
there were 12 there were 12 actual days

1984
01:19:56,719 --> 01:20:01,760
when I exceeded that number there should

1985
01:19:59,679 --> 01:20:04,239
have been five that was the intention

1986
01:20:01,760 --> 01:20:07,600
Right? So you say, but if I was trying

1987
01:20:04,239 --> 01:20:10,480
to produce something that had a 1% that

1988
01:20:07,600 --> 01:20:12,239
I'm supposed to exceed VAR 1% of the

1989
01:20:10,480 --> 01:20:14,560
time, that's the definition of VAR,

1990
01:20:12,239 --> 01:20:17,520
right? So if I'm trying to come up with

1991
01:20:14,560 --> 01:20:20,480
a model and I'm where I expect something

1992
01:20:17,520 --> 01:20:23,199
to happen 1% of the time. So I expect

1993
01:20:20,480 --> 01:20:27,440
the VA to be exceeded 1% of the time,

1994
01:20:23,199 --> 01:20:29,600
right? Then I do 500 draws of that thing

1995
01:20:27,440 --> 01:20:31,360
and I say, well, how many times was it

1996
01:20:29,600 --> 01:20:33,040
actually exceeded?

1997
01:20:31,360 --> 01:20:34,800
>> That's and then the probability of it

1998
01:20:33,040 --> 01:20:36,800
being 12 is 5%.

1999
01:20:34,800 --> 01:20:37,360
>> So you were being conservative. At least

2000
01:20:36,800 --> 01:20:37,760
this

2001
01:20:37,360 --> 01:20:39,360
>> Yes,

2002
01:20:37,760 --> 01:20:42,320
>> this bar is conservative. Therefore,

2003
01:20:39,360 --> 01:20:44,400
it's okay even though it's wrong in a

2004
01:20:42,320 --> 01:20:44,719
sense or at least it's not calibrated.

2005
01:20:44,400 --> 01:20:46,719
>> It's

2006
01:20:44,719 --> 01:20:48,560
>> but it's conservative. Uh

2007
01:20:46,719 --> 01:20:50,880
>> it's not that conservative. A

2008
01:20:48,560 --> 01:20:53,600
conservative VA would be bigger than the

2009
01:20:50,880 --> 01:20:55,920
historical VAR. Right? The actual thing

2010
01:20:53,600 --> 01:20:57,280
is the historical VA was 300 or

2011
01:20:55,920 --> 01:21:00,800
something. Conservative would be a

2012
01:20:57,280 --> 01:21:03,600
bigger number, right? But it's not

2013
01:21:00,800 --> 01:21:07,840
overly aggressive, let's say. I think

2014
01:21:03,600 --> 01:21:10,640
that's probably the way to to to put it.

2015
01:21:07,840 --> 01:21:11,280
>> Any other questions? Anyway, thanks very

2016
01:21:10,640 --> 01:21:14,920
much.

2017
01:21:11,280 --> 01:21:14,920
>> Okay. Thank you.

2018
01:21:15,210 --> 01:21:18,359
[Applause]

